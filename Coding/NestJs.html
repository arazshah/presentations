<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />

    <title>Ø¢Ù…ÙˆØ²Ø´ Ø¬Ø§Ù…Ø¹ NestJS - Ø§Ø² Ù…Ù‚Ø¯Ù…Ø§ØªÛŒ ØªØ§ Ù¾ÛŒØ´Ø±ÙØªÙ‡</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Vazirmatn, sans-serif;
            line-height: 1.8;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #e01e37 0%, #c71e3e 100%);
            color: white;
            padding: 60px 40px;
            text-align: center;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.3em;
            opacity: 0.95;
        }

        .logo {
            width: 150px;
            margin-bottom: 20px;
        }

        nav {
            background: #2d3748;
            padding: 20px 40px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 8px;
            transition: all 0.3s;
            background: rgba(255,255,255,0.1);
        }

        nav a:hover {
            background: #e01e37;
            transform: translateY(-2px);
        }

        .content {
            padding: 40px;
        }

        section {
            margin-bottom: 60px;
            scroll-margin-top: 100px;
        }

        h2 {
            color: #e01e37;
            font-size: 2.5em;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 3px solid #e01e37;
        }

        h3 {
            color: #2d3748;
            font-size: 1.8em;
            margin: 30px 0 20px 0;
            padding-right: 15px;
            border-right: 5px solid #667eea;
        }

        h4 {
            color: #4a5568;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        p {
            color: #191b1d;
            margin-bottom: 20px;
            text-align: justify;
        }

        .code-block {
            direction: ltr;
            background: #2d3748;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
            border-right: 5px solid #e01e37;
            position: relative;
        }

        .code-block::before {
            content: attr(data-lang);
            position: absolute;
            top: 5px;
            left: 10px;
            background: #e01e37;
            color: white;
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 0.8em;
        }

        pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        code {
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
        }

        .inline-code {
            background: #f7fafc;
            color: #e01e37;
            padding: 3px 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .note {
            background: #fff5f5;
            border-right: 5px solid #fc8181;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .tip {
            background: #f0fff4;
            border-right: 5px solid #68d391;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .warning {
            background: #fffaf0;
            border-right: 5px solid #f6ad55;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .info {
            background: #ebf8ff;
            border-right: 5px solid #4299e1;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        ul, ol {
            margin: 20px 0 20px 40px;
            color: #4a5568;
        }

        li {
            margin-bottom: 10px;
        }

        table {
          direction: ltr;
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        th {
            background: #e01e37;
            color: white;
            padding: 15px;
            text-align: right;
        }

        td {
            padding: 12px 15px;
            border-bottom: 1px solid #e2e8f0;
        }

        tr:nth-child(even) {
            background: #f7fafc;
        }

        tr:hover {
            background: #edf2f7;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card h4 {
            color: white;
            margin-top: 0;
        }

        .architecture-diagram {
            background: #f7fafc;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
        }

        footer {
            background: #2d3748;
            color: white;
            padding: 40px;
            text-align: center;
        }

        .toc {
            background: #f7fafc;
            padding: 30px;
            border-radius: 15px;
            margin: 30px 0;
        }

        .toc h3 {
            border-right: none;
            color: #e01e37;
        }

        .toc ul {
            list-style: none;
            margin: 20px 0;
        }

        .toc li {
            margin: 10px 0;
        }

        .toc a {
            color: #4a5568;
            text-decoration: none;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: #e01e37;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            .content {
                padding: 20px;
            }

            nav ul {
                flex-direction: column;
            }

            .feature-grid {
                grid-template-columns: 1fr;
            }
        }
        </style>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-typescript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-dockerfile.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-nginx.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸš€ Ø¢Ù…ÙˆØ²Ø´ Ø¬Ø§Ù…Ø¹ NestJS</h1>
            <p>Ø§Ø² Ù…Ù‚Ø¯Ù…Ø§ØªÛŒ ØªØ§ Ù¾ÛŒØ´Ø±ÙØªÙ‡ - Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ú©Ø§Ù…Ù„ ØªÙˆØ³Ø¹Ù‡ Backend Ø¨Ø§ NestJS</p>
        </header>

        <nav>
            <ul>
                <li><a href="#introduction">Ù…Ù‚Ø¯Ù…Ù‡</a></li>
                <li><a href="#installation">Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ</a></li>
                <li><a href="#fundamentals">Ù…ÙØ§Ù‡ÛŒÙ… Ù¾Ø§ÛŒÙ‡</a></li>
                <li><a href="#modules">Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§</a></li>
                <li><a href="#controllers">Ú©Ù†ØªØ±Ù„Ø±Ù‡Ø§</a></li>
                <li><a href="#providers">Ù¾Ø±ÙˆØ§ÛŒØ¯Ø±Ù‡Ø§</a></li>
                <li><a href="#middleware">Middleware</a></li>
                <li><a href="#pipes">Pipes</a></li>
                <li><a href="#guards">Guards</a></li>
                <li><a href="#interceptors">Interceptors</a></li>
                <li><a href="#database">Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡</a></li>
                <li><a href="#authentication">Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª</a></li>
                <li><a href="#testing">ØªØ³Øª</a></li>
                <li><a href="#deployment">Ø§Ø³ØªÙ‚Ø±Ø§Ø±</a></li>
            </ul>
        </nav>

        <div class="content">
            <!-- Ù…Ù‚Ø¯Ù…Ù‡ -->
            <section id="introduction">
                <h2>ğŸ“š Ù…Ù‚Ø¯Ù…Ù‡</h2>
                
                <h3>NestJS Ú†ÛŒØ³ØªØŸ</h3>
                <p>
                    NestJS ÛŒÚ© ÙØ±ÛŒÙ…ÙˆØ±Ú© Ù¾ÛŒØ´Ø±ÙØªÙ‡ Node.js Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ù…Øª Ø³Ø±ÙˆØ± Ø§Ø³Øª Ú©Ù‡ Ø¨Ø§ TypeScript Ù†ÙˆØ´ØªÙ‡ Ø´Ø¯Ù‡ Ùˆ Ø§Ø² Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù…Ø¯ÙˆÙ„Ø§Ø± Ùˆ Ù‚Ø§Ø¨Ù„ Ù…Ù‚ÛŒØ§Ø³ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø§ÛŒÙ† ÙØ±ÛŒÙ…ÙˆØ±Ú© Ø§Ø² Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ù…Ø¯Ø±Ù† Ù…Ø§Ù†Ù†Ø¯ Dependency InjectionØŒ Decorators Ùˆ Module System Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                </p>

                <div class="feature-grid">
                    <div class="feature-card">
                        <h4>ğŸ¯ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù…Ø¯ÙˆÙ„Ø§Ø±</h4>
                        <p>Ø³Ø§Ø®ØªØ§Ø± Ù…Ø¯ÙˆÙ„Ø§Ø± Ùˆ Ø³Ø§Ø²Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯</p>
                    </div>
                    <div class="feature-card">
                        <h4>ğŸ’‰ Dependency Injection</h4>
                        <p>Ø³ÛŒØ³ØªÙ… Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ ØªØ²Ø±ÛŒÙ‚ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¨Ù‡ØªØ± Ú©Ø¯</p>
                    </div>
                    <div class="feature-card">
                        <h4>ğŸ”’ TypeScript</h4>
                        <p>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² TypeScript Ø¨Ø±Ø§ÛŒ Type Safety</p>
                    </div>
                    <div class="feature-card">
                        <h4>ğŸš€ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø§Ù„Ø§</h4>
                        <p>Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ùˆ Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ</p>
                    </div>
                    <div class="feature-card">
                        <h4>ğŸ§ª Ù‚Ø§Ø¨Ù„ÛŒØª ØªØ³Øª</h4>
                        <p>Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù†ÙˆØ´ØªÙ† ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø¢Ø³Ø§Ù†</p>
                    </div>
                    <div class="feature-card">
                        <h4>ğŸ“¦ Ø§Ú©ÙˆØ³ÛŒØ³ØªÙ… ØºÙ†ÛŒ</h4>
                        <p>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø­Ø¨ÙˆØ¨ Node.js</p>
                    </div>
                </div>

                <h3>Ú†Ø±Ø§ NestJSØŸ</h3>
                <ul>
                    <li><strong>Ù…Ø¹Ù…Ø§Ø±ÛŒ Ø§Ù„Ù‡Ø§Ù…â€ŒÚ¯Ø±ÙØªÙ‡ Ø§Ø² Angular:</strong> Ø§Ú¯Ø± Ø¨Ø§ Angular Ø¢Ø´Ù†Ø§ Ù‡Ø³ØªÛŒØ¯ØŒ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ NestJS Ø¨Ø³ÛŒØ§Ø± Ø¢Ø³Ø§Ù† Ø®ÙˆØ§Ù‡Ø¯ Ø¨ÙˆØ¯</li>
                    <li><strong>Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø¹Ø§Ù„ÛŒ:</strong> Ù…Ø³ØªÙ†Ø¯Ø§Øª Ú©Ø§Ù…Ù„ Ùˆ Ø¨Ù‡â€ŒØ±ÙˆØ²</li>
                    <li><strong>Ø¬Ø§Ù…Ø¹Ù‡ ÙØ¹Ø§Ù„:</strong> Ø¬Ø§Ù…Ø¹Ù‡ Ø¨Ø²Ø±Ú¯ Ùˆ ÙØ¹Ø§Ù„ ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ú¯Ø§Ù†</li>
                    <li><strong>Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¨Ø§ Express/Fastify:</strong> Ø§Ù…Ú©Ø§Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² middleware Ù‡Ø§ÛŒ Express</li>
                    <li><strong>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² GraphQL:</strong> Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø¯Ø§Ø®Ù„ÛŒ Ø§Ø² GraphQL</li>
                    <li><strong>Microservices:</strong> Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³</li>
                </ul>

                <div class="info">
                    <h4>ğŸ’¡ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…</h4>
                    <p>
                        NestJS Ø¨Ø± Ø±ÙˆÛŒ Express ÛŒØ§ Fastify Ø¨Ù†Ø§ Ø´Ø¯Ù‡ Ø§Ø³Øª Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² ØªÙ…Ø§Ù… Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† ÙØ±ÛŒÙ…ÙˆØ±Ú©â€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
                    </p>
                </div>
            </section>

            <!-- Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ -->
            <section id="installation">
                <h2>âš™ï¸ Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ</h2>

                <h3>Ù¾ÛŒØ´â€ŒÙ†ÛŒØ§Ø²Ù‡Ø§</h3>
                <ul>
                    <li>Node.js Ù†Ø³Ø®Ù‡ 16 ÛŒØ§ Ø¨Ø§Ù„Ø§ØªØ±</li>
                    <li>npm ÛŒØ§ yarn ÛŒØ§ pnpm</li>
                    <li>Ø¢Ø´Ù†Ø§ÛŒÛŒ Ø¨Ø§ TypeScript (ØªÙˆØµÛŒÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯)</li>
                </ul>

                <h3>Ù†ØµØ¨ NestJS CLI</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Ù†ØµØ¨ CLI Ø¨Ù‡ ØµÙˆØ±Øª Global
npm install -g @nestjs/cli

# Ø¨Ø±Ø±Ø³ÛŒ Ù†ØµØ¨
nest --version</code></pre>
                </div>

                <h3>Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ø±ÙˆÚ˜Ù‡ Ø¬Ø¯ÛŒØ¯
nest new project-name

# Ø§Ù†ØªØ®Ø§Ø¨ Package Manager
? Which package manager would you â¤ï¸ to use? (Use arrow keys)
â¯ npm
  yarn
  pnpm</code></pre>
                </div>

                <h3>Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡</h3>
                <div class="code-block" data-lang="text">
<pre><code>project-name/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.controller.ts       # Ú©Ù†ØªØ±Ù„Ø± Ø§ØµÙ„ÛŒ
â”‚   â”œâ”€â”€ app.controller.spec.ts  # ÙØ§ÛŒÙ„ ØªØ³Øª Ú©Ù†ØªØ±Ù„Ø±
â”‚   â”œâ”€â”€ app.module.ts            # Ù…Ø§Ú˜ÙˆÙ„ Ø§ØµÙ„ÛŒ
â”‚   â”œâ”€â”€ app.service.ts           # Ø³Ø±ÙˆÛŒØ³ Ø§ØµÙ„ÛŒ
â”‚   â””â”€â”€ main.ts                  # Ù†Ù‚Ø·Ù‡ ÙˆØ±ÙˆØ¯ Ø¨Ø±Ù†Ø§Ù…Ù‡
â”œâ”€â”€ test/                        # ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØªØ³Øª E2E
â”œâ”€â”€ node_modules/
â”œâ”€â”€ nest-cli.json                # ØªÙ†Ø¸ÛŒÙ…Ø§Øª CLI
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json                # ØªÙ†Ø¸ÛŒÙ…Ø§Øª TypeScript
â””â”€â”€ tsconfig.build.json</code></pre>
                </div>

                <h3>Ø§Ø¬Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Development mode Ø¨Ø§ watch
npm run start:dev

# Production mode
npm run start:prod

# Debug mode
npm run start:debug</code></pre>
                </div>

                <div class="tip">
                    <h4>âœ… Ù†Ú©ØªÙ‡</h4>
                    <p>
                        Ø¨Ø§ Ø¯Ø³ØªÙˆØ± <span class="inline-code">npm run start:dev</span> Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¯Ø± Ø­Ø§Ù„Øª ØªÙˆØ³Ø¹Ù‡ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¨Ø§ Ù‡Ø± ØªØºÛŒÛŒØ± Ø¯Ø± Ú©Ø¯ØŒ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± restart Ù…ÛŒâ€ŒØ´ÙˆØ¯.
                    </p>
                </div>

                <h3>ÙØ§ÛŒÙ„ main.ts</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  
  // ØªÙ†Ø¸ÛŒÙ…Ø§Øª CORS
  app.enableCors();
  
  // ØªÙ†Ø¸ÛŒÙ… Ù¾ÙˆØ±Øª
  await app.listen(3000);
  
  console.log(`Application is running on: ${await app.getUrl()}`);
}
bootstrap();</code></pre>
                </div>
            </section>

            <!-- Ù…ÙØ§Ù‡ÛŒÙ… Ù¾Ø§ÛŒÙ‡ -->
            <section id="fundamentals">
                <h2>ğŸ“ Ù…ÙØ§Ù‡ÛŒÙ… Ù¾Ø§ÛŒÙ‡</h2>

                <h3>Ù…Ø¹Ù…Ø§Ø±ÛŒ NestJS</h3>
                <div class="architecture-diagram">
                    <p><strong>Modules â†’ Controllers â†’ Services (Providers)</strong></p>
                    <p style="margin-top: 20px;">
                        Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ Ø³Ø§Ø²Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ú©Ù†Ù†Ø¯Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‡Ø³ØªÙ†Ø¯<br>
                        Ú©Ù†ØªØ±Ù„Ø±Ù‡Ø§ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ HTTP Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯<br>
                        Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ Ù…Ù†Ø·Ù‚ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± Ø±Ø§ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯
                    </p>
                </div>

                <h3>Decorators</h3>
                <p>
                    Decorators Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ÛŒ Ù‡Ø³ØªÙ†Ø¯ Ú©Ù‡ Ø¨Ù‡ Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ØŒ Ù…ØªØ¯Ù‡Ø§ Ùˆ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ Ù…ØªØ§Ø¯ÛŒØªØ§ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.
                </p>

                <h4>Ø§Ù†ÙˆØ§Ø¹ Decorators</h4>
                <table>
                    <thead>
                        <tr>
                            <th>Decorator</th>
                            <th>Ú©Ø§Ø±Ø¨Ø±Ø¯</th>
                            <th>Ù…Ø«Ø§Ù„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>@Module()</td>
                            <td>ØªØ¹Ø±ÛŒÙ Ù…Ø§Ú˜ÙˆÙ„</td>
                            <td>@Module({ imports: [], controllers: [], providers: [] })</td>
                        </tr>
                        <tr>
                            <td>@Controller()</td>
                            <td>ØªØ¹Ø±ÛŒÙ Ú©Ù†ØªØ±Ù„Ø±</td>
                            <td>@Controller('users')</td>
                        </tr>
                        <tr>
                            <td>@Injectable()</td>
                            <td>ØªØ¹Ø±ÛŒÙ Ø³Ø±ÙˆÛŒØ³</td>
                            <td>@Injectable()</td>
                        </tr>
                        <tr>
                            <td>@Get()</td>
                            <td>Ù…Ø³ÛŒØ± GET</td>
                            <td>@Get(':id')</td>
                        </tr>
                        <tr>
                            <td>@Post()</td>
                            <td>Ù…Ø³ÛŒØ± POST</td>
                            <td>@Post()</td>
                        </tr>
                        <tr>
                            <td>@Put()</td>
                            <td>Ù…Ø³ÛŒØ± PUT</td>
                            <td>@Put(':id')</td>
                        </tr>
                        <tr>
                            <td>@Delete()</td>
                            <td>Ù…Ø³ÛŒØ± DELETE</td>
                            <td>@Delete(':id')</td>
                        </tr>
                        <tr>
                            <td>@Patch()</td>
                            <td>Ù…Ø³ÛŒØ± PATCH</td>
                            <td>@Patch(':id')</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Dependency Injection</h3>
                <p>
                    DI ÛŒÚ©ÛŒ Ø§Ø² Ø§ØµÙˆÙ„ Ø§Ø³Ø§Ø³ÛŒ NestJS Ø§Ø³Øª Ú©Ù‡ Ø¨Ù‡ Ø´Ù…Ø§ Ø§Ù…Ú©Ø§Ù† Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± ØªØ²Ø±ÛŒÙ‚ Ú©Ù†ÛŒØ¯.
                </p>

                <div class="code-block" data-lang="typescript">
<pre><code>// user.service.ts
import { Injectable } from '@nestjs/common';

@Injectable()
export class UserService {
  private users = [];

  findAll() {
    return this.users;
  }

  findOne(id: number) {
    return this.users.find(user => user.id === id);
  }
}

// user.controller.ts
import { Controller, Get, Param } from '@nestjs/common';
import { UserService } from './user.service';

@Controller('users')
export class UserController {
  constructor(private readonly userService: UserService) {}

  @Get()
  findAll() {
    return this.userService.findAll();
  }

  @Get(':id')
  findOne(@Param('id') id: string) {
    return this.userService.findOne(+id);
  }
}</code></pre>
                </div>
            </section>

            <!-- Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ -->
            <section id="modules">
                <h2>ğŸ“¦ Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ (Modules)</h2>

                <p>
                    Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ ÙˆØ§Ø­Ø¯Ù‡Ø§ÛŒ Ø³Ø§Ø²Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ú©Ø¯ Ø¯Ø± NestJS Ù‡Ø³ØªÙ†Ø¯. Ù‡Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø­Ø¯Ø§Ù‚Ù„ ÛŒÚ© Ù…Ø§Ú˜ÙˆÙ„ (Root Module) Ø¯Ø§Ø±Ø¯.
                </p>

                <h3>Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø§Ú˜ÙˆÙ„</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ø§ CLI
nest generate module users
# ÛŒØ§ Ø¨Ù‡ ØµÙˆØ±Øª Ø®Ù„Ø§ØµÙ‡
nest g module users</code></pre>
                </div>

                <h3>Ø³Ø§Ø®ØªØ§Ø± Ù…Ø§Ú˜ÙˆÙ„</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Module } from '@nestjs/common';
import { UserController } from './user.controller';
import { UserService } from './user.service';

@Module({
  imports: [],        // Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ú©Ù‡ Ø§ÛŒÙ† Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ù‡ Ø¢Ù†Ù‡Ø§ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ø¯
  controllers: [UserController],  // Ú©Ù†ØªØ±Ù„Ø±Ù‡Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø§Ú˜ÙˆÙ„
  providers: [UserService],       // Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ù…Ø§Ú˜ÙˆÙ„
  exports: [UserService],         // Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø¨Ø±Ø§ÛŒ Ø³Ø§ÛŒØ± Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ export Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
})
export class UserModule {}</code></pre>
                </div>

                <h3>Ù…Ø§Ú˜ÙˆÙ„ Root</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// app.module.ts
import { Module } from '@nestjs/common';
import { UserModule } from './user/user.module';
import { ProductModule } from './product/product.module';
import { AuthModule } from './auth/auth.module';

@Module({
  imports: [
    UserModule,
    ProductModule,
    AuthModule,
  ],
})
export class AppModule {}</code></pre>
                </div>

                <h3>Global Modules</h3>
                <p>
                    Ù…Ø§Ú˜ÙˆÙ„â€ŒÙ‡Ø§ÛŒ Global Ø¯Ø± ØªÙ…Ø§Ù… Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù‡Ø³ØªÙ†Ø¯ Ø¨Ø¯ÙˆÙ† Ù†ÛŒØ§Ø² Ø¨Ù‡ import.
                </p>

                <div class="code-block" data-lang="typescript">
<pre><code>import { Module, Global } from '@nestjs/common';
import { DatabaseService } from './database.service';

@Global()
@Module({
  providers: [DatabaseService],
  exports: [DatabaseService],
})
export class DatabaseModule {}</code></pre>
                </div>

                <h3>Dynamic Modules</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Module, DynamicModule } from '@nestjs/common';
import { ConfigService } from './config.service';

@Module({})
export class ConfigModule {
  static forRoot(options: { folder: string }): DynamicModule {
    return {
      module: ConfigModule,
      providers: [
        {
          provide: 'CONFIG_OPTIONS',
          useValue: options,
        },
        ConfigService,
      ],
      exports: [ConfigService],
    };
  }
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡
@Module({
  imports: [ConfigModule.forRoot({ folder: './config' })],
})
export class AppModule {}</code></pre>
                </div>

                <div class="warning">
                    <h4>âš ï¸ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…</h4>
                    <p>
                        Ù‡Ø± Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ù‡ ØµÙˆØ±Øª Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Singleton Ø§Ø³Øª Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ ÛŒÚ© Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø² provider Ø±Ø§ Ø¨ÛŒÙ† Ú†Ù†Ø¯ÛŒÙ† Ù…Ø§Ú˜ÙˆÙ„ Ø¨Ù‡ Ø§Ø´ØªØ±Ø§Ú© Ø¨Ú¯Ø°Ø§Ø±ÛŒØ¯.
                    </p>
                </div>
            </section>

            <!-- Ú©Ù†ØªØ±Ù„Ø±Ù‡Ø§ -->
            <section id="controllers">
                <h2>ğŸ® Ú©Ù†ØªØ±Ù„Ø±Ù‡Ø§ (Controllers)</h2>

                <p>
                    Ú©Ù†ØªØ±Ù„Ø±Ù‡Ø§ Ù…Ø³Ø¦ÙˆÙ„ Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ HTTP Ùˆ Ø§Ø±Ø³Ø§Ù„ Ù¾Ø§Ø³Ø® Ù‡Ø³ØªÙ†Ø¯.
                </p>

                <h3>Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ØªØ±Ù„Ø±</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Ø§ÛŒØ¬Ø§Ø¯ Ú©Ù†ØªØ±Ù„Ø± Ø¨Ø§ CLI
nest generate controller users
# ÛŒØ§
nest g co users</code></pre>
                </div>

                <h3>Ú©Ù†ØªØ±Ù„Ø± Ù¾Ø§ÛŒÙ‡</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Controller, Get, Post, Put, Delete, Body, Param } from '@nestjs/common';

@Controller('users')
export class UserController {
  
  @Get()
  findAll() {
    return 'This action returns all users';
  }

  @Get(':id')
  findOne(@Param('id') id: string) {
    return `This action returns user #${id}`;
  }

  @Post()
  create(@Body() createUserDto: any) {
    return 'This action adds a new user';
  }

  @Put(':id')
  update(@Param('id') id: string, @Body() updateUserDto: any) {
    return `This action updates user #${id}`;
  }

  @Delete(':id')
  remove(@Param('id') id: string) {
    return `This action removes user #${id}`;
  }
}</code></pre>
                </div>

                <h3>Decorators Ù¾Ø§Ø±Ø§Ù…ØªØ±</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Decorator</th>
                            <th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th>
                            <th>Ù…Ø«Ø§Ù„</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>@Body()</td>
                            <td>Ø¯Ø±ÛŒØ§ÙØª body Ø¯Ø±Ø®ÙˆØ§Ø³Øª</td>
                            <td>@Body() dto: CreateUserDto</td>
                        </tr>
                        <tr>
                            <td>@Param()</td>
                            <td>Ø¯Ø±ÛŒØ§ÙØª Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ URL</td>
                            <td>@Param('id') id: string</td>
                        </tr>
                        <tr>
                            <td>@Query()</td>
                            <td>Ø¯Ø±ÛŒØ§ÙØª query parameters</td>
                            <td>@Query('search') search: string</td>
                        </tr>
                        <tr>
                            <td>@Headers()</td>
                            <td>Ø¯Ø±ÛŒØ§ÙØª headers</td>
                            <td>@Headers('authorization') auth: string</td>
                        </tr>
                        <tr>
                            <td>@Req()</td>
                            <td>Ø¯Ø±ÛŒØ§ÙØª Ú©Ù„ request</td>
                            <td>@Req() req: Request</td>
                        </tr>
                        <tr>
                            <td>@Res()</td>
                            <td>Ø¯Ø±ÛŒØ§ÙØª response</td>
                            <td>@Res() res: Response</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Ù…Ø«Ø§Ù„ Ú©Ø§Ù…Ù„ Ú©Ù†ØªØ±Ù„Ø±</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { 
  Controller, 
  Get, 
  Post, 
  Put, 
  Delete, 
  Body, 
  Param, 
  Query,
  HttpCode,
  HttpStatus,
  UseGuards,
  UsePipes,
  ValidationPipe
} from '@nestjs/common';
import { UserService } from './user.service';
import { CreateUserDto } from './dto/create-user.dto';
import { UpdateUserDto } from './dto/update-user.dto';
import { AuthGuard } from '@nestjs/passport';

@Controller('users')
@UseGuards(AuthGuard('jwt'))
export class UserController {
  constructor(private readonly userService: UserService) {}

  @Get()
  async findAll(
    @Query('page') page: number = 1,
    @Query('limit') limit: number = 10,
  ) {
    return this.userService.findAll({ page, limit });
  }

  @Get(':id')
  async findOne(@Param('id') id: string) {
    return this.userService.findOne(+id);
  }

  @Post()
  @HttpCode(HttpStatus.CREATED)
  @UsePipes(new ValidationPipe())
  async create(@Body() createUserDto: CreateUserDto) {
    return this.userService.create(createUserDto);
  }

  @Put(':id')
  async update(
    @Param('id') id: string,
    @Body() updateUserDto: UpdateUserDto,
  ) {
    return this.userService.update(+id, updateUserDto);
  }

  @Delete(':id')
  @HttpCode(HttpStatus.NO_CONTENT)
  async remove(@Param('id') id: string) {
    return this.userService.remove(+id);
  }

  @Get('search')
  async search(@Query('q') query: string) {
    return this.userService.search(query);
  }
}</code></pre>
                </div>

                <h3>Status Codes Ø³ÙØ§Ø±Ø´ÛŒ</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { HttpCode, HttpStatus } from '@nestjs/common';

@Post()
@HttpCode(HttpStatus.CREATED)
create(@Body() createDto: CreateDto) {
  return 'Created';
}

@Delete(':id')
@HttpCode(HttpStatus.NO_CONTENT)
remove(@Param('id') id: string) {
  return;
}</code></pre>
                </div>

                <h3>Headers Ø³ÙØ§Ø±Ø´ÛŒ</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Header } from '@nestjs/common';

@Get()
@Header('Cache-Control', 'no-cache, no-store')
@Header('X-Custom-Header', 'Custom Value')
findAll() {
  return [];
}</code></pre>
                </div>

                <h3>Redirect</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Redirect } from '@nestjs/common';

@Get('old-route')
@Redirect('https://example.com/new-route', 301)
redirect() {
  return;
}

// Redirect Ø¯Ø§ÛŒÙ†Ø§Ù…ÛŒÚ©
@Get('dynamic-redirect')
dynamicRedirect() {
  return { url: 'https://example.com', statusCode: 302 };
}</code></pre>
                </div>

                <div class="tip">
                    <h4>âœ… Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§</h4>
                    <ul>
                        <li>Ú©Ù†ØªØ±Ù„Ø±Ù‡Ø§ ÙÙ‚Ø· Ø¨Ø§ÛŒØ¯ routing Ùˆ validation Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ù†Ù†Ø¯</li>
                        <li>Ù…Ù†Ø·Ù‚ Ú©Ø³Ø¨â€ŒÙˆÚ©Ø§Ø± Ø±Ø§ Ø¯Ø± Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯</li>
                        <li>Ø§Ø² DTO Ù‡Ø§ Ø¨Ø±Ø§ÛŒ validation Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Ø§Ø² async/await Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù‡Ù…Ø²Ù…Ø§Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    </ul>
                </div>
            </section>

            <!-- Ù¾Ø±ÙˆØ§ÛŒØ¯Ø±Ù‡Ø§ -->
            <section id="providers">
                <h2>ğŸ”§ Ù¾Ø±ÙˆØ§ÛŒØ¯Ø±Ù‡Ø§ (Providers)</h2>

                <p>
                    Providers Ù…ÙÙ‡ÙˆÙ… Ø§Ø³Ø§Ø³ÛŒ Ø¯Ø± NestJS Ù‡Ø³ØªÙ†Ø¯. Ø¨ÛŒØ´ØªØ± Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ NestJS Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† provider Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ø´ÙˆÙ†Ø¯ - servicesØŒ repositoriesØŒ factoriesØŒ helpers Ùˆ ØºÛŒØ±Ù‡.
                </p>

                <h3>Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø±ÙˆÛŒØ³</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Ø§ÛŒØ¬Ø§Ø¯ Ø³Ø±ÙˆÛŒØ³ Ø¨Ø§ CLI
nest generate service users
# ÛŒØ§
nest g s users</code></pre>
                </div>

                <h3>Ø³Ø±ÙˆÛŒØ³ Ù¾Ø§ÛŒÙ‡</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, NotFoundException } from '@nestjs/common';
import { CreateUserDto } from './dto/create-user.dto';
import { UpdateUserDto } from './dto/update-user.dto';

@Injectable()
export class UserService {
  private users = [];
  private idCounter = 1;

  findAll() {
    return this.users;
  }

  findOne(id: number) {
    const user = this.users.find(user => user.id === id);
    if (!user) {
      throw new NotFoundException(`User with ID ${id} not found`);
    }
    return user;
  }

  create(createUserDto: CreateUserDto) {
    const newUser = {
      id: this.idCounter++,
      ...createUserDto,
      createdAt: new Date(),
    };
    this.users.push(newUser);
    return newUser;
  }

  update(id: number, updateUserDto: UpdateUserDto) {
    const userIndex = this.users.findIndex(user => user.id === id);
    if (userIndex === -1) {
      throw new NotFoundException(`User with ID ${id} not found`);
    }
    this.users[userIndex] = {
      ...this.users[userIndex],
      ...updateUserDto,
      updatedAt: new Date(),
    };
    return this.users[userIndex];
  }

  remove(id: number) {
    const userIndex = this.users.findIndex(user => user.id === id);
    if (userIndex === -1) {
      throw new NotFoundException(`User with ID ${id} not found`);
    }
    this.users.splice(userIndex, 1);
    return { deleted: true };
  }
}</code></pre>
                </div>

                <h3>Dependency Injection</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// email.service.ts
import { Injectable } from '@nestjs/common';

@Injectable()
export class EmailService {
  sendEmail(to: string, subject: string, body: string) {
    console.log(`Sending email to ${to}`);
    // Ù…Ù†Ø·Ù‚ Ø§Ø±Ø³Ø§Ù„ Ø§ÛŒÙ…ÛŒÙ„
  }
}

// user.service.ts
import { Injectable } from '@nestjs/common';
import { EmailService } from '../email/email.service';

@Injectable()
export class UserService {
  constructor(private readonly emailService: EmailService) {}

  async create(createUserDto: CreateUserDto) {
    // Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±
    const user = { ...createUserDto };
    
    // Ø§Ø±Ø³Ø§Ù„ Ø§ÛŒÙ…ÛŒÙ„ Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯Ú¯ÙˆÛŒÛŒ
    await this.emailService.sendEmail(
      user.email,
      'Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯',
      'Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ù…Ø§ Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯'
    );
    
    return user;
  }
}</code></pre>
                </div>

                <h3>Custom Providers</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// Value Provider
const configProvider = {
  provide: 'CONFIG',
  useValue: {
    apiKey: 'my-api-key',
    apiUrl: 'https://api.example.com',
  },
};

// Class Provider
const loggerProvider = {
  provide: Logger,
  useClass: CustomLogger,
};

// Factory Provider
const databaseProvider = {
  provide: 'DATABASE_CONNECTION',
  useFactory: async (configService: ConfigService) => {
    const connection = await createConnection({
      host: configService.get('DB_HOST'),
      port: configService.get('DB_PORT'),
    });
    return connection;
  },
  inject: [ConfigService],
};

// Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ù…Ø§Ú˜ÙˆÙ„
@Module({
  providers: [
    configProvider,
    loggerProvider,
    databaseProvider,
  ],
})
export class AppModule {}</code></pre>
                </div>

                <h3>Optional Dependencies</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, Optional } from '@nestjs/common';

@Injectable()
export class UserService {
  constructor(
    @Optional() private readonly cacheService: CacheService,
  ) {}

  async findOne(id: number) {
    // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² cache Ø§Ú¯Ø± Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ø´Ø¯
    if (this.cacheService) {
      const cached = await this.cacheService.get(`user:${id}`);
      if (cached) return cached;
    }
    
    // Ø¯Ø±ÛŒØ§ÙØª Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³
    const user = await this.getUserFromDb(id);
    
    // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± cache
    if (this.cacheService) {
      await this.cacheService.set(`user:${id}`, user);
    }
    
    return user;
  }
}</code></pre>
                </div>

                <h3>Property-based Injection</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, Inject } from '@nestjs/common';

@Injectable()
export class UserService {
  @Inject('CONFIG')
  private readonly config: any;

  getApiKey() {
    return this.config.apiKey;
  }
}</code></pre>
                </div>

                <h3>Scopes</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, Scope } from '@nestjs/common';

// Default Scope - Singleton
@Injectable()
export class SingletonService {}

// Request Scope - Ù‡Ø± request ÛŒÚ© instance Ø¬Ø¯ÛŒØ¯
@Injectable({ scope: Scope.REQUEST })
export class RequestScopedService {}

// Transient Scope - Ù‡Ø± injection ÛŒÚ© instance Ø¬Ø¯ÛŒØ¯
@Injectable({ scope: Scope.TRANSIENT })
export class TransientService {}</code></pre>
                </div>

                <div class="warning">
                    <h4>âš ï¸ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Performance</h4>
                    <p>
                        Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Request-scoped providers Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ø± performance ØªØ£Ø«ÛŒØ± Ø¨Ú¯Ø°Ø§Ø±Ø¯. ÙÙ‚Ø· Ø²Ù…Ø§Ù†ÛŒ Ø§Ø² Ø¢Ù† Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ Ú©Ù‡ ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±ÛŒØ¯.
                    </p>
                </div>
            </section>

            <!-- Middleware -->
            <section id="middleware">
                <h2>ğŸ”€ Middleware</h2>

                <p>
                    Middleware ØªÙˆØ§Ø¨Ø¹ÛŒ Ù‡Ø³ØªÙ†Ø¯ Ú©Ù‡ Ù‚Ø¨Ù„ Ø§Ø² route handler ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. Ø¨Ù‡ request Ùˆ response Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø±Ù†Ø¯.
                </p>

                <h3>Ø§ÛŒØ¬Ø§Ø¯ Middleware</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, NestMiddleware } from '@nestjs/common';
import { Request, Response, NextFunction } from 'express';

@Injectable()
export class LoggerMiddleware implements NestMiddleware {
  use(req: Request, res: Response, next: NextFunction) {
    console.log(`[${new Date().toISOString()}] ${req.method} ${req.url}`);
    next();
  }
}</code></pre>
                </div>

                <h3>Ø§Ø¹Ù…Ø§Ù„ Middleware</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Module, NestModule, MiddlewareConsumer } from '@nestjs/common';
import { LoggerMiddleware } from './common/middleware/logger.middleware';
import { UserModule } from './user/user.module';

@Module({
  imports: [UserModule],
})
export class AppModule implements NestModule {
  configure(consumer: MiddlewareConsumer) {
    consumer
      .apply(LoggerMiddleware)
      .forRoutes('*'); // Ø¨Ø±Ø§ÛŒ ØªÙ…Ø§Ù… route Ù‡Ø§
  }
}</code></pre>
                </div>

                <h3>Middleware Ø¨Ø§ Ù…Ø³ÛŒØ±Ù‡Ø§ÛŒ Ø®Ø§Øµ</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { RequestMethod } from '@nestjs/common';

export class AppModule implements NestModule {
  configure(consumer: MiddlewareConsumer) {
    consumer
      .apply(LoggerMiddleware)
      .forRoutes(
        { path: 'users', method: RequestMethod.GET },
        { path: 'users/:id', method: RequestMethod.GET },
      );
  }
}</code></pre>
                </div>

                <h3>Ú†Ù†Ø¯ Middleware</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>consumer
  .apply(LoggerMiddleware, AuthMiddleware, CorsMiddleware)
  .forRoutes('*');</code></pre>
                </div>

                <h3>Exclude Ù…Ø³ÛŒØ±Ù‡Ø§</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>consumer
  .apply(AuthMiddleware)
  .exclude(
    { path: 'auth/login', method: RequestMethod.POST },
    { path: 'auth/register', method: RequestMethod.POST },
    'health',
  )
  .forRoutes('*');</code></pre>
                </div>

                <h3>Functional Middleware</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// logger.middleware.ts
export function logger(req: Request, res: Response, next: NextFunction) {
  console.log(`Request...`);
  next();
}

// app.module.ts
consumer
  .apply(logger)
  .forRoutes('*');</code></pre>
                </div>

                <h3>Ù…Ø«Ø§Ù„ Ú©Ø§Ù…Ù„: Authentication Middleware</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { 
  Injectable, 
  NestMiddleware, 
  UnauthorizedException 
} from '@nestjs/common';
import { Request, Response, NextFunction } from 'express';
import { JwtService } from '@nestjs/jwt';

@Injectable()
export class AuthMiddleware implements NestMiddleware {
  constructor(private jwtService: JwtService) {}

  async use(req: Request, res: Response, next: NextFunction) {
    const authHeader = req.headers.authorization;
    
    if (!authHeader) {
      throw new UnauthorizedException('No token provided');
    }

    const token = authHeader.replace('Bearer ', '');
    
    try {
      const payload = await this.jwtService.verifyAsync(token);
      req['user'] = payload;
      next();
    } catch (error) {
      throw new UnauthorizedException('Invalid token');
    }
  }
}</code></pre>
                </div>

                <h3>Global Middleware</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// main.ts
import { NestFactory } from '@nestjs/core';
import { AppModule } from './app.module';
import { logger } from './common/middleware/logger.middleware';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  
  // Ø§Ø¹Ù…Ø§Ù„ middleware Ø¨Ù‡ ØµÙˆØ±Øª global
  app.use(logger);
  
  await app.listen(3000);
}
bootstrap();</code></pre>
                </div>

                <div class="info">
                    <h4>ğŸ’¡ ØªÙØ§ÙˆØª Middleware Ùˆ Guards</h4>
                    <p>
                        <strong>Middleware:</strong> Ù‚Ø¨Ù„ Ø§Ø² route handler Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø¨Ù‡ route handler Ø¯Ø³ØªØ±Ø³ÛŒ Ù†Ø¯Ø§Ø±Ø¯<br>
                        <strong>Guards:</strong> Ø¨Ø¹Ø¯ Ø§Ø² middleware Ùˆ Ù‚Ø¨Ù„ Ø§Ø² route handler Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ ØªØµÙ…ÛŒÙ… Ø¨Ú¯ÛŒØ±Ø¯ Ú©Ù‡ Ø¢ÛŒØ§ request Ø¨Ø§ÛŒØ¯ Ø§Ø¯Ø§Ù…Ù‡ ÛŒØ§Ø¨Ø¯ ÛŒØ§ Ù†Ù‡
                    </p>
                </div>
            </section>

            <!-- Pipes -->
            <section id="pipes">
                <h2>ğŸ”§ Pipes</h2>

                <p>
                    Pipes Ø¯Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø§ØµÙ„ÛŒ Ø¯Ø§Ø±Ù†Ø¯: <strong>transformation</strong> (ØªØ¨Ø¯ÛŒÙ„ Ø¯Ø§Ø¯Ù‡ ÙˆØ±ÙˆØ¯ÛŒ) Ùˆ <strong>validation</strong> (Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø§Ø¯Ù‡).
                </p>

                <h3>Built-in Pipes</h3>
                <ul>
                    <li><span class="inline-code">ValidationPipe</span> - Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ø§Ø¯Ù‡ Ø¨Ø§ class-validator</li>
                    <li><span class="inline-code">ParseIntPipe</span> - ØªØ¨Ø¯ÛŒÙ„ string Ø¨Ù‡ integer</li>
                    <li><span class="inline-code">ParseFloatPipe</span> - ØªØ¨Ø¯ÛŒÙ„ string Ø¨Ù‡ float</li>
                    <li><span class="inline-code">ParseBoolPipe</span> - ØªØ¨Ø¯ÛŒÙ„ string Ø¨Ù‡ boolean</li>
                    <li><span class="inline-code">ParseArrayPipe</span> - ØªØ¨Ø¯ÛŒÙ„ string Ø¨Ù‡ array</li>
                    <li><span class="inline-code">ParseUUIDPipe</span> - Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ UUID</li>
                    <li><span class="inline-code">ParseEnumPipe</span> - Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ enum</li>
                    <li><span class="inline-code">DefaultValuePipe</span> - Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´â€ŒÙØ±Ø¶</li>
                </ul>

                <h3>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Built-in Pipes</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { 
  Controller, 
  Get, 
  Param, 
  ParseIntPipe,
  ParseUUIDPipe,
  DefaultValuePipe,
  Query
} from '@nestjs/common';

@Controller('users')
export class UserController {
  @Get(':id')
  findOne(@Param('id', ParseIntPipe) id: number) {
    return `User #${id}`;
  }

  @Get('uuid/:id')
  findByUuid(@Param('id', ParseUUIDPipe) id: string) {
    return `User UUID: ${id}`;
  }

  @Get()
  findAll(
    @Query('page', new DefaultValuePipe(1), ParseIntPipe) page: number,
    @Query('limit', new DefaultValuePipe(10), ParseIntPipe) limit: number,
  ) {
    return { page, limit };
  }
}</code></pre>
                </div>

                <h3>ValidationPipe</h3>
                
                <h4>Ù†ØµØ¨ Dependencies</h4>
                <div class="code-block" data-lang="bash">
<pre><code>npm install class-validator class-transformer</code></pre>
                </div>

                <h4>Ø§ÛŒØ¬Ø§Ø¯ DTO</h4>
                <div class="code-block" data-lang="typescript">
<pre><code>// create-user.dto.ts
import { 
  IsString, 
  IsEmail, 
  IsNotEmpty, 
  MinLength,
  MaxLength,
  IsOptional,
  IsInt,
  Min,
  Max
} from 'class-validator';

export class CreateUserDto {
  @IsString()
  @IsNotEmpty()
  @MinLength(3)
  @MaxLength(50)
  name: string;

  @IsEmail()
  @IsNotEmpty()
  email: string;

  @IsString()
  @MinLength(8)
  @MaxLength(100)
  password: string;

  @IsOptional()
  @IsInt()
  @Min(1)
  @Max(120)
  age?: number;
}</code></pre>
                </div>

                <h4>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ValidationPipe</h4>
                <div class="code-block" data-lang="typescript">
<pre><code>// Ø¯Ø± controller
@Post()
@UsePipes(new ValidationPipe())
create(@Body() createUserDto: CreateUserDto) {
  return this.userService.create(createUserDto);
}

// ÛŒØ§ Ø¨Ù‡ ØµÙˆØ±Øª global Ø¯Ø± main.ts
import { ValidationPipe } from '@nestjs/common';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  
  app.useGlobalPipes(new ValidationPipe({
    whitelist: true,           // Ø­Ø°Ù property Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ
    forbidNonWhitelisted: true, // Ø®Ø·Ø§ Ø¨Ø±Ø§ÛŒ property Ù‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ
    transform: true,            // ØªØ¨Ø¯ÛŒÙ„ Ø®ÙˆØ¯Ú©Ø§Ø± type Ù‡Ø§
    transformOptions: {
      enableImplicitConversion: true,
    },
  }));
  
  await app.listen(3000);
}
bootstrap();</code></pre>
                </div>

                <h3>Custom Pipe</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { 
  PipeTransform, 
  Injectable, 
  ArgumentMetadata, 
  BadRequestException 
} from '@nestjs/common';

@Injectable()
export class ParsePositiveIntPipe implements PipeTransform<string, number> {
  transform(value: string, metadata: ArgumentMetadata): number {
    const val = parseInt(value, 10);
    
    if (isNaN(val)) {
      throw new BadRequestException('Validation failed: not a number');
    }
    
    if (val <= 0) {
      throw new BadRequestException('Validation failed: must be positive');
    }
    
    return val;
  }
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡
@Get(':id')
findOne(@Param('id', ParsePositiveIntPipe) id: number) {
  return this.userService.findOne(id);
}</code></pre>
                </div>

                <h3>Custom Validation Decorators</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { 
  registerDecorator, 
  ValidationOptions, 
  ValidationArguments 
} from 'class-validator';

export function IsStrongPassword(validationOptions?: ValidationOptions) {
  return function (object: Object, propertyName: string) {
    registerDecorator({
      name: 'isStrongPassword',
      target: object.constructor,
      propertyName: propertyName,
      options: validationOptions,
      validator: {
        validate(value: any, args: ValidationArguments) {
          const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/;
          return typeof value === 'string' && regex.test(value);
        },
        defaultMessage(args: ValidationArguments) {
          return 'Password must contain at least 8 characters, one uppercase, one lowercase, one number and one special character';
        },
      },
    });
  };
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡
export class CreateUserDto {
  @IsStrongPassword()
  password: string;
}</code></pre>
                </div>

                <h3>Validation Groups</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { IsString, IsEmail, MinLength } from 'class-validator';

export class UserDto {
  @IsString({ groups: ['create', 'update'] })
  name: string;

  @IsEmail({}, { groups: ['create'] })
  email: string;

  @MinLength(8, { groups: ['create'] })
  password: string;
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡
@Post()
create(@Body(new ValidationPipe({ groups: ['create'] })) dto: UserDto) {
  return this.userService.create(dto);
}

@Put(':id')
update(@Body(new ValidationPipe({ groups: ['update'] })) dto: UserDto) {
  return this.userService.update(dto);
}</code></pre>
                </div>

                <div class="tip">
                    <h4>âœ… Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§</h4>
                    <ul>
                        <li>Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² ValidationPipe Ø¨Ù‡ ØµÙˆØ±Øª global Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>DTO Ù‡Ø§ÛŒ Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø¨Ø±Ø§ÛŒ create Ùˆ update Ø¨Ø³Ø§Ø²ÛŒØ¯</li>
                        <li>Ø§Ø² whitelist: true Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù†ÛŒØª Ø¨ÛŒØ´ØªØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®Ø·Ø§ÛŒ ÙˆØ§Ø¶Ø­ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ù¾Ø³Ù†Ø¯ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯</li>
                    </ul>
                </div>
            </section>

            <!-- Guards -->
            <section id="guards">
                <h2>ğŸ›¡ï¸ Guards</h2>

                <p>
                    Guards ØªØ¹ÛŒÛŒÙ† Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ Ú©Ù‡ Ø¢ÛŒØ§ ÛŒÚ© request Ø¨Ø§ÛŒØ¯ ØªÙˆØ³Ø· route handler Ù…Ø¯ÛŒØ±ÛŒØª Ø´ÙˆØ¯ ÛŒØ§ Ù†Ù‡. Ø¨Ø±Ø§ÛŒ Authorization Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
                </p>

                <h3>Ø§ÛŒØ¬Ø§Ø¯ Guard</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, CanActivate, ExecutionContext } from '@nestjs/common';
import { Observable } from 'rxjs';

@Injectable()
export class AuthGuard implements CanActivate {
  canActivate(
    context: ExecutionContext,
  ): boolean | Promise<boolean> | Observable<boolean> {
    const request = context.switchToHttp().getRequest();
    return this.validateRequest(request);
  }

  private validateRequest(request: any): boolean {
    // Ù…Ù†Ø·Ù‚ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ
    return true;
  }
}</code></pre>
                </div>

                <h3>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Guard</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// Ø¯Ø± Ø³Ø·Ø­ controller
@Controller('users')
@UseGuards(AuthGuard)
export class UserController {}

// Ø¯Ø± Ø³Ø·Ø­ method
@Get()
@UseGuards(AuthGuard)
findAll() {
  return [];
}

// Ú†Ù†Ø¯ guard
@Get()
@UseGuards(AuthGuard, RolesGuard)
findAll() {
  return [];
}</code></pre>
                </div>

                <h3>Global Guard</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// main.ts
const app = await NestFactory.create(AppModule);
app.useGlobalGuards(new AuthGuard());

// ÛŒØ§ Ø¯Ø± app.module.ts Ø¨Ø§ DI
import { APP_GUARD } from '@nestjs/core';

@Module({
  providers: [
    {
      provide: APP_GUARD,
      useClass: AuthGuard,
    },
  ],
})
export class AppModule {}</code></pre>
                </div>

                <h3>Roles Guard Ø¨Ø§ Custom Decorator</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// roles.decorator.ts
import { SetMetadata } from '@nestjs/common';

export const ROLES_KEY = 'roles';
export const Roles = (...roles: string[]) => SetMetadata(ROLES_KEY, roles);

// roles.guard.ts
import { Injectable, CanActivate, ExecutionContext } from '@nestjs/common';
import { Reflector } from '@nestjs/core';
import { ROLES_KEY } from './roles.decorator';

@Injectable()
export class RolesGuard implements CanActivate {
  constructor(private reflector: Reflector) {}

  canActivate(context: ExecutionContext): boolean {
    const requiredRoles = this.reflector.getAllAndOverride<string[]>(
      ROLES_KEY,
      [context.getHandler(), context.getClass()],
    );
    
    if (!requiredRoles) {
      return true;
    }
    
    const { user } = context.switchToHttp().getRequest();
    return requiredRoles.some((role) => user.roles?.includes(role));
  }
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡
@Controller('admin')
@UseGuards(AuthGuard, RolesGuard)
export class AdminController {
  @Get('users')
  @Roles('admin', 'superadmin')
  getAllUsers() {
    return [];
  }

  @Post('settings')
  @Roles('superadmin')
  updateSettings() {
    return {};
  }
}</code></pre>
                </div>

                <h3>JWT Guard</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { 
  Injectable, 
  CanActivate, 
  ExecutionContext,
  UnauthorizedException 
} from '@nestjs/common';
import { JwtService } from '@nestjs/jwt';
import { Request } from 'express';

@Injectable()
export class JwtAuthGuard implements CanActivate {
  constructor(private jwtService: JwtService) {}

  async canActivate(context: ExecutionContext): Promise<boolean> {
    const request = context.switchToHttp().getRequest();
    const token = this.extractTokenFromHeader(request);
    
    if (!token) {
      throw new UnauthorizedException('No token provided');
    }
    
    try {
      const payload = await this.jwtService.verifyAsync(token, {
        secret: process.env.JWT_SECRET,
      });
      
      // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† user Ø¨Ù‡ request
      request['user'] = payload;
    } catch {
      throw new UnauthorizedException('Invalid token');
    }
    
    return true;
  }

  private extractTokenFromHeader(request: Request): string | undefined {
    const [type, token] = request.headers.authorization?.split(' ') ?? [];
    return type === 'Bearer' ? token : undefined;
  }
}</code></pre>
                </div>

                <h3>Public Decorator</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// public.decorator.ts
import { SetMetadata } from '@nestjs/common';

export const IS_PUBLIC_KEY = 'isPublic';
export const Public = () => SetMetadata(IS_PUBLIC_KEY, true);

// auth.guard.ts (Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù‡)
@Injectable()
export class JwtAuthGuard implements CanActivate {
  constructor(
    private jwtService: JwtService,
    private reflector: Reflector,
  ) {}

  async canActivate(context: ExecutionContext): Promise<boolean> {
    const isPublic = this.reflector.getAllAndOverride<boolean>(
      IS_PUBLIC_KEY,
      [context.getHandler(), context.getClass()],
    );
    
    if (isPublic) {
      return true;
    }
    
    // Ø¨Ù‚ÛŒÙ‡ Ú©Ø¯...
  }
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡
@Controller('auth')
export class AuthController {
  @Public()
  @Post('login')
  login(@Body() loginDto: LoginDto) {
    return this.authService.login(loginDto);
  }

  @Public()
  @Post('register')
  register(@Body() registerDto: RegisterDto) {
    return this.authService.register(registerDto);
  }
}</code></pre>
                </div>

                <div class="warning">
                    <h4>âš ï¸ ØªØ±ØªÛŒØ¨ Ø§Ø¬Ø±Ø§</h4>
                    <p>
                        Guards Ø¨Ø¹Ø¯ Ø§Ø² Middleware Ùˆ Ù‚Ø¨Ù„ Ø§Ø² Pipes Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯:<br>
                        <strong>Middleware â†’ Guards â†’ Interceptors (before) â†’ Pipes â†’ Controller â†’ Service â†’ Interceptors (after)</strong>
                    </p>
                </div>
            </section>

            <!-- Interceptors -->
            <section id="interceptors">
                <h2>ğŸ”„ Interceptors</h2>

                <p>
                    Interceptors Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ:
                </p>
                <ul>
                    <li>Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù…Ù†Ø·Ù‚ Ù‚Ø¨Ù„/Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ Ù…ØªØ¯</li>
                    <li>ØªØ¨Ø¯ÛŒÙ„ Ù†ØªÛŒØ¬Ù‡ Ø¨Ø±Ú¯Ø´ØªÛŒ Ø§Ø² ØªØ§Ø¨Ø¹</li>
                    <li>ØªØ¨Ø¯ÛŒÙ„ exception Ù‡Ø§ÛŒ Ù¾Ø±ØªØ§Ø¨ Ø´Ø¯Ù‡</li>
                    <li>Ú¯Ø³ØªØ±Ø´ Ø±ÙØªØ§Ø± Ù¾Ø§ÛŒÙ‡ ØªØ§Ø¨Ø¹</li>
                    <li>Override Ú©Ø§Ù…Ù„ ØªØ§Ø¨Ø¹</li>
                </ul>

                <h3>Ø§ÛŒØ¬Ø§Ø¯ Interceptor</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import {
  Injectable,
  NestInterceptor,
  ExecutionContext,
  CallHandler,
} from '@nestjs/common';
import { Observable } from 'rxjs';
import { tap } from 'rxjs/operators';

@Injectable()
export class LoggingInterceptor implements NestInterceptor {
  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    console.log('Before...');
    
    const now = Date.now();
    return next
      .handle()
      .pipe(
        tap(() => console.log(`After... ${Date.now() - now}ms`)),
      );
  }
}</code></pre>
                </div>

                <h3>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Interceptor</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// Ø¯Ø± Ø³Ø·Ø­ method
@Get()
@UseInterceptors(LoggingInterceptor)
findAll() {
  return [];
}

// Ø¯Ø± Ø³Ø·Ø­ controller
@Controller('users')
@UseInterceptors(LoggingInterceptor)
export class UserController {}

// Ø¨Ù‡ ØµÙˆØ±Øª global
const app = await NestFactory.create(AppModule);
app.useGlobalInterceptors(new LoggingInterceptor());</code></pre>
                </div>

                <h3>Response Mapping Interceptor</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, NestInterceptor, ExecutionContext, CallHandler } from '@nestjs/common';
import { Observable } from 'rxjs';
import { map } from 'rxjs/operators';

export interface Response<T> {
  success: boolean;
  data: T;
  timestamp: string;
  path: string;
}

@Injectable()
export class TransformInterceptor<T> implements NestInterceptor<T, Response<T>> {
  intercept(context: ExecutionContext, next: CallHandler): Observable<Response<T>> {
    const request = context.switchToHttp().getRequest();
    
    return next.handle().pipe(
      map(data => ({
        success: true,
        data,
        timestamp: new Date().toISOString(),
        path: request.url,
      })),
    );
  }
}

// Ù†ØªÛŒØ¬Ù‡:
// {
//   "success": true,
//   "data": { ... },
//   "timestamp": "2025-11-20T10:30:00.000Z",
//   "path": "/api/users"
// }</code></pre>
                </div>

                <h3>Cache Interceptor</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, NestInterceptor, ExecutionContext, CallHandler } from '@nestjs/common';
import { Observable, of } from 'rxjs';
import { tap } from 'rxjs/operators';

@Injectable()
export class CacheInterceptor implements NestInterceptor {
  private cache = new Map();

  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    const request = context.switchToHttp().getRequest();
    const key = request.url;

    // Ø¨Ø±Ø±Ø³ÛŒ cache
    if (this.cache.has(key)) {
      console.log('Returning from cache');
      return of(this.cache.get(key));
    }

    // Ø§Ø¬Ø±Ø§ Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± cache
    return next.handle().pipe(
      tap(response => {
        console.log('Storing in cache');
        this.cache.set(key, response);
        
        // Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† cache Ø¨Ø¹Ø¯ Ø§Ø² 60 Ø«Ø§Ù†ÛŒÙ‡
        setTimeout(() => this.cache.delete(key), 60000);
      }),
    );
  }
}</code></pre>
                </div>

                <h3>Timeout Interceptor</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, NestInterceptor, ExecutionContext, CallHandler, RequestTimeoutException } from '@nestjs/common';
import { Observable, throwError, TimeoutError } from 'rxjs';
import { catchError, timeout } from 'rxjs/operators';

@Injectable()
export class TimeoutInterceptor implements NestInterceptor {
  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    return next.handle().pipe(
      timeout(5000), // 5 Ø«Ø§Ù†ÛŒÙ‡
      catchError(err => {
        if (err instanceof TimeoutError) {
          return throwError(() => new RequestTimeoutException());
        }
        return throwError(() => err);
      }),
    );
  }
}</code></pre>
                </div>

                <h3>Error Handling Interceptor</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, NestInterceptor, ExecutionContext, CallHandler, HttpException, HttpStatus } from '@nestjs/common';
import { Observable, throwError } from 'rxjs';
import { catchError } from 'rxjs/operators';

@Injectable()
export class ErrorsInterceptor implements NestInterceptor {
  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    return next
      .handle()
      .pipe(
        catchError(err => {
          console.error('Error caught by interceptor:', err);
          
          if (err instanceof HttpException) {
            return throwError(() => err);
          }
          
          // ØªØ¨Ø¯ÛŒÙ„ Ø®Ø·Ø§Ù‡Ø§ÛŒ Ù†Ø§Ø´Ù†Ø§Ø®ØªÙ‡
          return throwError(() => new HttpException({
            status: HttpStatus.INTERNAL_SERVER_ERROR,
            error: 'Internal server error',
            message: err.message,
          }, HttpStatus.INTERNAL_SERVER_ERROR));
        }),
      );
  }
}</code></pre>
                </div>

                <h3>File Upload Interceptor</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, NestInterceptor, ExecutionContext, CallHandler } from '@nestjs/common';
import { Observable } from 'rxjs';
import { map } from 'rxjs/operators';

@Injectable()
export class FileInterceptor implements NestInterceptor {
  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    const request = context.switchToHttp().getRequest();
    
    return next.handle().pipe(
      map(data => {
        // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† URL ÙØ§ÛŒÙ„ Ø¨Ù‡ response
        if (request.file) {
          return {
            ...data,
            fileUrl: `${request.protocol}://${request.get('host')}/uploads/${request.file.filename}`,
          };
        }
        return data;
      }),
    );
  }
}</code></pre>
                </div>

                <h3>Performance Monitoring Interceptor</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { Injectable, NestInterceptor, ExecutionContext, CallHandler, Logger } from '@nestjs/common';
import { Observable } from 'rxjs';
import { tap } from 'rxjs/operators';

@Injectable()
export class PerformanceInterceptor implements NestInterceptor {
  private readonly logger = new Logger(PerformanceInterceptor.name);

  intercept(context: ExecutionContext, next: CallHandler): Observable<any> {
    const request = context.switchToHttp().getRequest();
    const { method, url } = request;
    const startTime = Date.now();

    return next.handle().pipe(
      tap({
        next: () => {
          const duration = Date.now() - startTime;
          this.logger.log(`${method} ${url} - ${duration}ms`);
          
          // Ù‡Ø´Ø¯Ø§Ø± Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ù†Ø¯
          if (duration > 1000) {
            this.logger.warn(`Slow request detected: ${method} ${url} - ${duration}ms`);
          }
        },
        error: (error) => {
          const duration = Date.now() - startTime;
          this.logger.error(`${method} ${url} - ${duration}ms - Error: ${error.message}`);
        },
      }),
    );
  }
}</code></pre>
                </div>

                <div class="info">
                    <h4>ğŸ’¡ Ù†Ú©ØªÙ‡</h4>
                    <p>
                        Interceptors Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ù‡Ù… Ù‚Ø¨Ù„ Ùˆ Ù‡Ù… Ø¨Ø¹Ø¯ Ø§Ø² Ø§Ø¬Ø±Ø§ÛŒ route handler Ù…Ù†Ø·Ù‚ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†Ù†Ø¯. Ø§Ø² RxJS operators Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø± Ø¨Ø§ stream Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯.
                    </p>
                </div>
            </section>

            <!-- Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ -->
            <section id="database">
                <h2>ğŸ’¾ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡</h2>

                <h3>TypeORM</h3>
                <p>
                    TypeORM ÛŒÚ©ÛŒ Ø§Ø² Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† ORM Ù‡Ø§ÛŒ TypeScript Ø§Ø³Øª Ú©Ù‡ Ø¨Ù‡ Ø®ÙˆØ¨ÛŒ Ø¨Ø§ NestJS ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª.
                </p>

                <h4>Ù†ØµØ¨</h4>
                <div class="code-block" data-lang="bash">
<pre><code># TypeORM Ùˆ Ø¯Ø±Ø§ÛŒÙˆØ± MySQL
npm install @nestjs/typeorm typeorm mysql2

# ÛŒØ§ PostgreSQL
npm install @nestjs/typeorm typeorm pg

# ÛŒØ§ MongoDB
npm install @nestjs/typeorm typeorm mongodb</code></pre>
                </div>

                <h4>ØªÙ†Ø¸ÛŒÙ…Ø§Øª</h4>
                <div class="code-block" data-lang="typescript">
<pre><code>// app.module.ts
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';

@Module({
  imports: [
    TypeOrmModule.forRoot({
      type: 'mysql',
      host: 'localhost',
      port: 3306,
      username: 'root',
      password: 'password',
      database: 'test',
      entities: [__dirname + '/**/*.entity{.ts,.js}'],
      synchronize: true, // ÙÙ‚Ø· Ø¯Ø± development
      logging: true,
    }),
  ],
})
export class AppModule {}</code></pre>
                </div>

                <h4>Ø§ÛŒØ¬Ø§Ø¯ Entity</h4>
                <div class="code-block" data-lang="typescript">
<pre><code>// user.entity.ts
import { 
  Entity, 
  Column, 
  PrimaryGeneratedColumn, 
  CreateDateColumn,
  UpdateDateColumn,
  BeforeInsert,
  OneToMany,
  ManyToOne,
  ManyToMany,
  JoinTable,
} from 'typeorm';
import * as bcrypt from 'bcrypt';

@Entity('users')
export class User {
  @PrimaryGeneratedColumn()
  id: number;

  @Column({ length: 100 })
  name: string;

  @Column({ unique: true })
  email: string;

  @Column()
  password: string;

  @Column({ default: true })
  isActive: boolean;

  @Column({ type: 'enum', enum: ['user', 'admin'], default: 'user' })
  role: string;

  @Column({ nullable: true })
  avatar: string;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;

  @BeforeInsert()
  async hashPassword() {
    this.password = await bcrypt.hash(this.password, 10);
  }

  // Relations
  @OneToMany(() => Post, post => post.author)
  posts: Post[];

  @ManyToMany(() => Role)
  @JoinTable()
  roles: Role[];
}</code></pre>
                </div>

                <h4>Repository Pattern</h4>
                <div class="code-block" data-lang="typescript">
<pre><code>// user.module.ts
import { Module } from '@nestjs/common';
import { TypeOrmModule } from '@nestjs/typeorm';
import { User } from './user.entity';
import { UserService } from './user.service';
import { UserController } from './user.controller';

@Module({
  imports: [TypeOrmModule.forFeature([User])],
  providers: [UserService],
  controllers: [UserController],
  exports: [UserService],
})
export class UserModule {}

// user.service.ts
import { Injectable, NotFoundException } from '@nestjs/common';
import { InjectRepository } from '@nestjs/typeorm';
import { Repository } from 'typeorm';
import { User } from './user.entity';
import { CreateUserDto } from './dto/create-user.dto';

@Injectable()
export class UserService {
  constructor(
    @InjectRepository(User)
    private userRepository: Repository<User>,
  ) {}

  async findAll(): Promise<User[]> {
    return this.userRepository.find();
  }

  async findOne(id: number): Promise<User> {
    const user = await this.userRepository.findOne({ where: { id } });
    if (!user) {
      throw new NotFoundException(`User #${id} not found`);
    }
    return user;
  }

  async findByEmail(email: string): Promise<User> {
    return this.userRepository.findOne({ where: { email } });
  }

  async create(createUserDto: CreateUserDto): Promise<User> {
    const user = this.userRepository.create(createUserDto);
    return this.userRepository.save(user);
  }

  async update(id: number, updateUserDto: UpdateUserDto): Promise<User> {
    await this.userRepository.update(id, updateUserDto);
    return this.findOne(id);
  }

  async remove(id: number): Promise<void> {
    const result = await this.userRepository.delete(id);
    if (result.affected === 0) {
      throw new NotFoundException(`User #${id} not found`);
    }
  }

  // Query Ù¾ÛŒØ´Ø±ÙØªÙ‡
  async findWithPosts(id: number): Promise<User> {
    return this.userRepository.findOne({
      where: { id },
      relations: ['posts'],
    });
  }

  async searchUsers(searchTerm: string): Promise<User[]> {
    return this.userRepository
      .createQueryBuilder('user')
      .where('user.name LIKE :search', { search: `%${searchTerm}%` })
      .orWhere('user.email LIKE :search', { search: `%${searchTerm}%` })
      .getMany();
  }

  async getUsersWithPagination(page: number, limit: number) {
    const [users, total] = await this.userRepository.findAndCount({
      skip: (page - 1) * limit,
      take: limit,
      order: { createdAt: 'DESC' },
    });

    return {
      data: users,
      total,
      page,
      lastPage: Math.ceil(total / limit),
    };
  }
}</code></pre>
                </div>

                <h3>Relations</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// One-to-Many
@Entity()
export class User {
  @OneToMany(() => Post, post => post.author)
  posts: Post[];
}

@Entity()
export class Post {
  @ManyToOne(() => User, user => user.posts)
  author: User;
}

// Many-to-Many
@Entity()
export class Post {
  @ManyToMany(() => Category)
  @JoinTable()
  categories: Category[];
}

@Entity()
export class Category {
  @ManyToMany(() => Post)
  posts: Post[];
}

// One-to-One
@Entity()
export class User {
  @OneToOne(() => Profile)
  @JoinColumn()
  profile: Profile;
}

@Entity()
export class Profile {
  @OneToOne(() => User)
  user: User;
}</code></pre>
                </div>

                <h3>Transactions</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>import { DataSource } from 'typeorm';

@Injectable()
export class UserService {
  constructor(
    @InjectRepository(User)
    private userRepository: Repository<User>,
    private dataSource: DataSource,
  ) {}

  async createUserWithProfile(userData: any, profileData: any) {
    const queryRunner = this.dataSource.createQueryRunner();

    await queryRunner.connect();
    await queryRunner.startTransaction();

    try {
      const user = queryRunner.manager.create(User, userData);
      await queryRunner.manager.save(user);

      const profile = queryRunner.manager.create(Profile, {
        ...profileData,
        user,
      });
      await queryRunner.manager.save(profile);

      await queryRunner.commitTransaction();
      return user;
    } catch (err) {
      await queryRunner.rollbackTransaction();
      throw err;
    } finally {
      await queryRunner.release();
    }
  }
}</code></pre>
                </div>

                <h3>Mongoose (MongoDB)</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install @nestjs/mongoose mongoose</code></pre>
                </div>

                <div class="code-block" data-lang="typescript">
<pre><code>// app.module.ts
import { MongooseModule } from '@nestjs/mongoose';

@Module({
  imports: [
    MongooseModule.forRoot('mongodb://localhost/nest'),
  ],
})
export class AppModule {}

// user.schema.ts
import { Prop, Schema, SchemaFactory } from '@nestjs/mongoose';
import { Document } from 'mongoose';

@Schema({ timestamps: true })
export class User extends Document {
  @Prop({ required: true })
  name: string;

  @Prop({ required: true, unique: true })
  email: string;

  @Prop({ required: true })
  password: string;

  @Prop({ default: true })
  isActive: boolean;
}

export const UserSchema = SchemaFactory.createForClass(User);

// user.service.ts
import { Model } from 'mongoose';
import { InjectModel } from '@nestjs/mongoose';

@Injectable()
export class UserService {
  constructor(
    @InjectModel(User.name) private userModel: Model<User>,
  ) {}

  async create(createUserDto: CreateUserDto): Promise<User> {
    const createdUser = new this.userModel(createUserDto);
    return createdUser.save();
  }

  async findAll(): Promise<User[]> {
    return this.userModel.find().exec();
  }

  async findOne(id: string): Promise<User> {
    return this.userModel.findById(id).exec();
  }
}</code></pre>
                </div>

                <h3>Prisma</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install @prisma/client
npm install -D prisma</code></pre>
                </div>

                <div class="code-block" data-lang="typescript">
<pre><code>// prisma.service.ts
import { Injectable, OnModuleInit } from '@nestjs/common';
import { PrismaClient } from '@prisma/client';

@Injectable()
export class PrismaService extends PrismaClient implements OnModuleInit {
  async onModuleInit() {
    await this.$connect();
  }
}

// user.service.ts
@Injectable()
export class UserService {
  constructor(private prisma: PrismaService) {}

  async findAll() {
    return this.prisma.user.findMany();
  }

  async findOne(id: number) {
    return this.prisma.user.findUnique({
      where: { id },
    });
  }

  async create(data: CreateUserDto) {
    return this.prisma.user.create({
      data,
    });
  }
}</code></pre>
                </div>

                <div class="warning">
                    <h4>âš ï¸ Ù†Ú©ØªÙ‡ Ø§Ù…Ù†ÛŒØªÛŒ</h4>
                    <p>
                        Ù‡Ù…ÛŒØ´Ù‡ <span class="inline-code">synchronize: false</span> Ø±Ø§ Ø¯Ø± production ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯ Ùˆ Ø§Ø² migrations Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
                    </p>
                </div>
            </section>

            <!-- Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª -->
            <section id="authentication">
                <h2>ğŸ” Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª (Authentication)</h2>

                <h3>Ù†ØµØ¨ Dependencies</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install @nestjs/passport passport passport-local passport-jwt
npm install @nestjs/jwt
npm install bcrypt
npm install -D @types/passport-local @types/passport-jwt @types/bcrypt</code></pre>
                </div>

                <h3>Ø§ÛŒØ¬Ø§Ø¯ Auth Module</h3>
                <div class="code-block" data-lang="bash">
<pre><code>nest g module auth
nest g service auth
nest g controller auth</code></pre>
                </div>

                <h3>Auth Service</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// auth.service.ts
import { Injectable, UnauthorizedException } from '@nestjs/common';
import { JwtService } from '@nestjs/jwt';
import { UserService } from '../user/user.service';
import * as bcrypt from 'bcrypt';

@Injectable()
export class AuthService {
  constructor(
    private userService: UserService,
    private jwtService: JwtService,
  ) {}

  async validateUser(email: string, password: string): Promise<any> {
    const user = await this.userService.findByEmail(email);
    
    if (!user) {
      throw new UnauthorizedException('Invalid credentials');
    }

    const isPasswordValid = await bcrypt.compare(password, user.password);
    
    if (!isPasswordValid) {
      throw new UnauthorizedException('Invalid credentials');
    }

    const { password: _, ...result } = user;
    return result;
  }

  async login(user: any) {
    const payload = { email: user.email, sub: user.id, role: user.role };
    
    return {
      access_token: this.jwtService.sign(payload),
      user: {
        id: user.id,
        email: user.email,
        name: user.name,
        role: user.role,
      },
    };
  }

  async register(registerDto: RegisterDto) {
    const existingUser = await this.userService.findByEmail(registerDto.email);
    
    if (existingUser) {
      throw new ConflictException('Email already exists');
    }

    const hashedPassword = await bcrypt.hash(registerDto.password, 10);
    
    const user = await this.userService.create({
      ...registerDto,
      password: hashedPassword,
    });

    return this.login(user);
  }

  async refreshToken(userId: number) {
    const user = await this.userService.findOne(userId);
    return this.login(user);
  }
}</code></pre>
                </div>

                <h3>JWT Strategy</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// jwt.strategy.ts
import { ExtractJwt, Strategy } from 'passport-jwt';
import { PassportStrategy } from '@nestjs/passport';
import { Injectable, UnauthorizedException } from '@nestjs/common';
import { ConfigService } from '@nestjs/config';
import { UserService } from '../user/user.service';

@Injectable()
export class JwtStrategy extends PassportStrategy(Strategy) {
  constructor(
    private configService: ConfigService,
    private userService: UserService,
  ) {
    super({
      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),
      ignoreExpiration: false,
      secretOrKey: configService.get('JWT_SECRET'),
    });
  }

  async validate(payload: any) {
    const user = await this.userService.findOne(payload.sub);
    
    if (!user) {
      throw new UnauthorizedException();
    }

    return {
      id: payload.sub,
      email: payload.email,
      role: payload.role,
    };
  }
}</code></pre>
                </div>

                <h3>Local Strategy</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// local.strategy.ts
import { Strategy } from 'passport-local';
import { PassportStrategy } from '@nestjs/passport';
import { Injectable, UnauthorizedException } from '@nestjs/common';
import { AuthService } from './auth.service';

@Injectable()
export class LocalStrategy extends PassportStrategy(Strategy) {
  constructor(private authService: AuthService) {
    super({
      usernameField: 'email',
    });
  }

  async validate(email: string, password: string): Promise<any> {
    const user = await this.authService.validateUser(email, password);
    
    if (!user) {
      throw new UnauthorizedException();
    }
    
    return user;
  }
}</code></pre>
                </div>

                <h3>Auth Module</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// auth.module.ts
import { Module } from '@nestjs/common';
import { JwtModule } from '@nestjs/jwt';
import { PassportModule } from '@nestjs/passport';
import { ConfigModule, ConfigService } from '@nestjs/config';
import { AuthService } from './auth.service';
import { AuthController } from './auth.controller';
import { JwtStrategy } from './strategies/jwt.strategy';
import { LocalStrategy } from './strategies/local.strategy';
import { UserModule } from '../user/user.module';

@Module({
  imports: [
    UserModule,
    PassportModule,
    JwtModule.registerAsync({
      imports: [ConfigModule],
      useFactory: async (configService: ConfigService) => ({
        secret: configService.get('JWT_SECRET'),
        signOptions: {
          expiresIn: '24h',
        },
      }),
      inject: [ConfigService],
    }),
  ],
  providers: [AuthService, LocalStrategy, JwtStrategy],
  controllers: [AuthController],
  exports: [AuthService],
})
export class AuthModule {}</code></pre>
                </div>

                <h3>Auth Controller</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// auth.controller.ts
import { Controller, Post, Body, UseGuards, Request, Get } from '@nestjs/common';
import { AuthService } from './auth.service';
import { LocalAuthGuard } from './guards/local-auth.guard';
import { JwtAuthGuard } from './guards/jwt-auth.guard';
import { RegisterDto } from './dto/register.dto';
import { LoginDto } from './dto/login.dto';
import { Public } from './decorators/public.decorator';

@Controller('auth')
export class AuthController {
  constructor(private authService: AuthService) {}

  @Public()
  @Post('register')
  async register(@Body() registerDto: RegisterDto) {
    return this.authService.register(registerDto);
  }

  @Public()
  @UseGuards(LocalAuthGuard)
  @Post('login')
  async login(@Request() req, @Body() loginDto: LoginDto) {
    return this.authService.login(req.user);
  }

  @UseGuards(JwtAuthGuard)
  @Get('profile')
  getProfile(@Request() req) {
    return req.user;
  }

  @UseGuards(JwtAuthGuard)
  @Post('refresh')
  async refreshToken(@Request() req) {
    return this.authService.refreshToken(req.user.id);
  }

  @UseGuards(JwtAuthGuard)
  @Post('logout')
  async logout() {
    // Ù…Ù†Ø·Ù‚ logout (Ù…Ø«Ù„Ø§Ù‹ blacklist Ú©Ø±Ø¯Ù† token)
    return { message: 'Logged out successfully' };
  }
}</code></pre>
                </div>

                <h3>Guards</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// jwt-auth.guard.ts
import { Injectable, ExecutionContext } from '@nestjs/common';
import { AuthGuard } from '@nestjs/passport';
import { Reflector } from '@nestjs/core';
import { IS_PUBLIC_KEY } from '../decorators/public.decorator';

@Injectable()
export class JwtAuthGuard extends AuthGuard('jwt') {
  constructor(private reflector: Reflector) {
    super();
  }

  canActivate(context: ExecutionContext) {
    const isPublic = this.reflector.getAllAndOverride<boolean>(
      IS_PUBLIC_KEY,
      [context.getHandler(), context.getClass()],
    );
    
    if (isPublic) {
      return true;
    }
    
    return super.canActivate(context);
  }
}

// local-auth.guard.ts
import { Injectable } from '@nestjs/common';
import { AuthGuard } from '@nestjs/passport';

@Injectable()
export class LocalAuthGuard extends AuthGuard('local') {}</code></pre>
                </div>

                <h3>DTOs</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// register.dto.ts
import { IsEmail, IsString, MinLength, MaxLength, Matches } from 'class-validator';

export class RegisterDto {
  @IsString()
  @MinLength(3)
  @MaxLength(50)
  name: string;

  @IsEmail()
  email: string;

  @IsString()
  @MinLength(8)
  @MaxLength(100)
  @Matches(
    /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,
    { message: 'Password too weak' },
  )
  password: string;
}

// login.dto.ts
import { IsEmail, IsString } from 'class-validator';

export class LoginDto {
  @IsEmail()
  email: string;

  @IsString()
  password: string;
}</code></pre>
                </div>

                <h3>Refresh Token</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// auth.service.ts (Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† refresh token)
async login(user: any) {
  const payload = { email: user.email, sub: user.id, role: user.role };
  
  const accessToken = this.jwtService.sign(payload, {
    expiresIn: '15m',
  });
  
  const refreshToken = this.jwtService.sign(payload, {
    expiresIn: '7d',
  });
  
  // Ø°Ø®ÛŒØ±Ù‡ refresh token Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
  await this.userService.updateRefreshToken(user.id, refreshToken);
  
  return {
    access_token: accessToken,
    refresh_token: refreshToken,
    user: {
      id: user.id,
      email: user.email,
      name: user.name,
      role: user.role,
    },
  };
}

async refreshTokens(userId: number, refreshToken: string) {
  const user = await this.userService.findOne(userId);
  
  if (!user || !user.refreshToken) {
    throw new ForbiddenException('Access Denied');
  }
  
  const refreshTokenMatches = await bcrypt.compare(
    refreshToken,
    user.refreshToken,
  );
  
  if (!refreshTokenMatches) {
    throw new ForbiddenException('Access Denied');
  }
  
  return this.login(user);
}</code></pre>
                </div>

                <h3>Role-Based Access Control</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// roles.decorator.ts
import { SetMetadata } from '@nestjs/common';

export enum Role {
  User = 'user',
  Admin = 'admin',
  SuperAdmin = 'superadmin',
}

export const ROLES_KEY = 'roles';
export const Roles = (...roles: Role[]) => SetMetadata(ROLES_KEY, roles);

// roles.guard.ts
import { Injectable, CanActivate, ExecutionContext } from '@nestjs/common';
import { Reflector } from '@nestjs/core';
import { ROLES_KEY, Role } from '../decorators/roles.decorator';

@Injectable()
export class RolesGuard implements CanActivate {
  constructor(private reflector: Reflector) {}

  canActivate(context: ExecutionContext): boolean {
    const requiredRoles = this.reflector.getAllAndOverride<Role[]>(
      ROLES_KEY,
      [context.getHandler(), context.getClass()],
    );
    
    if (!requiredRoles) {
      return true;
    }
    
    const { user } = context.switchToHttp().getRequest();
    return requiredRoles.some((role) => user.role === role);
  }
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡
@Controller('admin')
@UseGuards(JwtAuthGuard, RolesGuard)
export class AdminController {
  @Get('users')
  @Roles(Role.Admin, Role.SuperAdmin)
  getAllUsers() {
    return this.userService.findAll();
  }

  @Delete('users/:id')
  @Roles(Role.SuperAdmin)
  deleteUser(@Param('id') id: string) {
    return this.userService.remove(+id);
  }
}</code></pre>
                </div>

                <h3>Two-Factor Authentication (2FA)</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install speakeasy qrcode
npm install -D @types/speakeasy @types/qrcode</code></pre>
                </div>

                <div class="code-block" data-lang="typescript">
<pre><code>// auth.service.ts
import * as speakeasy from 'speakeasy';
import * as qrcode from 'qrcode';

async generateTwoFactorSecret(userId: number) {
  const secret = speakeasy.generateSecret({
    name: `MyApp (${userId})`,
  });

  await this.userService.setTwoFactorSecret(userId, secret.base32);

  const qrCodeUrl = await qrcode.toDataURL(secret.otpauth_url);

  return {
    secret: secret.base32,
    qrCode: qrCodeUrl,
  };
}

async verifyTwoFactorCode(userId: number, code: string): Promise<boolean> {
  const user = await this.userService.findOne(userId);
  
  return speakeasy.totp.verify({
    secret: user.twoFactorSecret,
    encoding: 'base32',
    token: code,
  });
}

async loginWith2FA(user: any, code: string) {
  const isValid = await this.verifyTwoFactorCode(user.id, code);
  
  if (!isValid) {
    throw new UnauthorizedException('Invalid 2FA code');
  }
  
  return this.login(user);
}</code></pre>
                </div>

                <div class="tip">
                    <h4>âœ… Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ</h4>
                    <ul>
                        <li>Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² HTTPS Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Ø±Ù…Ø²Ù‡Ø§ÛŒ Ø¹Ø¨ÙˆØ± Ø±Ø§ hash Ú©Ù†ÛŒØ¯ (bcrypt Ø¨Ø§ salt rounds >= 10)</li>
                        <li>Ø§Ø² JWT Ø¨Ø§ expiration time Ú©ÙˆØªØ§Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Refresh token Ù‡Ø§ Ø±Ø§ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Rate limiting Ø¨Ø±Ø§ÛŒ login endpoints Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯</li>
                        <li>Ø§Ø² 2FA Ø¨Ø±Ø§ÛŒ Ø­Ø³Ø§Ø¨â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    </ul>
                </div>
            </section>

            <!-- ØªØ³Øª -->
            <section id="testing">
                <h2>ğŸ§ª ØªØ³Øª (Testing)</h2>

                <p>
                    NestJS Ø§Ø² Jest Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù‚Ø¯Ø±ØªÙ…Ù†Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ù†ÙˆØ´ØªÙ† ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Unit Ùˆ E2E ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                </p>

                <h3>Ù†ØµØ¨ Dependencies</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Dependencies ØªØ³Øª Ù…Ø¹Ù…ÙˆÙ„Ø§Ù‹ Ø§Ø² Ù‚Ø¨Ù„ Ù†ØµØ¨ Ù‡Ø³ØªÙ†Ø¯
npm install --save-dev @nestjs/testing
npm install --save-dev supertest @types/supertest</code></pre>
                </div>

                <h3>Unit Testing - Service</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// user.service.spec.ts
import { Test, TestingModule } from '@nestjs/testing';
import { UserService } from './user.service';
import { getRepositoryToken } from '@nestjs/typeorm';
import { User } from './user.entity';
import { Repository } from 'typeorm';
import { NotFoundException } from '@nestjs/common';

describe('UserService', () => {
  let service: UserService;
  let repository: Repository<User>;

  const mockRepository = {
    find: jest.fn(),
    findOne: jest.fn(),
    create: jest.fn(),
    save: jest.fn(),
    update: jest.fn(),
    delete: jest.fn(),
  };

  beforeEach(async () => {
    const module: TestingModule = await Test.createTestingModule({
      providers: [
        UserService,
        {
          provide: getRepositoryToken(User),
          useValue: mockRepository,
        },
      ],
    }).compile();

    service = module.get<UserService>(UserService);
    repository = module.get<Repository<User>>(getRepositoryToken(User));
  });

  afterEach(() => {
    jest.clearAllMocks();
  });

  it('should be defined', () => {
    expect(service).toBeDefined();
  });

  describe('findAll', () => {
    it('should return an array of users', async () => {
      const users = [
        { id: 1, name: 'User 1', email: 'user1@example.com' },
        { id: 2, name: 'User 2', email: 'user2@example.com' },
      ];

      mockRepository.find.mockResolvedValue(users);

      const result = await service.findAll();

      expect(result).toEqual(users);
      expect(mockRepository.find).toHaveBeenCalledTimes(1);
    });
  });

  describe('findOne', () => {
    it('should return a user by id', async () => {
      const user = { id: 1, name: 'User 1', email: 'user1@example.com' };

      mockRepository.findOne.mockResolvedValue(user);

      const result = await service.findOne(1);

      expect(result).toEqual(user);
      expect(mockRepository.findOne).toHaveBeenCalledWith({ where: { id: 1 } });
    });

    it('should throw NotFoundException if user not found', async () => {
      mockRepository.findOne.mockResolvedValue(null);

      await expect(service.findOne(999)).rejects.toThrow(NotFoundException);
    });
  });

  describe('create', () => {
    it('should create and return a user', async () => {
      const createUserDto = {
        name: 'New User',
        email: 'newuser@example.com',
        password: 'password123',
      };

      const savedUser = { id: 1, ...createUserDto };

      mockRepository.create.mockReturnValue(savedUser);
      mockRepository.save.mockResolvedValue(savedUser);

      const result = await service.create(createUserDto);

      expect(result).toEqual(savedUser);
      expect(mockRepository.create).toHaveBeenCalledWith(createUserDto);
      expect(mockRepository.save).toHaveBeenCalledWith(savedUser);
    });
  });

  describe('remove', () => {
    it('should delete a user', async () => {
      mockRepository.delete.mockResolvedValue({ affected: 1 });

      await service.remove(1);

      expect(mockRepository.delete).toHaveBeenCalledWith(1);
    });

    it('should throw NotFoundException if user not found', async () => {
      mockRepository.delete.mockResolvedValue({ affected: 0 });

      await expect(service.remove(999)).rejects.toThrow(NotFoundException);
    });
  });
});</code></pre>
                </div>

                <h3>Unit Testing - Controller</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// user.controller.spec.ts
import { Test, TestingModule } from '@nestjs/testing';
import { UserController } from './user.controller';
import { UserService } from './user.service';

describe('UserController', () => {
  let controller: UserController;
  let service: UserService;

  const mockUserService = {
    findAll: jest.fn(),
    findOne: jest.fn(),
    create: jest.fn(),
    update: jest.fn(),
    remove: jest.fn(),
  };

  beforeEach(async () => {
    const module: TestingModule = await Test.createTestingModule({
      controllers: [UserController],
      providers: [
        {
          provide: UserService,
          useValue: mockUserService,
        },
      ],
    }).compile();

    controller = module.get<UserController>(UserController);
    service = module.get<UserService>(UserService);
  });

  afterEach(() => {
    jest.clearAllMocks();
  });

  it('should be defined', () => {
    expect(controller).toBeDefined();
  });

  describe('findAll', () => {
    it('should return an array of users', async () => {
      const users = [
        { id: 1, name: 'User 1' },
        { id: 2, name: 'User 2' },
      ];

      mockUserService.findAll.mockResolvedValue(users);

      const result = await controller.findAll();

      expect(result).toEqual(users);
      expect(service.findAll).toHaveBeenCalled();
    });
  });

  describe('findOne', () => {
    it('should return a single user', async () => {
      const user = { id: 1, name: 'User 1' };

      mockUserService.findOne.mockResolvedValue(user);

      const result = await controller.findOne('1');

      expect(result).toEqual(user);
      expect(service.findOne).toHaveBeenCalledWith(1);
    });
  });

  describe('create', () => {
    it('should create a new user', async () => {
      const createUserDto = { name: 'New User', email: 'test@example.com' };
      const createdUser = { id: 1, ...createUserDto };

      mockUserService.create.mockResolvedValue(createdUser);

      const result = await controller.create(createUserDto);

      expect(result).toEqual(createdUser);
      expect(service.create).toHaveBeenCalledWith(createUserDto);
    });
  });
});</code></pre>
                </div>

                <h3>E2E Testing</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// test/app.e2e-spec.ts
import { Test, TestingModule } from '@nestjs/testing';
import { INestApplication, ValidationPipe } from '@nestjs/common';
import * as request from 'supertest';
import { AppModule } from './../src/app.module';

describe('UserController (e2e)', () => {
  let app: INestApplication;
  let authToken: string;

  beforeAll(async () => {
    const moduleFixture: TestingModule = await Test.createTestingModule({
      imports: [AppModule],
    }).compile();

    app = moduleFixture.createNestApplication();
    app.useGlobalPipes(new ValidationPipe());
    await app.init();

    // Login Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª token
    const loginResponse = await request(app.getHttpServer())
      .post('/auth/login')
      .send({
        email: 'test@example.com',
        password: 'password123',
      });

    authToken = loginResponse.body.access_token;
  });

  afterAll(async () => {
    await app.close();
  });

  describe('/users (GET)', () => {
    it('should return 401 without token', () => {
      return request(app.getHttpServer())
        .get('/users')
        .expect(401);
    });

    it('should return users with valid token', () => {
      return request(app.getHttpServer())
        .get('/users')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(200)
        .expect((res) => {
          expect(Array.isArray(res.body)).toBe(true);
        });
    });
  });

  describe('/users (POST)', () => {
    it('should create a new user', () => {
      const newUser = {
        name: 'Test User',
        email: 'testuser@example.com',
        password: 'Password123!',
      };

      return request(app.getHttpServer())
        .post('/users')
        .set('Authorization', `Bearer ${authToken}`)
        .send(newUser)
        .expect(201)
        .expect((res) => {
          expect(res.body).toHaveProperty('id');
          expect(res.body.name).toBe(newUser.name);
          expect(res.body.email).toBe(newUser.email);
        });
    });

    it('should return 400 for invalid data', () => {
      return request(app.getHttpServer())
        .post('/users')
        .set('Authorization', `Bearer ${authToken}`)
        .send({
          name: 'T', // Ø®ÛŒÙ„ÛŒ Ú©ÙˆØªØ§Ù‡
          email: 'invalid-email',
          password: '123', // Ø®ÛŒÙ„ÛŒ Ú©ÙˆØªØ§Ù‡
        })
        .expect(400);
    });
  });

  describe('/users/:id (GET)', () => {
    it('should return a user by id', async () => {
      const response = await request(app.getHttpServer())
        .get('/users/1')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(200);

      expect(response.body).toHaveProperty('id', 1);
    });

    it('should return 404 for non-existent user', () => {
      return request(app.getHttpServer())
        .get('/users/999999')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(404);
    });
  });

  describe('/users/:id (PUT)', () => {
    it('should update a user', () => {
      const updateData = {
        name: 'Updated Name',
      };

      return request(app.getHttpServer())
        .put('/users/1')
        .set('Authorization', `Bearer ${authToken}`)
        .send(updateData)
        .expect(200)
        .expect((res) => {
          expect(res.body.name).toBe(updateData.name);
        });
    });
  });

  describe('/users/:id (DELETE)', () => {
    it('should delete a user', () => {
      return request(app.getHttpServer())
        .delete('/users/1')
        .set('Authorization', `Bearer ${authToken}`)
        .expect(204);
    });
  });
});</code></pre>
                </div>

                <h3>Mock Data Factory</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// test/factories/user.factory.ts
export class UserFactory {
  static create(overrides?: Partial<User>): User {
    return {
      id: 1,
      name: 'Test User',
      email: 'test@example.com',
      password: 'hashedPassword',
      isActive: true,
      role: 'user',
      createdAt: new Date(),
      updatedAt: new Date(),
      ...overrides,
    };
  }

  static createMany(count: number, overrides?: Partial<User>): User[] {
    return Array.from({ length: count }, (_, i) =>
      this.create({ id: i + 1, ...overrides }),
    );
  }
}</code></pre>
                </div>

                <h3>Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§
npm test

# Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ watch mode
npm run test:watch

# Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ coverage
npm run test:cov

# Ø§Ø¬Ø±Ø§ÛŒ E2E ØªØ³Øªâ€ŒÙ‡Ø§
npm run test:e2e

# Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ø®Ø§Øµ
npm test -- user.service.spec.ts

# Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ debug
node --inspect-brk -r tsconfig-paths/register -r ts-node/register node_modules/.bin/jest --runInBand</code></pre>
                </div>

                <h3>ØªÙ†Ø¸ÛŒÙ…Ø§Øª Jest</h3>
                <div class="code-block" data-lang="json">
<pre><code>// package.json
{
  "jest": {
    "moduleFileExtensions": ["js", "json", "ts"],
    "rootDir": "src",
    "testRegex": ".*\\.spec\\.ts$",
    "transform": {
      "^.+\\.(t|j)s$": "ts-jest"
    },
    "collectCoverageFrom": [
      "**/*.(t|j)s",
      "!**/*.spec.ts",
      "!**/node_modules/**",
      "!**/dist/**"
    ],
    "coverageDirectory": "../coverage",
    "testEnvironment": "node",
    "coverageThreshold": {
      "global": {
        "branches": 80,
        "functions": 80,
        "lines": 80,
        "statements": 80
      }
    }
  }
}</code></pre>
                </div>

                <div class="tip">
                    <h4>âœ… Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ ØªØ³Øª</h4>
                    <ul>
                        <li>ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Unit Ø¨Ø±Ø§ÛŒ Ù‡Ø± service Ùˆ controller Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯</li>
                        <li>Ø§Ø² Mock Ø¨Ø±Ø§ÛŒ dependencies Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ E2E Ø¨Ø±Ø§ÛŒ flow Ù‡Ø§ÛŒ Ù…Ù‡Ù… Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯</li>
                        <li>Code coverage Ø­Ø¯Ø§Ù‚Ù„ 80% Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯</li>
                        <li>ØªØ³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø³Ø±ÛŒØ¹ Ùˆ Ù…Ø³ØªÙ‚Ù„ Ø¨Ø§Ø´Ù†Ø¯</li>
                        <li>Ø§Ø² Factory Pattern Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª test data Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    </ul>
                </div>
            </section>

            <!-- Ø§Ø³ØªÙ‚Ø±Ø§Ø± -->
            <section id="deployment">
                <h2>ğŸš€ Ø§Ø³ØªÙ‚Ø±Ø§Ø± (Deployment)</h2>

                <h3>Build Ø¨Ø±Ø§ÛŒ Production</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Build Ù¾Ø±ÙˆÚ˜Ù‡
npm run build

# Ø§Ø¬Ø±Ø§ÛŒ build Ø´Ø¯Ù‡
node dist/main.js

# ÛŒØ§ Ø¨Ø§ PM2
pm2 start dist/main.js --name "my-nest-app"</code></pre>
                </div>

                <h3>Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install @nestjs/config</code></pre>
                </div>

                <div class="code-block" data-lang="typescript">
<pre><code>// app.module.ts
import { ConfigModule } from '@nestjs/config';

@Module({
  imports: [
    ConfigModule.forRoot({
      isGlobal: true,
      envFilePath: `.env.${process.env.NODE_ENV}`,
      validationSchema: Joi.object({
        NODE_ENV: Joi.string()
          .valid('development', 'production', 'test')
          .default('development'),
        PORT: Joi.number().default(3000),
        DATABASE_HOST: Joi.string().required(),
        DATABASE_PORT: Joi.number().default(5432),
        JWT_SECRET: Joi.string().required(),
      }),
    }),
  ],
})
export class AppModule {}

// Ø§Ø³ØªÙØ§Ø¯Ù‡
import { ConfigService } from '@nestjs/config';

@Injectable()
export class AppService {
  constructor(private configService: ConfigService) {}

  getDatabaseHost(): string {
    return this.configService.get<string>('DATABASE_HOST');
  }
}</code></pre>
                </div>

                <h3>Dockerfile</h3>
                <div class="code-block" data-lang="dockerfile">
<pre><code># Multi-stage build
FROM node:18-alpine AS builder

WORKDIR /app

COPY package*.json ./
RUN npm ci

COPY . .
RUN npm run build

# Production image
FROM node:18-alpine

WORKDIR /app

COPY package*.json ./
RUN npm ci --only=production

COPY --from=builder /app/dist ./dist

EXPOSE 3000

CMD ["node", "dist/main.js"]</code></pre>
                </div>

                <h3>docker-compose.yml</h3>
                <div class="code-block" data-lang="yaml">
<pre><code>version: '3.8'

services:
  app:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      - DATABASE_HOST=postgres
      - DATABASE_PORT=5432
      - DATABASE_USER=myuser
      - DATABASE_PASSWORD=[REDACTED]
      - DATABASE_NAME=mydb
    depends_on:
      - postgres
      - redis
    restart: unless-stopped

  postgres:
    image: postgres:15-alpine
    environment:
      - POSTGRES_USER=myuser
      - POSTGRES_PASSWORD=[REDACTED]
      - POSTGRES_DB=mydb
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

volumes:
  postgres_data:
  redis_data:</code></pre>
                </div>

                <h3>PM2 Ecosystem</h3>
                <div class="code-block" data-lang="javascript">
<pre><code>// ecosystem.config.js
module.exports = {
  apps: [{
    name: 'nest-app',
    script: './dist/main.js',
    instances: 'max',
    exec_mode: 'cluster',
    env: {
      NODE_ENV: 'production',
      PORT: 3000,
    },
    error_file: './logs/err.log',
    out_file: './logs/out.log',
    log_date_format: 'YYYY-MM-DD HH:mm:ss Z',
    merge_logs: true,
    max_memory_restart: '1G',
  }],
};</code></pre>
                </div>

                <h3>Nginx Configuration</h3>
                <div class="code-block" data-lang="nginx">
<pre><code>server {
    listen 80;
    server_name example.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # Static files
    location /uploads {
        alias /var/www/uploads;
        expires 30d;
        add_header Cache-Control "public, immutable";
    }
}</code></pre>
                </div>

                <h3>Health Check</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install @nestjs/terminus</code></pre>
                </div>

                <div class="code-block" data-lang="typescript">
<pre><code>// health.controller.ts
import { Controller, Get } from '@nestjs/common';
import {
  HealthCheckService,
  HttpHealthIndicator,
  TypeOrmHealthIndicator,
  HealthCheck,
} from '@nestjs/terminus';

@Controller('health')
export class HealthController {
  constructor(
    private health: HealthCheckService,
    private http: HttpHealthIndicator,
    private db: TypeOrmHealthIndicator,
  ) {}

  @Get()
  @HealthCheck()
  check() {
    return this.health.check([
      () => this.http.pingCheck('api', 'https://api.example.com'),
      () => this.db.pingCheck('database'),
    ]);
  }
}</code></pre>
                </div>

                <h3>Logging</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install winston nest-winston</code></pre>
                </div>

                <div class="code-block" data-lang="typescript">
<pre><code>// main.ts
import { WinstonModule } from 'nest-winston';
import * as winston from 'winston';

const app = await NestFactory.create(AppModule, {
  logger: WinstonModule.createLogger({
    transports: [
      new winston.transports.Console({
        format: winston.format.combine(
          winston.format.timestamp(),
          winston.format.ms(),
          winston.format.colorize(),
          winston.format.printf(({ timestamp, level, message, context, ms }) => {
            return `${timestamp} [${context}] ${level}: ${message} ${ms}`;
          }),
        ),
      }),
      new winston.transports.File({
        filename: 'logs/error.log',
        level: 'error',
        format: winston.format.combine(
          winston.format.timestamp(),
          winston.format.json(),
        ),
      }),
      new winston.transports.File({
        filename: 'logs/combined.log',
        format: winston.format.combine(
          winston.format.timestamp(),
          winston.format.json(),
        ),
      }),
    ],
  }),
});</code></pre>
                </div>

                <h3>Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø±ÙˆÛŒ Heroku</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Ù†ØµØ¨ Heroku CLI
npm install -g heroku

# Login
heroku login

# Ø§ÛŒØ¬Ø§Ø¯ app
heroku create my-nest-app

# ØªÙ†Ø¸ÛŒÙ… Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ
heroku config:set NODE_ENV=production
heroku config:set DATABASE_URL=postgresql://...

# Push Ú©Ø¯
git push heroku main

# Ù…Ø´Ø§Ù‡Ø¯Ù‡ logs
heroku logs --tail</code></pre>
                </div>

                <div class="code-block" data-lang="json">
<pre><code>// Procfile
web: node dist/main.js

// package.json
{
  "scripts": {
    "start": "node dist/main.js",
    "heroku-postbuild": "npm run build"
  }
}</code></pre>
                </div>

                <h3>Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø±ÙˆÛŒ AWS (EC2)</h3>
                <div class="code-block" data-lang="bash">
<pre><code># Ù†ØµØ¨ Node.js Ø±ÙˆÛŒ EC2
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -
sudo apt-get install -y nodejs

# Clone Ù¾Ø±ÙˆÚ˜Ù‡
git clone https://github.com/username/project.git
cd project

# Ù†ØµØ¨ dependencies
npm ci --only=production

# Build
npm run build

# Ù†ØµØ¨ PM2
npm install -g pm2

# Ø§Ø¬Ø±Ø§
pm2 start ecosystem.config.js

# Auto startup
pm2 startup
pm2 save</code></pre>
                </div>

                <h3>Monitoring</h3>
                <div class="code-block" data-lang="bash">
<pre><code># PM2 Monitoring
pm2 monit

# ÛŒØ§ Ø¨Ø§ PM2 Plus
pm2 link [secret-key] [public-key]

# Ù…Ø´Ø§Ù‡Ø¯Ù‡ logs
pm2 logs

# Ù…Ø´Ø§Ù‡Ø¯Ù‡ status
pm2 status</code></pre>
                </div>

                <div class="warning">
                    <h4>âš ï¸ Ù†Ú©Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ Production</h4>
                    <ul>
                        <li>Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² HTTPS Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ Ø±Ø§ Ø§Ù…Ù† Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯</li>
                        <li>Rate limiting ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯</li>
                        <li>CORS Ø±Ø§ Ø¨Ù‡ Ø¯Ø±Ø³ØªÛŒ ØªÙ†Ø¸ÛŒÙ… Ú©Ù†ÛŒØ¯</li>
                        <li>Helmet Ø¨Ø±Ø§ÛŒ security headers Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Logs Ø±Ø§ Ù…Ø§Ù†ÛŒØªÙˆØ± Ú©Ù†ÛŒØ¯</li>
                        <li>Database backup Ù…Ù†Ø¸Ù… Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒØ¯</li>
                    </ul>
                </div>

                <h3>Security Best Practices</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install helmet
npm install @nestjs/throttler</code></pre>
                </div>

                <div class="code-block" data-lang="typescript">
<pre><code>// main.ts
import helmet from 'helmet';
import { NestFactory} from '@nestjs/core';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);
  
  // Security headers
  app.use(helmet());
  
  // CORS
  app.enableCors({
    origin: process.env.ALLOWED_ORIGINS?.split(',') || ['http://localhost:3000'],
    credentials: true,
  });
  
  // Rate limiting
  app.useGlobalGuards(new ThrottlerGuard());
  
  await app.listen(3000);
}
bootstrap();

// app.module.ts
import { ThrottlerModule } from '@nestjs/throttler';

@Module({
  imports: [
    ThrottlerModule.forRoot({
      ttl: 60,
      limit: 10,
    }),
  ],
})
export class AppModule {}</code></pre>
                </div>
            </section>

            <!-- Ù…Ù†Ø§Ø¨Ø¹ Ùˆ Ù…Ø±Ø§Ø¬Ø¹ -->
            <section id="resources">
                <h2>ğŸ“š Ù…Ù†Ø§Ø¨Ø¹ Ùˆ Ù…Ø±Ø§Ø¬Ø¹</h2>

                <h3>Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø±Ø³Ù…ÛŒ</h3>
                <ul>
                    <li><strong>NestJS Documentation:</strong> <a href="https://docs.nestjs.com" target="_blank">https://docs.nestjs.com</a></li>
                    <li><strong>TypeORM Documentation:</strong> <a href="https://typeorm.io" target="_blank">https://typeorm.io</a></li>
                    <li><strong>Mongoose Documentation:</strong> <a href="https://mongoosejs.com" target="_blank">https://mongoosejs.com</a></li>
                    <li><strong>Prisma Documentation:</strong> <a href="https://www.prisma.io/docs" target="_blank">https://www.prisma.io/docs</a></li>
                </ul>

                <h3>Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§ÛŒ Ù…ÙÛŒØ¯</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Ù¾Ú©ÛŒØ¬</th>
                            <th>Ú©Ø§Ø±Ø¨Ø±Ø¯</th>
                            <th>Ù†ØµØ¨</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>@nestjs/swagger</td>
                            <td>Ù…Ø³ØªÙ†Ø¯Ø§Øª API Ø®ÙˆØ¯Ú©Ø§Ø±</td>
                            <td>npm install @nestjs/swagger swagger-ui-express</td>
                        </tr>
                        <tr>
                            <td>@nestjs/graphql</td>
                            <td>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² GraphQL</td>
                            <td>npm install @nestjs/graphql @nestjs/apollo</td>
                        </tr>
                        <tr>
                            <td>@nestjs/microservices</td>
                            <td>Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù…ÛŒÚ©Ø±ÙˆØ³Ø±ÙˆÛŒØ³</td>
                            <td>npm install @nestjs/microservices</td>
                        </tr>
                        <tr>
                            <td>@nestjs/websockets</td>
                            <td>WebSocket Ùˆ Socket.io</td>
                            <td>npm install @nestjs/websockets @nestjs/platform-socket.io</td>
                        </tr>
                        <tr>
                            <td>@nestjs/schedule</td>
                            <td>Cron Jobs</td>
                            <td>npm install @nestjs/schedule</td>
                        </tr>
                        <tr>
                            <td>@nestjs/bull</td>
                            <td>Queue Management</td>
                            <td>npm install @nestjs/bull bull</td>
                        </tr>
                        <tr>
                            <td>@nestjs/cache-manager</td>
                            <td>Caching</td>
                            <td>npm install @nestjs/cache-manager cache-manager</td>
                        </tr>
                        <tr>
                            <td>class-validator</td>
                            <td>Validation</td>
                            <td>npm install class-validator class-transformer</td>
                        </tr>
                    </tbody>
                </table>

                <h3>Swagger Integration</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// main.ts
import { SwaggerModule, DocumentBuilder } from '@nestjs/swagger';

async function bootstrap() {
  const app = await NestFactory.create(AppModule);

  const config = new DocumentBuilder()
    .setTitle('My API')
    .setDescription('API description')
    .setVersion('1.0')
    .addBearerAuth()
    .addTag('users')
    .build();

  const document = SwaggerModule.createDocument(app, config);
  SwaggerModule.setup('api', app, document);

  await app.listen(3000);
}
bootstrap();

// Ø¯Ø± controller
import { ApiTags, ApiOperation, ApiResponse, ApiBearerAuth } from '@nestjs/swagger';

@ApiTags('users')
@ApiBearerAuth()
@Controller('users')
export class UserController {
  @Get()
  @ApiOperation({ summary: 'Get all users' })
  @ApiResponse({ status: 200, description: 'Return all users.' })
  @ApiResponse({ status: 403, description: 'Forbidden.' })
  findAll() {
    return this.userService.findAll();
  }
}</code></pre>
                </div>

                <h3>WebSocket Example</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// events.gateway.ts
import {
  WebSocketGateway,
  SubscribeMessage,
  MessageBody,
  WebSocketServer,
  ConnectedSocket,
} from '@nestjs/websockets';
import { Server, Socket } from 'socket.io';

@WebSocketGateway({
  cors: {
    origin: '*',
  },
})
export class EventsGateway {
  @WebSocketServer()
  server: Server;

  @SubscribeMessage('message')
  handleMessage(
    @MessageBody() data: string,
    @ConnectedSocket() client: Socket,
  ): string {
    this.server.emit('message', data);
    return data;
  }

  @SubscribeMessage('join-room')
  handleJoinRoom(
    @MessageBody() room: string,
    @ConnectedSocket() client: Socket,
  ) {
    client.join(room);
    this.server.to(room).emit('user-joined', client.id);
  }
}</code></pre>
                </div>

                <h3>Cron Jobs</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// tasks.service.ts
import { Injectable } from '@nestjs/common';
import { Cron, CronExpression } from '@nestjs/schedule';

@Injectable()
export class TasksService {
  @Cron(CronExpression.EVERY_10_SECONDS)
  handleCron() {
    console.log('Called every 10 seconds');
  }

  @Cron('0 0 * * *')
  handleDailyTask() {
    console.log('Called at midnight every day');
  }

  @Cron('0 0 1 * *')
  handleMonthlyTask() {
    console.log('Called at midnight on the first day of every month');
  }
}</code></pre>
                </div>

                <h3>Queue Management</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// app.module.ts
import { BullModule } from '@nestjs/bull';

@Module({
  imports: [
    BullModule.forRoot({
      redis: {
        host: 'localhost',
        port: 6379,
      },
    }),
    BullModule.registerQueue({
      name: 'email',
    }),
  ],
})
export class AppModule {}

// email.processor.ts
import { Process, Processor } from '@nestjs/bull';
import { Job } from 'bull';

@Processor('email')
export class EmailProcessor {
  @Process('send')
  async handleSendEmail(job: Job) {
    console.log('Sending email...');
    console.log(job.data);
    // Ù…Ù†Ø·Ù‚ Ø§Ø±Ø³Ø§Ù„ Ø§ÛŒÙ…ÛŒÙ„
    return {};
  }
}

// email.service.ts
import { InjectQueue } from '@nestjs/bull';
import { Queue } from 'bull';

@Injectable()
export class EmailService {
  constructor(@InjectQueue('email') private emailQueue: Queue) {}

  async sendWelcomeEmail(email: string) {
    await this.emailQueue.add('send', {
      to: email,
      subject: 'Welcome',
      body: 'Welcome to our app!',
    });
  }
}</code></pre>
                </div>

                <h3>File Upload</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install multer
npm install -D @types/multer</code></pre>
                </div>

                <div class="code-block" data-lang="typescript">
<pre><code>// file-upload.controller.ts
import {
  Controller,
  Post,
  UseInterceptors,
  UploadedFile,
  UploadedFiles,
} from '@nestjs/common';
import {
  FileInterceptor,
  FilesInterceptor,
  FileFieldsInterceptor,
} from '@nestjs/platform-express';
import { diskStorage } from 'multer';
import { extname } from 'path';

@Controller('upload')
export class FileUploadController {
  // ØªÚ© ÙØ§ÛŒÙ„
  @Post('single')
  @UseInterceptors(
    FileInterceptor('file', {
      storage: diskStorage({
        destination: './uploads',
        filename: (req, file, cb) => {
          const randomName = Array(32)
            .fill(null)
            .map(() => Math.round(Math.random() * 16).toString(16))
            .join('');
          cb(null, `${randomName}${extname(file.originalname)}`);
        },
      }),
      limits: {
        fileSize: 5 * 1024 * 1024, // 5MB
      },
      fileFilter: (req, file, cb) => {
        if (!file.originalname.match(/\.(jpg|jpeg|png|gif)$/)) {
          return cb(new Error('Only image files are allowed!'), false);
        }
        cb(null, true);
      },
    }),
  )
  uploadFile(@UploadedFile() file: Express.Multer.File) {
    return {
      filename: file.filename,
      path: file.path,
      size: file.size,
    };
  }

  // Ú†Ù†Ø¯ ÙØ§ÛŒÙ„
  @Post('multiple')
  @UseInterceptors(FilesInterceptor('files', 10))
  uploadMultipleFiles(@UploadedFiles() files: Express.Multer.File[]) {
    return files.map(file => ({
      filename: file.filename,
      path: file.path,
      size: file.size,
    }));
  }

  // ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù
  @Post('fields')
  @UseInterceptors(
    FileFieldsInterceptor([
      { name: 'avatar', maxCount: 1 },
      { name: 'background', maxCount: 1 },
    ]),
  )
  uploadFields(@UploadedFiles() files: { avatar?: Express.Multer.File[], background?: Express.Multer.File[] }) {
    return {
      avatar: files.avatar?.[0],
      background: files.background?.[0],
    };
  }
}</code></pre>
                </div>

                <h3>Email Service</h3>
                <div class="code-block" data-lang="bash">
<pre><code>npm install nodemailer
npm install -D @types/nodemailer</code></pre>
                </div>

                <div class="code-block" data-lang="typescript">
<pre><code>// email.service.ts
import { Injectable } from '@nestjs/common';
import * as nodemailer from 'nodemailer';

@Injectable()
export class EmailService {
  private transporter;

  constructor() {
    this.transporter = nodemailer.createTransport({
      host: process.env.SMTP_HOST,
      port: process.env.SMTP_PORT,
      secure: true,
      auth: {
        user: process.env.SMTP_USER,
        pass: process.env.SMTP_PASS,
      },
    });
  }

  async sendEmail(to: string, subject: string, html: string) {
    const mailOptions = {
      from: process.env.SMTP_FROM,
      to,
      subject,
      html,
    };

    return this.transporter.sendMail(mailOptions);
  }

  async sendWelcomeEmail(email: string, name: string) {
    const html = `
      <h1>Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${name}!</h1>
      <p>Ø§Ø² Ø§ÛŒÙ†Ú©Ù‡ Ø¨Ù‡ Ù…Ø§ Ù¾ÛŒÙˆØ³ØªÛŒØ¯ Ø®ÙˆØ´Ø­Ø§Ù„ÛŒÙ….</p>
    `;

    return this.sendEmail(email, 'Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯', html);
  }

  async sendPasswordResetEmail(email: string, token: string) {
    const resetUrl = `${process.env.FRONTEND_URL}/reset-password?token=${token}`;
    const html = `
      <h1>Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</h1>
      <p>Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø®ÙˆØ¯ Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯:</p>
      <a href="${resetUrl}">Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</a>
      <p>Ø§ÛŒÙ† Ù„ÛŒÙ†Ú© ØªØ§ 1 Ø³Ø§Ø¹Øª Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª.</p>
    `;

    return this.sendEmail(email, 'Ø¨Ø§Ø²ÛŒØ§Ø¨ÛŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±', html);
  }
}</code></pre>
                </div>

                <h3>Pagination Helper</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// pagination.dto.ts
import { IsOptional, IsInt, Min, Max } from 'class-validator';
import { Type } from 'class-transformer';

export class PaginationDto {
  @IsOptional()
  @Type(() => Number)
  @IsInt()
  @Min(1)
  page?: number = 1;

  @IsOptional()
  @Type(() => Number)
  @IsInt()
  @Min(1)
  @Max(100)
  limit?: number = 10;

  get skip(): number {
    return (this.page - 1) * this.limit;
  }
}

// pagination.interface.ts
export interface PaginatedResult<T> {
  data: T[];
  meta: {
    total: number;
    page: number;
    lastPage: number;
    limit: number;
  };
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± service
async findAllPaginated(paginationDto: PaginationDto): Promise<PaginatedResult<User>> {
  const { page, limit, skip } = paginationDto;

  const [data, total] = await this.userRepository.findAndCount({
    skip,
    take: limit,
    order: { createdAt: 'DESC' },
  });

  return {
    data,
    meta: {
      total,
      page,
      lastPage: Math.ceil(total / limit),
      limit,
    },
  };
}</code></pre>
                </div>

                <h3>Custom Decorators</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// user.decorator.ts
import { createParamDecorator, ExecutionContext } from '@nestjs/common';

export const CurrentUser = createParamDecorator(
  (data: unknown, ctx: ExecutionContext) => {
    const request = ctx.switchToHttp().getRequest();
    return request.user;
  },
);

// Ø§Ø³ØªÙØ§Ø¯Ù‡
@Get('profile')
@UseGuards(JwtAuthGuard)
getProfile(@CurrentUser() user: User) {
  return user;
}

// Ø¨Ø§ Ø§Ù†ØªØ®Ø§Ø¨ property Ø®Ø§Øµ
export const CurrentUser = createParamDecorator(
  (data: string, ctx: ExecutionContext) => {
    const request = ctx.switchToHttp().getRequest();
    const user = request.user;

    return data ? user?.[data] : user;
  },
);

// Ø§Ø³ØªÙØ§Ø¯Ù‡
@Get('profile')
getUserId(@CurrentUser('id') userId: number) {
  return userId;
}</code></pre>
                </div>

                <h3>Exception Filters</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// http-exception.filter.ts
import {
  ExceptionFilter,
  Catch,
  ArgumentsHost,
  HttpException,
  HttpStatus,
} from '@nestjs/common';
import { Request, Response } from 'express';

@Catch(HttpException)
export class HttpExceptionFilter implements ExceptionFilter {
  catch(exception: HttpException, host: ArgumentsHost) {
    const ctx = host.switchToHttp();
    const response = ctx.getResponse<Response>();
    const request = ctx.getRequest<Request>();
    const status = exception.getStatus();
    const exceptionResponse = exception.getResponse();

    const error =
      typeof exceptionResponse === 'string'
        ? { message: exceptionResponse }
        : (exceptionResponse as object);

    response.status(status).json({
      ...error,
      timestamp: new Date().toISOString(),
      path: request.url,
    });
  }
}

// Ø§Ø³ØªÙØ§Ø¯Ù‡ global
app.useGlobalFilters(new HttpExceptionFilter());

// ÛŒØ§ Ø¯Ø± controller
@UseFilters(HttpExceptionFilter)
@Controller('users')
export class UserController {}</code></pre>
                </div>

                <h3>Response Serialization</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// user.entity.ts
import { Exclude } from 'class-transformer';

export class User {
  id: number;
  name: string;
  email: string;

  @Exclude()
  password: string;

  constructor(partial: Partial<User>) {
    Object.assign(this, partial);
  }
}

// user.controller.ts
import { ClassSerializerInterceptor, UseInterceptors } from '@nestjs/common';

@Controller('users')
@UseInterceptors(ClassSerializerInterceptor)
export class UserController {
  @Get(':id')
  async findOne(@Param('id') id: string) {
    const user = await this.userService.findOne(+id);
    return new User(user);
  }
}

// ÛŒØ§ global
app.useGlobalInterceptors(new ClassSerializerInterceptor(app.get(Reflector)));</code></pre>
                </div>

                <div class="info">
                    <h4>ğŸ’¡ Ù†Ú©Ø§Øª Ù¾Ø§ÛŒØ§Ù†ÛŒ</h4>
                    <ul>
                        <li>Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² TypeScript Ø¨Ù‡ Ø·ÙˆØ± Ú©Ø§Ù…Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Ú©Ø¯ Ø®ÙˆØ¯ Ø±Ø§ modular Ùˆ Ù‚Ø§Ø¨Ù„ ØªØ³Øª Ù†Ú¯Ù‡ Ø¯Ø§Ø±ÛŒØ¯</li>
                        <li>Ø§Ø² Design Patterns Ù…Ù†Ø§Ø³Ø¨ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Ù…Ø³ØªÙ†Ø¯Ø§Øª Ú©Ø¯ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯</li>
                        <li>Security Ø±Ø§ Ø¬Ø¯ÛŒ Ø¨Ú¯ÛŒØ±ÛŒØ¯</li>
                        <li>Performance Ø±Ø§ Ù…Ø§Ù†ÛŒØªÙˆØ± Ú©Ù†ÛŒØ¯</li>
                        <li>Ø§Ø² Best Practices Ù¾ÛŒØ±ÙˆÛŒ Ú©Ù†ÛŒØ¯</li>
                    </ul>
                </div>
            </section>

            <!-- Ù¾Ø±ÙˆÚ˜Ù‡ Ù†Ù…ÙˆÙ†Ù‡ -->
            <section id="sample-project">
                <h2>ğŸ¯ Ù¾Ø±ÙˆÚ˜Ù‡ Ù†Ù…ÙˆÙ†Ù‡: Ø³ÛŒØ³ØªÙ… Ù…Ø¯ÛŒØ±ÛŒØª ÙˆØ¸Ø§ÛŒÙ</h2>

                <p>
                    Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ ÛŒÚ© Ù¾Ø±ÙˆÚ˜Ù‡ Ú©Ø§Ù…Ù„ Task Management System Ø±Ø§ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….
                </p>

                <h3>Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡</h3>
                <div class="code-block" data-lang="text">
<pre><code>src/
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ decorators/
â”‚   â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ guards/
â”‚   â”œâ”€â”€ strategies/
â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â””â”€â”€ auth.module.ts
â”œâ”€â”€ users/
â”‚   â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ entities/
â”‚   â”œâ”€â”€ users.controller.ts
â”‚   â”œâ”€â”€ users.service.ts
â”‚   â””â”€â”€ users.module.ts
â”œâ”€â”€ tasks/
â”‚   â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ entities/
â”‚   â”œâ”€â”€ tasks.controller.ts
â”‚   â”œâ”€â”€ tasks.service.ts
â”‚   â””â”€â”€ tasks.module.ts
â”œâ”€â”€ projects/
â”‚   â”œâ”€â”€ dto/
â”‚   â”œâ”€â”€ entities/
â”‚   â”œâ”€â”€ projects.controller.ts
â”‚   â”œâ”€â”€ projects.service.ts
â”‚   â””â”€â”€ projects.module.ts
â”œâ”€â”€ common/
â”‚   â”œâ”€â”€ decorators/
â”‚   â”œâ”€â”€ filters/
â”‚   â”œâ”€â”€ guards/
â”‚   â”œâ”€â”€ interceptors/
â”‚   â”œâ”€â”€ pipes/
â”‚   â””â”€â”€ dto/
â”œâ”€â”€ config/
â”‚   â””â”€â”€ configuration.ts
â”œâ”€â”€ database/
â”‚   â””â”€â”€ database.module.ts
â”œâ”€â”€ app.module.ts
â””â”€â”€ main.ts</code></pre>
                </div>

                <h3>Entity Relationships</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// user.entity.ts
@Entity('users')
export class User {
  @PrimaryGeneratedColumn()
  id: number;

  @Column()
  name: string;

  @Column({ unique: true })
  email: string;

  @Column()
  password: string;

  @OneToMany(() => Project, project => project.owner)
  ownedProjects: Project[];

  @ManyToMany(() => Project, project => project.members)
  projects: Project[];

  @OneToMany(() => Task, task => task.assignee)
  tasks: Task[];
}

// project.entity.ts
@Entity('projects')
export class Project {
  @PrimaryGeneratedColumn()
  id: number;

  @Column()
  title: string;

  @Column('text')
  description: string;

  @ManyToOne(() => User, user => user.ownedProjects)
  owner: User;

  @ManyToMany(() => User, user => user.projects)
  @JoinTable()
  members: User[];

  @OneToMany(() => Task, task => task.project)
  tasks: Task[];

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;
}

// task.entity.ts
@Entity('tasks')
export class Task {
  @PrimaryGeneratedColumn()
  id: number;

  @Column()
  title: string;

  @Column('text', { nullable: true })
  description: string;

  @Column({
    type: 'enum',
    enum: ['todo', 'in_progress', 'done'],
    default: 'todo',
  })
  status: string;

  @Column({
    type: 'enum',
    enum: ['low', 'medium', 'high'],
    default: 'medium',
  })
  priority: string;

  @ManyToOne(() => Project, project => project.tasks)
  project: Project;

  @ManyToOne(() => User, user => user.tasks, { nullable: true })
  assignee: User;

  @Column({ type: 'date', nullable: true })
  dueDate: Date;

  @CreateDateColumn()
  createdAt: Date;

  @UpdateDateColumn()
  updatedAt: Date;
}</code></pre>
                </div>

                <h3>Complete CRUD Example</h3>
                <div class="code-block" data-lang="typescript">
<pre><code>// tasks.service.ts
@Injectable()
export class TasksService {
  constructor(
    @InjectRepository(Task)
    private tasksRepository: Repository<Task>,
    @InjectRepository(Project)
    private projectsRepository: Repository<Project>,
  ) {}

  async create(createTaskDto: CreateTaskDto, userId: number): Promise<Task> {
    const project = await this.projectsRepository.findOne({
      where: { id: createTaskDto.projectId },
      relations: ['members', 'owner'],
    });

    if (!project) {
      throw new NotFoundException('Project not found');
    }

    // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ
    const isMember = project.members.some(member => member.id === userId);
    const isOwner = project.owner.id === userId;

    if (!isMember && !isOwner) {
      throw new ForbiddenException('You are not a member of this project');
    }

    const task = this.tasksRepository.create({
      ...createTaskDto,
      project,
    });

    return this.tasksRepository.save(task);
  }

  async findAll(userId: number, filters: TaskFilterDto): Promise<PaginatedResult<Task>> {
    const query = this.tasksRepository
      .createQueryBuilder('task')
      .leftJoinAndSelect('task.project', 'project')
      .leftJoinAndSelect('task.assignee', 'assignee')
      .where('project.ownerId = :userId', { userId })
      .orWhere('assignee.id = :userId', { userId });

    if (filters.status) {
      query.andWhere('task.status = :status', { status: filters.status });
    }

    if (filters.priority) {
      query.andWhere('task.priority = :priority', { priority: filters.priority });
    }

    if (filters.projectId) {
      query.andWhere('task.projectId = :projectId', { projectId: filters.projectId });
    }

    const [data, total] = await query
      .skip(filters.skip)
      .take(filters.limit)
      .orderBy('task.createdAt', 'DESC')
      .getManyAndCount();

    return {
      data,
      meta: {
        total,
        page: filters.page,
        lastPage: Math.ceil(total / filters.limit),
        limit: filters.limit,
      },
    };
  }

  async update(id: number, updateTaskDto: UpdateTaskDto, userId: number): Promise<Task> {
    const task = await this.tasksRepository.findOne({
      where: { id },
      relations: ['project', 'project.owner', 'project.members'],
    });

    if (!task) {
      throw new NotFoundException('Task not found');
    }

    // Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ
    const isMember = task.project.members.some(member => member.id === userId);
    const isOwner = task.project.owner.id === userId;

    if (!isMember && !isOwner) {
      throw new ForbiddenException('Access denied');
    }

    Object.assign(task, updateTaskDto);
    return this.tasksRepository.save(task);
  }
}</code></pre>
                </div>

                <div class="tip">
                    <h4>âœ… Ø§ÛŒÙ† Ø¢Ù…ÙˆØ²Ø´ Ø´Ø§Ù…Ù„:</h4>
                    <ul>
                        <li>âœ“ Ù…ÙØ§Ù‡ÛŒÙ… Ù¾Ø§ÛŒÙ‡ Ùˆ Ù¾ÛŒØ´Ø±ÙØªÙ‡ NestJS</li>
                        <li>âœ“ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ùˆ Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡</li>
                        <li>âœ“ Ú©Ø§Ø± Ø¨Ø§ Ø¯ÛŒØªØ§Ø¨ÛŒØ³ (TypeORM, Mongoose, Prisma)</li>
                        <li>âœ“ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ùˆ Ø§Ù…Ù†ÛŒØª</li>
                        <li>âœ“ ØªØ³Øª Ù†ÙˆÛŒØ³ÛŒ</li>
                        <li>âœ“ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ùˆ Production</li>
                        <li>âœ“ Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ Ùˆ Ø§Ù„Ú¯ÙˆÙ‡Ø§</li>
                        <li>âœ“ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø§Ù…Ù„</li>
                    </ul>
                </div>
            </section>

        </div>

        <footer>
            <h3>ğŸ“ Ù¾Ø§ÛŒØ§Ù† Ø¢Ù…ÙˆØ²Ø´ Ø¬Ø§Ù…Ø¹ NestJS</h3>
            <p>
                Ø§ÛŒÙ† Ø¢Ù…ÙˆØ²Ø´ ØªÙˆØ³Ø· Claude 4.5 Sonnet ØªÙ‡ÛŒÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª<br>
                ØªØ§Ø±ÛŒØ®: Û²Û¹ Ø¢Ø¨Ø§Ù† Û±Û´Û°Û´
            </p>
            <p style="margin-top: 20px;">
                Ø¨Ø±Ø§ÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ùˆ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯Ø§Øª Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¨Ø§ Ù…Ø§ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§Ø´ÛŒØ¯<br>
                Ù…ÙˆÙÙ‚ Ùˆ Ù¾ÛŒØ±ÙˆØ² Ø¨Ø§Ø´ÛŒØ¯! ğŸš€
            </p>
        </footer>
    </div>

    <script>
        // Smooth scroll Ø¨Ø±Ø§ÛŒ Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ navigation
        document.querySelectorAll('nav a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Highlight active section Ø¯Ø± navigation
        window.addEventListener('scroll', () => {
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('nav a');
            
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                const sectionHeight = section.clientHeight;
                if (pageYOffset >= (sectionTop - 150)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.style.background = 'rgba(255,255,255,0.1)';
                if (link.getAttribute('href') === `#${current}`) {
                    link.style.background = '#e01e37';
                }
            });
        });

        // Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ú©Ø¯ Ø¨Ø§ Ú©Ù„ÛŒÚ©
        document.querySelectorAll('.code-block').forEach(block => {
            block.style.cursor = 'pointer';
            block.title = 'Click to copy';
            
            block.addEventListener('click', () => {
                const code = block.querySelector('code').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    const originalBorder = block.style.borderRight;
                    block.style.borderRight = '5px solid #48bb78';
                    setTimeout(() => {
                        block.style.borderRight = originalBorder;
                    }, 1000);
                });
            });
        });

        // Print button
        const printBtn = document.createElement('button');
        printBtn.innerHTML = 'ğŸ–¨ï¸ Print';
        printBtn.style.cssText = `
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 15px 25px;
            background: #e01e37;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;transition: all 0.3s;
        `;
        printBtn.addEventListener('mouseover', () => {
            printBtn.style.transform = 'scale(1.1)';
            printBtn.style.boxShadow = '0 6px 20px rgba(224, 30, 55, 0.4)';
        });
        printBtn.addEventListener('mouseout', () => {
            printBtn.style.transform = 'scale(1)';
            printBtn.style.boxShadow = '0 4px 15px rgba(0,0,0,0.3)';
        });
        printBtn.addEventListener('click', () => {
            window.print();
        });
        document.body.appendChild(printBtn);

        // Scroll to top button
        const scrollTopBtn = document.createElement('button');
        scrollTopBtn.innerHTML = 'â¬†ï¸';
        scrollTopBtn.style.cssText = `
            position: fixed;
            bottom: 80px;
            right: 20px;
            padding: 15px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            opacity: 0;
            transition: all 0.3s;
            display: none;
        `;
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollTopBtn.style.display = 'block';
                setTimeout(() => {
                    scrollTopBtn.style.opacity = '1';
                }, 10);
            } else {
                scrollTopBtn.style.opacity = '0';
                setTimeout(() => {
                    scrollTopBtn.style.display = 'none';
                }, 300);
            }
        });

        scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
        document.body.appendChild(scrollTopBtn);

        // Dark mode toggle
        const darkModeBtn = document.createElement('button');
        darkModeBtn.innerHTML = 'ğŸŒ™';
        darkModeBtn.style.cssText = `
            position: fixed;
            bottom: 140px;
            right: 20px;
            padding: 15px 20px;
            background: #2d3748;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            transition: all 0.3s;
        `;

        let isDarkMode = false;
        darkModeBtn.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            const container = document.querySelector('.container');
            const content = document.querySelector('.content');
            
            if (isDarkMode) {
                darkModeBtn.innerHTML = 'â˜€ï¸';
                container.style.background = '#1a202c';
                content.style.color = '#e2e8f0';
                document.querySelectorAll('h2, h3, h4').forEach(heading => {
                    heading.style.color = '#e01e37';
                });
                document.querySelectorAll('p, li').forEach(text => {
                    text.style.color = '#cbd5e0';
                });
                document.querySelectorAll('table td').forEach(td => {
                    td.style.color = '#cbd5e0';
                });
            } else {
                darkModeBtn.innerHTML = 'ğŸŒ™';
                container.style.background = 'white';
                content.style.color = '#4a5568';
                document.querySelectorAll('h2').forEach(h => {
                    h.style.color = '#e01e37';
                });
                document.querySelectorAll('h3').forEach(h => {
                    h.style.color = '#2d3748';
                });
                document.querySelectorAll('h4').forEach(h => {
                    h.style.color = '#4a5568';
                });
                document.querySelectorAll('p, li').forEach(text => {
                    text.style.color = '#4a5568';
                });
            }
        });
        document.body.appendChild(darkModeBtn);

        // Search functionality
        const searchContainer = document.createElement('div');
        searchContainer.style.cssText = `
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 2000;
            display: none;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            width: 90%;
            max-width: 600px;
        `;

        const searchInput = document.createElement('input');
        searchInput.type = 'text';
        searchInput.placeholder = 'Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¢Ù…ÙˆØ²Ø´...';
        searchInput.style.cssText = `
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            outline: none;
        `;

        const searchResults = document.createElement('div');
        searchResults.style.cssText = `
            max-height: 400px;
            overflow-y: auto;
            margin-top: 15px;
        `;

        searchContainer.appendChild(searchInput);
        searchContainer.appendChild(searchResults);
        document.body.appendChild(searchContainer);

        // Search button
        const searchBtn = document.createElement('button');
        searchBtn.innerHTML = 'ğŸ”';
        searchBtn.style.cssText = `
            position: fixed;
            bottom: 200px;
            right: 20px;
            padding: 15px 20px;
            background: #48bb78;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            transition: all 0.3s;
        `;

        searchBtn.addEventListener('click', () => {
            searchContainer.style.display = searchContainer.style.display === 'none' ? 'block' : 'none';
            if (searchContainer.style.display === 'block') {
                searchInput.focus();
            }
        });
        document.body.appendChild(searchBtn);

        // Search logic
        searchInput.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            searchResults.innerHTML = '';

            if (searchTerm.length < 2) return;

            const sections = document.querySelectorAll('section');
            let results = [];

            sections.forEach(section => {
                const title = section.querySelector('h2')?.textContent || '';
                const content = section.textContent.toLowerCase();

                if (content.includes(searchTerm)) {
                    results.push({
                        title: title,
                        id: section.id,
                        preview: getPreview(section, searchTerm)
                    });
                }
            });

            if (results.length === 0) {
                searchResults.innerHTML = '<p style="color: #718096; text-align: center;">Ù†ØªÛŒØ¬Ù‡â€ŒØ§ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯</p>';
                return;
            }

            results.forEach(result => {
                const resultItem = document.createElement('div');
                resultItem.style.cssText = `
                    padding: 15px;
                    margin-bottom: 10px;
                    background: #f7fafc;
                    border-radius: 8px;
                    cursor: pointer;
                    transition: all 0.3s;
                `;
                resultItem.innerHTML = `
                    <h4 style="margin: 0 0 10px 0; color: #e01e37;">${result.title}</h4>
                    <p style="margin: 0; color: #718096; font-size: 14px;">${result.preview}</p>
                `;
                resultItem.addEventListener('mouseover', () => {
                    resultItem.style.background = '#edf2f7';
                });
                resultItem.addEventListener('mouseout', () => {
                    resultItem.style.background = '#f7fafc';
                });
                resultItem.addEventListener('click', () => {
                    document.getElementById(result.id).scrollIntoView({ behavior: 'smooth' });
                    searchContainer.style.display = 'none';
                    searchInput.value = '';
                });
                searchResults.appendChild(resultItem);
            });
        });

        function getPreview(section, searchTerm) {
            const text = section.textContent;
            const index = text.toLowerCase().indexOf(searchTerm);
            const start = Math.max(0, index - 50);
            const end = Math.min(text.length, index + 100);
            let preview = text.substring(start, end).trim();
            
            if (start > 0) preview = '...' + preview;
            if (end < text.length) preview = preview + '...';
            
            return preview;
        }

        // Close search on Escape
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                searchContainer.style.display = 'none';
            }
        });

        // Progress bar
        const progressBar = document.createElement('div');
        progressBar.style.cssText = `
            position: fixed;
            top: 0;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, #e01e37, #667eea);
            z-index: 9999;
            transition: width 0.3s;
        `;
        document.body.appendChild(progressBar);

        window.addEventListener('scroll', () => {
            const windowHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (window.pageYOffset / windowHeight) * 100;
            progressBar.style.width = scrolled + '%';
        });

        // Table of contents generator
        function generateTOC() {
            const sections = document.querySelectorAll('section');
            const tocContainer = document.createElement('div');
            tocContainer.className = 'toc';
            
            const tocTitle = document.createElement('h3');
            tocTitle.textContent = 'ğŸ“‘ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨';
            tocContainer.appendChild(tocTitle);

            const tocList = document.createElement('ul');
            tocList.style.cssText = 'list-style: none; margin: 0;';

            sections.forEach((section, index) => {
                const heading = section.querySelector('h2');
                if (heading) {
                    const li = document.createElement('li');
                    const a = document.createElement('a');
                    a.href = `#${section.id}`;
                    a.textContent = `${index + 1}. ${heading.textContent}`;
                    a.style.cssText = `
                        display: block;
                        padding: 8px 15px;
                        border-radius: 5px;
                        transition: all 0.3s;
                    `;
                    a.addEventListener('mouseover', () => {
                        a.style.background = '#f7fafc';
                        a.style.paddingRight = '20px';
                    });
                    a.addEventListener('mouseout', () => {
                        a.style.background = 'transparent';
                        a.style.paddingRight = '15px';
                    });
                    li.appendChild(a);
                    tocList.appendChild(li);
                }
            });

            tocContainer.appendChild(tocList);
            
            // Insert TOC after introduction
            const introduction = document.getElementById('introduction');
            if (introduction) {
                introduction.after(tocContainer);
            }
        }

        // Generate TOC on load
        generateTOC();

        // Enhanced syntax highlighting with Prism.js
        document.querySelectorAll('.code-block').forEach(block => {
          const dataLang = block.getAttribute('data-lang');
          if (dataLang) {
            const code = block.querySelector('code');
            if (code) {
              const langClass = `language-${dataLang.toLowerCase()}`;
              code.className = langClass;
            }
          }
        });
        Prism.highlightAll();

        // Add animation to feature cards
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 0.6s ease-out forwards';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.feature-card, .note, .tip, .warning, .info').forEach(el => {
            el.style.opacity = '0';
            observer.observe(el);
        });

        // Add CSS animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @media print {
                nav, button {
                    display: none !important;
                }
                .container {
                    box-shadow: none !important;
                }
                section {
                    page-break-inside: avoid;
                }
                .code-block {
                    page-break-inside: avoid;
                }
            }

            /* Scrollbar styling */
            ::-webkit-scrollbar {
                width: 12px;
            }

            ::-webkit-scrollbar-track {
                background: #f1f1f1;
            }

            ::-webkit-scrollbar-thumb {
                background: #e01e37;
                border-radius: 6px;
            }

            ::-webkit-scrollbar-thumb:hover {
                background: #c71e3e;
            }

            /* Selection color */
            ::selection {
                background: #e01e37;
                color: white;
            }

            /* Link hover effect */
            a {
                position: relative;
                text-decoration: none;
            }

            a::after {
                content: '';
                position: absolute;
                bottom: -2px;
                left: 0;
                width: 0;
                height: 2px;
                background: #e01e37;
                transition: width 0.3s;
            }

            a:hover::after {
                width: 100%;
            }

            /* Responsive tables */
            @media (max-width: 768px) {
                table {
                    display: block;
                    overflow-x: auto;
                    white-space: nowrap;
                }
            }
        `;
        document.head.appendChild(style);

        // Add copy notification
        function showNotification(message) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #48bb78;
                color: white;
                padding: 15px 30px;
                border-radius: 10px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.3);
                z-index: 10000;
                animation: slideDown 0.3s ease-out;
            `;

            const slideDownKeyframes = `
                @keyframes slideDown {
                    from {
                        opacity: 0;
                        transform: translate(-50%, -20px);
                    }
                    to {
                        opacity: 1;
                        transform: translate(-50%, 0);
                    }
                }
            `;

            if (!document.querySelector('#slideDownKeyframes')) {
                const styleSheet = document.createElement('style');
                styleSheet.id = 'slideDownKeyframes';
                styleSheet.textContent = slideDownKeyframes;
                document.head.appendChild(styleSheet);
            }

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.animation = 'slideDown 0.3s ease-out reverse';
                setTimeout(() => {
                    notification.remove();
                }, 300);
            }, 2000);
        }

        // Update copy functionality with notification
        document.querySelectorAll('.code-block').forEach(block => {
            const originalClick = block.onclick;
            block.addEventListener('click', () => {
                const code = block.querySelector('code').textContent;
                navigator.clipboard.writeText(code).then(() => {
                    showNotification('âœ“ Ú©Ø¯ Ú©Ù¾ÛŒ Ø´Ø¯!');
                });
            });
        });

        // Add keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd + K for search
            if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
                e.preventDefault();
                searchContainer.style.display = 'block';
                searchInput.focus();
            }

            // Ctrl/Cmd + P for print
            if ((e.ctrlKey || e.metaKey) && e.key === 'p') {
                e.preventDefault();
                window.print();
            }
        });

        // Add shortcuts info
        const shortcutsInfo = document.createElement('div');
        shortcutsInfo.innerHTML = `
            <div style="position: fixed; bottom: 10px; left: 10px; background: rgba(0,0,0,0.8); color: white; padding: 10px; border-radius: 8px; font-size: 12px; z-index: 999; opacity: 0.7;">
                <strong>Ù…ÛŒØ§Ù†Ø¨Ø±Ù‡Ø§:</strong><br>
                Ctrl+K: Ø¬Ø³ØªØ¬Ùˆ<br>
                Ctrl+P: Ú†Ø§Ù¾<br>
                Esc: Ø¨Ø³ØªÙ†
            </div>
        `;
        document.body.appendChild(shortcutsInfo);

        // Fade out shortcuts info after 5 seconds
        setTimeout(() => {
            shortcutsInfo.style.transition = 'opacity 1s';
            shortcutsInfo.style.opacity = '0';
            setTimeout(() => {
                shortcutsInfo.remove();
            }, 1000);
        }, 5000);

        console.log('%cğŸš€ Ø¢Ù…ÙˆØ²Ø´ Ø¬Ø§Ù…Ø¹ NestJS', 'color: #e01e37; font-size: 24px; font-weight: bold;');
        console.log('%cğŸ“š ØªÙ‡ÛŒÙ‡ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Claude 4.5 Sonnet', 'color: #667eea; font-size: 16px;');
        console.log('%câœ¨ Ø§Ø² ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù„Ø°Øª Ø¨Ø¨Ø±ÛŒØ¯!', 'color: #48bb78; font-size: 14px;');
    </script>
</body>
</html>
