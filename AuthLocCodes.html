<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ - Django Models</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Tahoma', 'Arial', sans-serif;
            line-height: 1.8;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .model-section {
            background: white;
            margin: 30px 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .model-section:hover {
            transform: translateY(-5px);
        }

        .model-header {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            color: white;
            padding: 25px;
            position: relative;
        }

        .model-header h2 {
            font-size: 1.8em;
            margin-bottom: 10px;
        }

        .model-header .badge {
            background: rgba(255,255,255,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            display: inline-block;
        }

        .model-content {
            padding: 30px;
        }

        .field-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .field-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #27ae60;
            transition: all 0.3s ease;
        }

        .field-item:hover {
            background: #e8f5e8;
            transform: translateX(-5px);
        }

        .field-name {
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.1em;
            margin-bottom: 8px;
        }

        .field-type {
            color: #e74c3c;
            font-family: 'Courier New', monospace;
            background: #fff;
            padding: 3px 8px;
            border-radius: 5px;
            font-size: 0.9em;
            margin-bottom: 8px;
            display: inline-block;
        }

        .field-description {
            color: #666;
            font-size: 0.95em;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            margin: 20px 0;
            position: relative;
        }

        .code-block::before {
            content: "Python Code";
            position: absolute;
            top: 10px;
            right: 15px;
            background: #e74c3c;
            color: white;
            padding: 3px 10px;
            border-radius: 5px;
            font-size: 0.8em;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .feature-card {
            background: linear-gradient(135deg, #3498db 0%, #2980b9 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: scale(1.05);
        }

        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .example-section {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 25px;
            margin: 25px 0;
        }

        .example-title {
            color: #856404;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .relationship-diagram {
            background: white;
            border: 2px dashed #27ae60;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .relationship-item {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 25px;
            margin: 10px;
            border-radius: 25px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .relationship-item:hover {
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .arrow {
            font-size: 1.5em;
            color: #27ae60;
            margin: 0 15px;
        }

        .summary-section {
            background: linear-gradient(135deg, #ff7675 0%, #fd79a8 100%);
            color: white;
            padding: 40px;
            border-radius: 15px;
            margin-top: 40px;
            text-align: center;
        }

        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .summary-item {
            background: rgba(255,255,255,0.2);
            padding: 20px;
            border-radius: 10px;
        }

        .summary-number {
            font-size: 2.5em;
            font-weight: bold;
            display: block;
        }

        .toc {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .toc h3 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.4em;
        }

        .toc ul {
            list-style: none;
        }

        .toc li {
            padding: 8px 0;
            border-bottom: 1px solid #ecf0f1;
        }

        .toc a {
            color: #3498db;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .toc a:hover {
            color: #e74c3c;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .field-grid {
                grid-template-columns: 1fr;
            }
            
            .features-grid {
                grid-template-columns: 1fr;
            }
        }

        .highlight {
            background: linear-gradient(120deg, #a8edea 0%, #fed6e3 100%);
            padding: 3px 8px;
            border-radius: 5px;
            font-weight: bold;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .success-box {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 5px solid #17a2b8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ›ï¸ Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</h1>
            <p>Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Django Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ GIS</p>
        </div>

        <!-- Table of Contents -->
        <div class="toc">
            <h3>ğŸ“‹ ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨</h3>
            <ul>
                <li><a href="#overview">Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…</a></li>
                <li><a href="#basemodel">BaseModel - Ù…Ø¯Ù„ Ù¾Ø§ÛŒÙ‡</a></li>
                <li><a href="#organization">Organization - Ø³Ø§Ø²Ù…Ø§Ù†</a></li>
                <li><a href="#user">User - Ú©Ø§Ø±Ø¨Ø±</a></li>
                <li><a href="#role">Role - Ù†Ù‚Ø´</a></li>
                <li><a href="#rolegroup">RoleGroup - Ú¯Ø±ÙˆÙ‡ Ù†Ù‚Ø´</a></li>
                <li><a href="#userrole">UserRole - Ø§Ø®ØªØµØ§Øµ Ù†Ù‚Ø´</a></li>
                <li><a href="#geographiczone">GeographicZone - Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</a></li>
                <li><a href="#fieldpermission">FieldPermission - Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ ÙÛŒÙ„Ø¯</a></li>
                <li><a href="#relationships">Ø±ÙˆØ§Ø¨Ø· Ù…Ø¯Ù„â€ŒÙ‡Ø§</a></li>
                <li><a href="#scenarios">Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ</a></li>
                <li><a href="#summary">Ø®Ù„Ø§ØµÙ‡ Ùˆ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ</a></li>
            </ul>
        </div>

        <!-- Overview Section -->
        <div id="overview" class="model-section">
            <div class="model-header">
                <h2>ğŸ¯ Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…</h2>
                <span class="badge">Architecture Overview</span>
            </div>
            <div class="model-content">
                <p>Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… ÛŒÚ© Ø±Ø§Ù‡â€ŒØ­Ù„ Ø¬Ø§Ù…Ø¹ Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø± Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ú©Ù‡ Ø´Ø§Ù…Ù„:</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”</div>
                        <h4>Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ú†Ù†Ø¯Ù„Ø§ÛŒÙ‡</h4>
                        <p>Ø³Ø·ÙˆØ­ Ù…Ø®ØªÙ„Ù Ø§Ù…Ù†ÛŒØª Ùˆ Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ—ºï¸</div>
                        <h4>Ú©Ù†ØªØ±Ù„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</h4>
                        <p>Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">â°</div>
                        <h4>Ú©Ù†ØªØ±Ù„ Ø²Ù…Ø§Ù†ÛŒ</h4>
                        <p>ØªØ¹Ø±ÛŒÙ Ø¨Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ù…Ø¬Ø§Ø² Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ‘¥</div>
                        <h4>Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ Ø³Ø§Ø²Ù…Ø§Ù†ÛŒ</h4>
                        <p>Ø³Ø§Ø®ØªØ§Ø± Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ÛŒ</p>
                    </div>
                </div>

                <div class="success-box">
                    <strong>ğŸ’¡ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:</strong> Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¨Ù‡ Ú¯ÙˆÙ†Ù‡â€ŒØ§ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ú©Ù‡ Ù‚Ø§Ø¨Ù„ ØªØ·Ø¨ÛŒÙ‚ Ø¨Ø§ Ø§Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„Ù Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ø² Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒâ€ŒÙ‡Ø§ Ú¯Ø±ÙØªÙ‡ ØªØ§ Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§ Ùˆ Ø¨ÛŒÙ…Ø§Ø±Ø³ØªØ§Ù†â€ŒÙ‡Ø§.
                </div>
            </div>
        </div>

        <!-- BaseModel -->
        <div id="basemodel" class="model-section">
            <div class="model-header">
                <h2>ğŸ—ï¸ BaseModel - Ù…Ø¯Ù„ Ù¾Ø§ÛŒÙ‡</h2>
                <span class="badge">Abstract Model</span>
            </div>
            <div class="model-content">
                <p>Ù…Ø¯Ù„ Ù¾Ø§ÛŒÙ‡â€ŒØ§ÛŒ Ú©Ù‡ ØªÙ…Ø§Ù… Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¯ÛŒÚ¯Ø± Ø§Ø² Ø¢Ù† Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ Ùˆ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø´ØªØ±Ú© Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>

                <div class="code-block">
class BaseModel(models.Model):
    """Ù…Ø¯Ù„ Ù¾Ø§ÛŒÙ‡ Ø¨Ø§ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø´ØªØ±Ú©"""
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
    is_active = models.BooleanField(default=True)
    
    class Meta:
        abstract = True
                </div>

                <div class="field-grid">
                    <div class="field-item">
                        <div class="field-name">id</div>
                        <div class="field-type">UUIDField</div>
                        <div class="field-description">Ø´Ù†Ø§Ø³Ù‡ ÛŒÚ©ØªØ§ÛŒ UUID Ø¨Ù‡ Ø¬Ø§ÛŒ ID Ø¹Ø¯Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù†ÛŒØª Ø¨Ø§Ù„Ø§ØªØ±</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">created_at</div>
                        <div class="field-type">DateTimeField</div>
                        <div class="field-description">Ø²Ù…Ø§Ù† Ø§ÛŒØ¬Ø§Ø¯ Ø±Ú©ÙˆØ±Ø¯ (Ø®ÙˆØ¯Ú©Ø§Ø±)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">updated_at</div>
                        <div class="field-type">DateTimeField</div>
                        <div class="field-description">Ø²Ù…Ø§Ù† Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ (Ø®ÙˆØ¯Ú©Ø§Ø±)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">is_active</div>
                        <div class="field-type">BooleanField</div>
                        <div class="field-description">ÙØ¹Ø§Ù„/ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨ÙˆØ¯Ù† Ø±Ú©ÙˆØ±Ø¯ (Soft Delete)</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>ğŸ” ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ:</strong>
                    <ul>
                        <li>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² UUID Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø­Ø¯Ø³â€ŒØ²Ù†ÛŒ ID</li>
                        <li>Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø²Ù…Ø§Ù† Ø§ÛŒØ¬Ø§Ø¯ Ùˆ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</li>
                        <li>Ø§Ù…Ú©Ø§Ù† Ø­Ø°Ù Ù…Ù†Ø·Ù‚ÛŒ Ø¨Ø§ ÙÛŒÙ„Ø¯ is_active</li>
                        <li>Ù‚Ø§Ø¨Ù„ÛŒØª Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø§Ù… Ù…Ø¯Ù„â€ŒÙ‡Ø§</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Organization Model -->
        <div id="organization" class="model-section">
            <div class="model-header">
                <h2>ğŸ¢ Organization - Ø³Ø§Ø²Ù…Ø§Ù†</h2>
                <span class="badge">Core Model</span>
            </div>
            <div class="model-content">
                <p>Ù…Ø¯Ù„ Ø§ØµÙ„ÛŒ Ø³Ø§Ø²Ù…Ø§Ù† Ú©Ù‡ ØªÙ…Ø§Ù… Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ ÛŒÚ© Ø³Ø§Ø²Ù…Ø§Ù† Ø±Ø§ Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>

                <div class="code-block">
class Organization(BaseModel):
    """Ø³Ø§Ø²Ù…Ø§Ù† Ø§ØµÙ„ÛŒ"""
    name = models.CharField(max_length=255)
    code = models.CharField(max_length=50, unique=True)
    domain_type = models.CharField(max_length=50)  # municipality, company, hospital
    settings = models.JSONField(default=dict)
    logo = models.ImageField(upload_to='organizations/logos/', null=True, blank=True)
    
    # Geographic bounds
    boundary = models.PolygonField(null=True, blank=True)
    center_point = models.PointField(null=True, blank=True)
                </div>

                <div class="field-grid">
                    <div class="field-item">
                        <div class="field-name">name</div>
                        <div class="field-type">CharField(255)</div>
                        <div class="field-description">Ù†Ø§Ù… Ø³Ø§Ø²Ù…Ø§Ù† (Ù…Ø«Ù„ "Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ ØªÙ‡Ø±Ø§Ù†")</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">code</div>
                        <div class="field-type">CharField(50) - Unique</div>
                        <div class="field-description">Ú©Ø¯ ÛŒÚ©ØªØ§ÛŒ Ø³Ø§Ø²Ù…Ø§Ù† (Ù…Ø«Ù„ "THR_MUN_001")</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">domain_type</div>
                        <div class="field-type">CharField(50)</div>
                        <div class="field-description">Ù†ÙˆØ¹ Ø­ÙˆØ²Ù‡ Ú©Ø§Ø±ÛŒ (municipality, company, hospital)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">settings</div>
                        <div class="field-type">JSONField</div>
                        <div class="field-description">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³Ø§Ø²Ù…Ø§Ù† (Ø³Ø§Ø¹Ø§Øª Ú©Ø§Ø±ÛŒØŒ Ø²Ø¨Ø§Ù†ØŒ Ø§Ø±Ø² Ùˆ...)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">boundary</div>
                        <div class="field-type">PolygonField</div>
                        <div class="field-description">Ù…Ø±Ø² Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø³Ø§Ø²Ù…Ø§Ù†</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">center_point</div>
                        <div class="field-type">PointField</div>
                        <div class="field-description">Ù†Ù‚Ø·Ù‡ Ù…Ø±Ú©Ø²ÛŒ Ø³Ø§Ø²Ù…Ø§Ù†</div>
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ“ Ù…Ø«Ø§Ù„ Ø¹Ù…Ù„ÛŒ: Ø§ÛŒØ¬Ø§Ø¯ Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ ØªÙ‡Ø±Ø§Ù†</div>
                    <div class="code-block">
tehran_municipality = Organization.objects.create(
    name="Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ ØªÙ‡Ø±Ø§Ù†",
    code="THR_MUN_2024",
    domain_type="municipality",
    settings={
        "working_hours": {
            "saturday_to_wednesday": "08:00-16:00",
            "thursday": "08:00-13:00"
        },
        "timezone": "Asia/Tehran",
        "language": "fa",
        "currency": "IRR"
    },
    boundary=Polygon([...]),  # Ù…Ø®ØªØµØ§Øª Ù…Ø±Ø² ØªÙ‡Ø±Ø§Ù†
    center_point=Point(51.4, 35.7)  # Ù…ÛŒØ¯Ø§Ù† Ø¢Ø²Ø§Ø¯ÛŒ
)
                    </div>
                </div>
            </div>
        </div>

        <!-- User Model -->
        <div id="user" class="model-section">
            <div class="model-header">
                <h2>ğŸ‘¤ User - Ú©Ø§Ø±Ø¨Ø± Ø³ÛŒØ³ØªÙ…</h2>
                <span class="badge">Authentication</span>
            </div>
            <div class="model-content">
                <p>Ù…Ø¯Ù„ Ú©Ø§Ø±Ø¨Ø± Ú©Ù‡ Ø§Ø² AbstractUser Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ùˆ Ø§Ù…Ù†ÛŒØª Ø¯Ø§Ø±Ø¯.</p>

                <div class="code-block">
class User(AbstractUser):
    """Ú©Ø§Ø±Ø¨Ø± Ø³ÛŒØ³ØªÙ…"""
    id = models.UUIDField(primary_key=True, default=uuid.uuid4, editable=False)
    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)
    employee_code = models.CharField(max_length=50, null=True, blank=True)
    phone = models.CharField(max_length=15, null=True, blank=True)
    national_id = models.CharField(max_length=20, null=True, blank=True)
    
    # Location tracking
    last_known_location = models.PointField(null=True, blank=True)
    location_updated_at = models.DateTimeField(null=True, blank=True)
    
    # Security
    failed_login_attempts = models.IntegerField(default=0)
    locked_until = models.DateTimeField(null=True, blank=True)
    force_password_change = models.BooleanField(default=False)
                </div>

                <div class="field-grid">
                    <div class="field-item">
                        <div class="field-name">organization</div>
                        <div class="field-type">ForeignKey</div>
                        <div class="field-description">Ø³Ø§Ø²Ù…Ø§Ù† Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">employee_code</div>
                        <div class="field-type">CharField(50)</div>
                        <div class="field-description">Ú©Ø¯ Ù¾Ø±Ø³Ù†Ù„ÛŒ Ú©Ø§Ø±Ø¨Ø±</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">last_known_location</div>
                        <div class="field-type">PointField</div>
                        <div class="field-description">Ø¢Ø®Ø±ÛŒÙ† Ù…ÙˆÙ‚Ø¹ÛŒØª Ø´Ù†Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø±</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">failed_login_attempts</div>
                        <div class="field-type">IntegerField</div>
                        <div class="field-description">ØªØ¹Ø¯Ø§Ø¯ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚ ÙˆØ±ÙˆØ¯</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">locked_until</div>
                        <div class="field-type">DateTimeField</div>
                        <div class="field-description">Ø²Ù…Ø§Ù† Ù‚ÙÙ„ Ø´Ø¯Ù† Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">force_password_change</div>
                        <div class="field-type">BooleanField</div>
                        <div class="field-description">Ø§Ø¬Ø¨Ø§Ø± ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±</div>
                    </div>
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ Ù†Ú©Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ:</strong>
                    <ul>
                        <li>Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</li>
                        <li>Ù‚ÙÙ„ Ø®ÙˆØ¯Ú©Ø§Ø± Ø­Ø³Ø§Ø¨ Ù¾Ø³ Ø§Ø² ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚</li>
                        <li>Ø§Ø¬Ø¨Ø§Ø± ØªØºÛŒÛŒØ± Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø¯Ø± ÙˆØ±ÙˆØ¯ Ø§ÙˆÙ„</li>
                        <li>Ù†Ú¯Ù‡Ø¯Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³ Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Role Model -->
        <div id="role" class="model-section">
            <div class="model-header">
                <h2>ğŸ­ Role - Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ÛŒ</h2>
                <span class="badge">Authorization</span>
            </div>
            <div class="model-content">
                <p>Ù…Ø¯Ù„ Ù†Ù‚Ø´ Ú©Ù‡ Ø³Ø§Ø®ØªØ§Ø± Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ÛŒ Ø³Ø§Ø²Ù…Ø§Ù† Ø±Ø§ ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ùˆ Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø±Ø§ Ø´Ø§Ù…Ù„ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>

                <div class="code-block">
class Role(BaseModel):
    """Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ÛŒ"""
    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)
    name = models.CharField(max_length=100)
    code = models.CharField(max_length=50)
    hierarchy_level = models.IntegerField()  # 1=highest
    parent_role = models.ForeignKey('self', on_delete=models.CASCADE, null=True, blank=True)
    group = models.ForeignKey('RoleGroup', on_delete=models.CASCADE)
    permissions = models.JSONField(default=dict)
                </div>

                <div class="field-grid">
                    <div class="field-item">
                        <div class="field-name">name</div>
                        <div class="field-type">CharField(100)</div>
                        <div class="field-description">Ù†Ø§Ù… Ù†Ù‚Ø´ (Ù…Ø«Ù„ "Ø´Ù‡Ø±Ø¯Ø§Ø± Ù…Ù†Ø·Ù‚Ù‡ 1")</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">hierarchy_level</div>
                        <div class="field-type">IntegerField</div>
                        <div class="field-description">Ø³Ø·Ø­ Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ (1 = Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ†)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">parent_role</div>
                        <div class="field-type">ForeignKey(self)</div>
                        <div class="field-description">Ù†Ù‚Ø´ ÙˆØ§Ù„Ø¯ Ø¯Ø± Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">permissions</div>
                        <div class="field-type">JSONField</div>
                        <div class="field-description">Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ø§Ø®ØªØµØ§ØµÛŒ Ù†Ù‚Ø´</div>
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ“Š Ù…Ø«Ø§Ù„ Ø³Ø§Ø®ØªØ§Ø± Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ÛŒ Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ</div>
                    <div class="relationship-diagram">
                        <div class="relationship-item">Ø´Ù‡Ø±Ø¯Ø§Ø± (Ø³Ø·Ø­ 1)</div>
                        <div class="arrow">â†“</div>
                        <div class="relationship-item">Ù…Ø¹Ø§ÙˆÙ† Ø´Ù‡Ø±Ø¯Ø§Ø± (Ø³Ø·Ø­ 2)</div>
                        <div class="arrow">â†“</div>
                        <div class="relationship-item">Ù…Ø¯ÛŒØ± Ù…Ù†Ø·Ù‚Ù‡ (Ø³Ø·Ø­ 3)</div>
                        <div class="arrow">â†“</div>
                        <div class="relationship-item">Ø±Ø¦ÛŒØ³ Ø§Ø¯Ø§Ø±Ù‡ (Ø³Ø·Ø­ 4)</div>
                        <div class="arrow">â†“</div>
                        <div class="relationship-item">Ú©Ø§Ø±Ø´Ù†Ø§Ø³ (Ø³Ø·Ø­ 5)</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- RoleGroup Model -->
        <div id="rolegroup" class="model-section">
            <div class="model-header">
                <h2>ğŸ‘¥ RoleGroup - Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ù†Ù‚Ø´</h2>
                <span class="badge">Organization</span>
            </div>
            <div class="model-content">
                <p>Ú¯Ø±ÙˆÙ‡â€ŒØ¨Ù†Ø¯ÛŒ Ù†Ù‚Ø´â€ŒÙ‡Ø§ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø­ÙˆØ²Ù‡ Ú©Ø§Ø±ÛŒ Ùˆ ØªØ¹Ø±ÛŒÙ Ù‚ÙˆØ§Ù†ÛŒÙ† Ù…Ø´ØªØ±Ú© Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ú¯Ø±ÙˆÙ‡.</p>

                <div class="code-block">
class RoleGroup(BaseModel):
    """Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ù†Ù‚Ø´"""
    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)
    name = models.CharField(max_length=100)
    code = models.CharField(max_length=50)
    rules = models.JSONField(default=dict)
    access_policies = models.JSONField(default=dict)
                </div>

                <div class="field-grid">
                    <div class="field-item">
                        <div class="field-name">name</div>
                        <div class="field-type">CharField(100)</div>
                        <div class="field-description">Ù†Ø§Ù… Ú¯Ø±ÙˆÙ‡ (Ù…Ø«Ù„ "Ú¯Ø±ÙˆÙ‡ Ù…Ø¯ÛŒØ±ÛŒØª")</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">rules</div>
                        <div class="field-type">JSONField</div>
                        <div class="field-description">Ù‚ÙˆØ§Ù†ÛŒÙ† Ùˆ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ú¯Ø±ÙˆÙ‡</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">access_policies</div>
                        <div class="field-type">JSONField</div>
                        <div class="field-description">Ø³ÛŒØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø´ØªØ±Ú© Ú¯Ø±ÙˆÙ‡</div>
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ“ Ù…Ø«Ø§Ù„ Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ù†Ù‚Ø´ Ø¯Ø± Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ</div>
                    <div class="code-block">
# Ú¯Ø±ÙˆÙ‡ Ù…Ø¯ÛŒØ±ÛŒØª
management_group = RoleGroup.objects.create(
    name="Ú¯Ø±ÙˆÙ‡ Ù…Ø¯ÛŒØ±ÛŒØª",
    code="MANAGEMENT",
    rules={
        "can_approve_budget": True,
        "max_approval_amount": 5000000000,
        "can_access_financial_reports": True,
        "working_hours_flexibility": True
    },
    access_policies={
        "require_2fa": True,
        "session_timeout_minutes": 480,
        "ip_restrictions": ["192.168.1.0/24"]
    }
)

# Ú¯Ø±ÙˆÙ‡ ÙÙ†ÛŒ
technical_group = RoleGroup.objects.create(
    name="Ú¯Ø±ÙˆÙ‡ ÙÙ†ÛŒ Ùˆ Ù…Ù‡Ù†Ø¯Ø³ÛŒ",
    code="TECHNICAL",
    rules={
        "can_access_gis_system": True,
        "can_modify_maps": True,
        "can_approve_construction_permits": True
    },
    access_policies={
        "require_vpn": True,
        "allowed_file_types": [".dwg", ".pdf", ".shp"],
        "backup_required": True
    }
)
                    </div>
                </div>
            </div>
        </div>

        <!-- UserRole Model -->
        <div id="userrole" class="model-section">
            <div class="model-header">
                <h2>ğŸ”— UserRole - Ø§Ø®ØªØµØ§Øµ Ù†Ù‚Ø´ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±</h2>
                <span class="badge">Assignment</span>
            </div>
            <div class="model-content">
                <p>Ù…Ø¯Ù„ ÙˆØ§Ø³Ø· Ú©Ù‡ Ù†Ù‚Ø´â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø§Ø®ØªØµØ§Øµ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯ Ùˆ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ùˆ Ù…Ú©Ø§Ù†ÛŒ ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p>

                <div class="code-block">
class UserRole(BaseModel):
    """Ø§Ø®ØªØµØ§Øµ Ù†Ù‚Ø´ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±"""
    user = models.ForeignKey(User, on_delete=models.CASCADE, related_name='user_roles')
    role = models.ForeignKey(Role, on_delete=models.CASCADE)
    geographic_zones = models.ManyToManyField('GeographicZone', blank=True)
    
    # Time restrictions
    valid_from = models.DateTimeField()
    valid_until = models.DateTimeField(null=True, blank=True)
    
    # Additional conditions
    conditions = models.JSONField(default=dict)
    
    class Meta:
        unique_together = ['user', 'role', 'valid_from']
                </div>

                <div class="field-grid">
                    <div class="field-item">
                        <div class="field-name">user</div>
                        <div class="field-type">ForeignKey(User)</div>
                        <div class="field-description">Ú©Ø§Ø±Ø¨Ø± Ø¯Ø±ÛŒØ§ÙØªâ€ŒÚ©Ù†Ù†Ø¯Ù‡ Ù†Ù‚Ø´</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">role</div>
                        <div class="field-type">ForeignKey(Role)</div>
                        <div class="field-description">Ù†Ù‚Ø´ Ø§Ø®ØªØµØ§Øµâ€ŒÛŒØ§ÙØªÙ‡</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">geographic_zones</div>
                        <div class="field-type">ManyToManyField</div>
                        <div class="field-description">Ù…Ø­Ø¯ÙˆØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ù…Ø¬Ø§Ø²</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">valid_from</div>
                        <div class="field-type">DateTimeField</div>
                        <div class="field-description">Ø´Ø±ÙˆØ¹ Ø§Ø¹ØªØ¨Ø§Ø± Ù†Ù‚Ø´</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">valid_until</div>
                        <div class="field-type">DateTimeField</div>
                        <div class="field-description">Ù¾Ø§ÛŒØ§Ù† Ø§Ø¹ØªØ¨Ø§Ø± Ù†Ù‚Ø´ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">conditions</div>
                        <div class="field-type">JSONField</div>
                        <div class="field-description">Ø´Ø±Ø§ÛŒØ· Ø§Ø¶Ø§ÙÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ</div>
                    </div>
                </div>

                <div class="info-box">
                    <strong>ğŸ”„ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ:</strong>
                    <ul>
                        <li>Ø§Ù…Ú©Ø§Ù† Ø§Ø®ØªØµØ§Øµ Ú†Ù†Ø¯ÛŒÙ† Ù†Ù‚Ø´ Ø¨Ù‡ ÛŒÚ© Ú©Ø§Ø±Ø¨Ø±</li>
                        <li>ØªØ¹Ø±ÛŒÙ Ø¨Ø§Ø²Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ø§Ø¹ØªØ¨Ø§Ø± Ù†Ù‚Ø´</li>
                        <li>Ù…Ø­Ø¯ÙˆØ¯ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø§Ø®ØªØµØ§Øµ</li>
                        <li>Ø´Ø±Ø§ÛŒØ· Ø®Ø§Øµ Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù†Ù‚Ø´</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- GeographicZone Model -->
        <div id="geographiczone" class="model-section">
            <div class="model-header">
                <h2>ğŸ—ºï¸ GeographicZone - Ù…Ø­Ø¯ÙˆØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</h2>
                <span class="badge">GIS</span>
            </div>
            <div class="model-content">
                <p>ØªØ¹Ø±ÛŒÙ Ù…Ø­Ø¯ÙˆØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª.</p>

                <div class="code-block">
class GeographicZone(BaseModel):
    """Ù…Ø­Ø¯ÙˆØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ"""
    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)
    name = models.CharField(max_length=200)
    zone_type = models.CharField(max_length=20)  # polygon, circle, point
    parent_zone = models.ForeignKey('self', on_delete=models.CASCADE, null=True, blank=True)
    
    # Geographic data
    polygon = models.PolygonField(null=True, blank=True)
    center_point = models.PointField(null=True, blank=True)
    radius = models.FloatField(null=True, blank=True)  # meters
    
    # Additional properties
    properties = models.JSONField(default=dict)
    
    class Meta:
        unique_together = ['organization', 'name']
                </div>

                <div class="field-grid">
                    <div class="field-item">
                        <div class="field-name">zone_type</div>
                        <div class="field-type">CharField(20)</div>
                        <div class="field-description">Ù†ÙˆØ¹ Ù…Ø­Ø¯ÙˆØ¯Ù‡: polygon, circle, point</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">parent_zone</div>
                        <div class="field-type">ForeignKey(self)</div>
                        <div class="field-description">Ù…Ø­Ø¯ÙˆØ¯Ù‡ ÙˆØ§Ù„Ø¯ (Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø±Ø®ØªÛŒ)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">polygon</div>
                        <div class="field-type">PolygonField</div>
                        <div class="field-description">Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒ (Ø¨Ø±Ø§ÛŒ Ù…Ù†Ø§Ø·Ù‚ Ù¾ÛŒÚ†ÛŒØ¯Ù‡)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">center_point</div>
                        <div class="field-type">PointField</div>
                        <div class="field-description">Ù†Ù‚Ø·Ù‡ Ù…Ø±Ú©Ø²ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ù‡</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">radius</div>
                        <div class="field-type">FloatField</div>
                        <div class="field-description">Ø´Ø¹Ø§Ø¹ Ù…Ø­Ø¯ÙˆØ¯Ù‡ (Ø¨Ø±Ø§ÛŒ Ù†ÙˆØ¹ circle)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">properties</div>
                        <div class="field-type">JSONField</div>
                        <div class="field-description">ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ Ù…Ø­Ø¯ÙˆØ¯Ù‡</div>
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ™ï¸ Ù…Ø«Ø§Ù„ Ù…Ø­Ø¯ÙˆØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ù‡Ø±ÛŒ</div>
                    <div class="code-block">
# Ù…Ù†Ø·Ù‚Ù‡ 1 ØªÙ‡Ø±Ø§Ù† (Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒ)
region_1 = GeographicZone.objects.create(
    organization=tehran_municipality,
    name="Ù…Ù†Ø·Ù‚Ù‡ 1 ØªÙ‡Ø±Ø§Ù†",
    zone_type="polygon",
    polygon=Polygon([...]),  # Ù…Ø®ØªØµØ§Øª Ù…Ø±Ø² Ù…Ù†Ø·Ù‚Ù‡
    properties={
        "population": 280000,
        "area_km2": 47.8,
        "districts": ["ÙˆÙ„Ù†Ø¬Ú©", "Ø§Ù„Ù‡ÛŒÙ‡", "Ú©Ø§Ù…Ø±Ø§Ù†ÛŒÙ‡"],
        "economic_status": "high"
    }
)

# Ø³Ø§Ø®ØªÙ…Ø§Ù† Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ (Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¯Ø§ÛŒØ±Ù‡â€ŒØ§ÛŒ)
municipality_building = GeographicZone.objects.create(
    organization=tehran_municipality,
    name="Ø³Ø§Ø®ØªÙ…Ø§Ù† Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ Ù…Ù†Ø·Ù‚Ù‡ 1",
    zone_type="circle",
    center_point=Point(51.42, 35.80),
    radius=50.0,  # 50 Ù…ØªØ±
    parent_zone=region_1,
    properties={
        "address": "Ø®ÛŒØ§Ø¨Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±",
        "floors": 8,
        "departments": ["Ù…Ø§Ù„ÛŒ", "ÙÙ†ÛŒ", "Ø®Ø¯Ù…Ø§Øª Ø´Ù‡Ø±ÛŒ"]
    }
)
                    </div>
                </div>
            </div>
        </div>

        <!-- FieldPermission Model -->
        <div id="fieldpermission" class="model-section">
            <div class="model-header">
                <h2>ğŸ” FieldPermission - Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ø³Ø·Ø­ ÙÛŒÙ„Ø¯</h2>
                <span class="badge">Fine-grained Control</span>
            </div>
            <div class="model-content">
                <p>Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Øµ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Ù…Ø§Ø³Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ùˆ Ø´Ø±Ø§ÛŒØ· Ù¾ÛŒÚ†ÛŒØ¯Ù‡.</p>

                <div class="code-block">
class FieldPermission(BaseModel):
    """Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ø³Ø·Ø­ ÙÛŒÙ„Ø¯"""
    role = models.ForeignKey(Role, on_delete=models.CASCADE)
    resource_type = models.CharField(max_length=100)  # Model name
    field_name = models.CharField(max_length=100)
    geographic_zones = models.ManyToManyField(GeographicZone, blank=True)
    
    # CRUD permissions
    can_read = models.BooleanField(default=False)
    can_update = models.BooleanField(default=False)
    can_create = models.BooleanField(default=False)
    can_delete = models.BooleanField(default=False)
    can_view_history = models.BooleanField(default=False)
    can_export = models.BooleanField(default=False)
    
    # Data masking
    masking_rule = models.CharField(max_length=50, null=True, blank=True)
    masking_pattern = models.CharField(max_length=100, null=True, blank=True)
    
    # Conditions and restrictions
    conditions = models.JSONField(default=dict)
    time_restrictions = models.JSONField(default=dict)
    
    class Meta:
        unique_together = ['role', 'resource_type', 'field_name']
                </div>

                <div class="field-grid">
                    <div class="field-item">
                        <div class="field-name">resource_type</div>
                        <div class="field-type">CharField(100)</div>
                        <div class="field-description">Ù†Ø§Ù… Ù…Ø¯Ù„ (Ù…Ø«Ù„ "CitizenProfile")</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">field_name</div>
                        <div class="field-type">CharField(100)</div>
                        <div class="field-description">Ù†Ø§Ù… ÙÛŒÙ„Ø¯ (Ù…Ø«Ù„ "national_id")</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">masking_rule</div>
                        <div class="field-type">CharField(50)</div>
                        <div class="field-description">Ù†ÙˆØ¹ Ù…Ø§Ø³Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ (partial, full, none)</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">masking_pattern</div>
                        <div class="field-type">CharField(100)</div>
                        <div class="field-description">Ø§Ù„Ú¯ÙˆÛŒ Ù…Ø§Ø³Ú© (Ù…Ø«Ù„ "***-***-{last_3}")</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">conditions</div>
                        <div class="field-type">JSONField</div>
                        <div class="field-description">Ø´Ø±Ø§ÛŒØ· Ø§Ø¶Ø§ÙÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ</div>
                    </div>
                    <div class="field-item">
                        <div class="field-name">time_restrictions</div>
                        <div class="field-type">JSONField</div>
                        <div class="field-description">Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ</div>
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ­ Ù…Ø«Ø§Ù„ Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù</div>
                    <div class="code-block">
# Ø´Ù‡Ø±Ø¯Ø§Ø± - Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ù‡ Ú©Ø¯ Ù…Ù„ÛŒ
mayor_national_id_permission = FieldPermission.objects.create(
    role=mayor_role,
    resource_type="CitizenProfile",
    field_name="national_id",
    can_read=True,
    can_update=False,
    can_view_history=True,
    masking_rule=None,  # Ø¨Ø¯ÙˆÙ† Ù…Ø§Ø³Ú©
    conditions={
        "purpose_required": True,
        "audit_log": True
    }
)

# Ú©Ø§Ø±Ø´Ù†Ø§Ø³ GIS - Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø­Ø¯ÙˆØ¯ Ø¨Ø§ Ù…Ø§Ø³Ú©
gis_national_id_permission = FieldPermission.objects.create(
    role=gis_expert_role,
    resource_type="CitizenProfile", 
    field_name="national_id",
    can_read=True,
    can_update=False,
    masking_rule="partial",
    masking_pattern="***-***-{last_3}",
    conditions={
        "working_hours_only": True,
        "own_district_only": True
    },
    time_restrictions={
        "allowed_hours": "08:00-16:00",
        "allowed_days": ["saturday", "sunday", "monday", "tuesday", "wednesday"]
    }
)
                    </div>
                </div>
            </div>
        </div>

        <!-- Relationships -->
        <div id="relationships" class="model-section">
            <div class="model-header">
                <h2>ğŸ”„ Ø±ÙˆØ§Ø¨Ø· Ø¨ÛŒÙ† Ù…Ø¯Ù„â€ŒÙ‡Ø§</h2>
                <span class="badge">Data Architecture</span>
            </div>
            <div class="model-content">
                <p>Ù†Ù…ÙˆØ¯Ø§Ø± Ø±ÙˆØ§Ø¨Ø· Ùˆ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙ† Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø³ÛŒØ³ØªÙ….</p>

                <div class="relationship-diagram">
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; align-items: center;">
                        <div class="relationship-item">Organization</div>
                        <div class="arrow">â†’</div>
                        <div class="relationship-item">User</div>
                        
                        <div class="relationship-item">Organization</div>
                        <div class="arrow">â†’</div>
                        <div class="relationship-item">RoleGroup</div>
                        
                        <div class="relationship-item">RoleGroup</div>
                        <div class="arrow">â†’</div>
                        <div class="relationship-item">Role</div>
                        
                        <div class="relationship-item">User + Role</div>
                        <div class="arrow">â†’</div>
                        <div class="relationship-item">UserRole</div>
                        
                        <div class="relationship-item">Organization</div>
                        <div class="arrow">â†’</div>
                        <div class="relationship-item">GeographicZone</div>
                        
                        <div class="relationship-item">Role</div>
                        <div class="arrow">â†’</div>
                        <div class="relationship-item">FieldPermission</div>
                    </div>
                </div>

                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ¢</div>
                        <h4>Organization</h4>
                        <p>Ù…Ø±Ú©Ø² Ø³ÛŒØ³ØªÙ… - Ù‡Ù…Ù‡ Ú†ÛŒØ² Ø¨Ù‡ Ø¢Ù† ÙˆØ§Ø¨Ø³ØªÙ‡ Ø§Ø³Øª</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ‘¤</div>
                        <h4>User</h4>
                        <p>Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ø³Ø§Ø²Ù…Ø§Ù†</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ­</div>
                        <h4>Role</h4>
                        <p>Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ÛŒ</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ—ºï¸</div>
                        <h4>GeographicZone</h4>
                        <p>Ù…Ø­Ø¯ÙˆØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</p>
                    </div>
                </div>

                <div class="info-box">
                    <strong>ğŸ”— Ù†Ú©Ø§Øª Ù…Ù‡Ù… Ø±ÙˆØ§Ø¨Ø·:</strong>
                    <ul>
                        <li><span class="highlight">Organization</span> Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† Ù…Ø±Ú©Ø² Ø³ÛŒØ³ØªÙ…ØŒ ØªÙ…Ø§Ù… Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ø¨Ù‡ Ø¢Ù† ÙˆØ§Ø¨Ø³ØªÙ‡â€ŒØ§Ù†Ø¯</li>
                        <li><span class="highlight">UserRole</span> Ø±Ø§Ø¨Ø·Ù‡ Many-to-Many Ø¨ÛŒÙ† User Ùˆ Role Ø±Ø§ Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†Ø¯</li>
                        <li><span class="highlight">Role</span> Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù†Ù‚Ø´ ÙˆØ§Ù„Ø¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ (Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø±Ø®ØªÛŒ)</li>
                        <li><span class="highlight">GeographicZone</span> Ù†ÛŒØ² Ø³Ø§Ø®ØªØ§Ø± Ø¯Ø±Ø®ØªÛŒ Ø¯Ø§Ø±Ø¯ (Ù…Ù†Ø·Ù‚Ù‡ â†’ Ù…Ø­Ù„Ù‡ â†’ Ø³Ø§Ø®ØªÙ…Ø§Ù†)</li>
                        <li><span class="highlight">FieldPermission</span> Ú©Ù†ØªØ±Ù„ Ø¯Ù‚ÛŒÙ‚ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù…Ø¯Ù„â€ŒÙ‡Ø§ Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Practical Scenarios -->
        <div id="scenarios" class="model-section">
            <div class="model-header">
                <h2>ğŸ¯ Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ</h2>
                <span class="badge">Real-world Examples</span>
            </div>
            <div class="model-content">
                <p>Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒ Ø§Ø² Ù†Ø­ÙˆÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¯Ø± Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù.</p>

                <div class="example-section">
                    <div class="example-title">ğŸ›ï¸ Ø³Ù†Ø§Ø±ÛŒÙˆ 1: ÙˆØ±ÙˆØ¯ Ú©Ø§Ø±Ø´Ù†Ø§Ø³ GIS Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…</div>
                    <div class="code-block">
def authenticate_user_with_location(username, password, location_lat, location_lng):
    """Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ"""
    
    # Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø§ÙˆÙ„ÛŒÙ‡
    user = authenticate(username=username, password=password)
    if not user:
        return {"success": False, "error": "Ù†Ø§Ù… Ú©Ø§Ø±Ø¨Ø±ÛŒ ÛŒØ§ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡"}
    
    # Ø¨Ø±Ø±Ø³ÛŒ Ù‚ÙÙ„ Ø¨ÙˆØ¯Ù† Ø­Ø³Ø§Ø¨
    if user.locked_until and user.locked_until > timezone.now():
        return {"success": False, "error": "Ø­Ø³Ø§Ø¨ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù‚ÙÙ„ Ø§Ø³Øª"}
    
    # Ø¨Ø±Ø±Ø³ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ
    current_location = Point(location_lng, location_lat)
    
    # ÛŒØ§ÙØªÙ† Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø§Ø±Ø¨Ø±
    active_roles = UserRole.objects.filter(
        user=user,
        valid_from__lte=timezone.now(),
        valid_until__gte=timezone.now()
    )
    
    allowed_zones = []
    for role_assignment in active_roles:
        allowed_zones.extend(role_assignment.geographic_zones.all())
    
    # Ø¨Ø±Ø±Ø³ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ù…Ø¬Ø§Ø² Ø§Ø³Øª
    in_allowed_zone = False
    current_zone = None
    
    for zone in allowed_zones:
        if zone.zone_type == 'polygon' and zone.polygon:
            if zone.polygon.contains(current_location):
                in_allowed_zone = True
                current_zone = zone
                break
        elif zone.zone_type == 'circle':
            distance = zone.center_point.distance(current_location) * 111000
            if distance <= zone.radius:
                in_allowed_zone = True
                current_zone = zone
                break
    
    if not in_allowed_zone:
        return {
            "success": False, 
            "error": "Ø´Ù…Ø§ Ø®Ø§Ø±Ø¬ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ù…Ø¬Ø§Ø² Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±ÛŒØ¯",
            "allowed_zones": [z.name for z in allowed_zones]
        }
    
    # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø±
    user.last_known_location = current_location
    user.location_updated_at = timezone.now()
    user.failed_login_attempts = 0
    user.save()
    
    return {
        "success": True,
        "user": user.get_full_name(),
        "current_zone": current_zone.name,
        "permissions": get_user_permissions(user)
    }
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ” Ø³Ù†Ø§Ø±ÛŒÙˆ 2: Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ÙÛŒÙ„Ø¯ Ø®Ø§Øµ</div>
                    <div class="code-block">
def check_field_access(user, resource_type, field_name, action="read"):
    """Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ ÙÛŒÙ„Ø¯ Ø®Ø§Øµ Ø¨Ø§ Ø§Ø¹Ù…Ø§Ù„ Ù…Ø§Ø³Ú©"""
    
    # ÛŒØ§ÙØªÙ† Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„
    active_roles = UserRole.objects.filter(
        user=user,
        valid_from__lte=timezone.now(),
        valid_until__gte=timezone.now()
    ).select_related('role')
    
    for role_assignment in active_roles:
        # Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ ÙÛŒÙ„Ø¯
        field_permissions = FieldPermission.objects.filter(
            role=role_assignment.role,
            resource_type=resource_type,
            field_name=field_name
        )
        
        for permission in field_permissions:
            # Ø¨Ø±Ø±Ø³ÛŒ Ù†ÙˆØ¹ Ø¹Ù…Ù„ÛŒØ§Øª
            has_permission = getattr(permission, f'can_{action}', False)
            
            if has_permission:
                # Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ
                if not check_time_restrictions(permission.time_restrictions):
                    continue
                
                # Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ
                if not check_geographic_restrictions(user, permission):
                    continue
                
                # Ø§Ø¹Ù…Ø§Ù„ Ù…Ø§Ø³Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ
                masking_info = None
                if permission.masking_rule:
                    masking_info = {
                        "rule": permission.masking_rule,
                        "pattern": permission.masking_pattern
                    }
                
                return {
                    "allowed": True,
                    "masking": masking_info,
                    "conditions": permission.conditions,
                    "role": role_assignment.role.name
                }
    
    return {"allowed": False, "reason": "Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¬Ø§Ø² Ù†ÛŒØ³Øª"}

def apply_data_masking(value, masking_rule, masking_pattern):
    """Ø§Ø¹Ù…Ø§Ù„ Ù…Ø§Ø³Ú© Ø±ÙˆÛŒ Ø¯Ø§Ø¯Ù‡"""
    if not masking_rule or masking_rule == "none":
        return value
    
    if masking_rule == "full":
        return "*" * len(str(value))
    
    elif masking_rule == "partial" and masking_pattern:
        # Ù…Ø«Ø§Ù„: "***-***-{last_3}" Ø¨Ø±Ø§ÛŒ Ú©Ø¯ Ù…Ù„ÛŒ
        if "{last_3}" in masking_pattern:
            return masking_pattern.replace("{last_3}", str(value)[-3:])
        elif "{first_2}" in masking_pattern:
            return masking_pattern.replace("{first_2}", str(value)[:2])
    
    return value
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ“Š Ø³Ù†Ø§Ø±ÛŒÙˆ 3: Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ Ùˆ Ø¢Ù…Ø§Ø± Ø¯Ø³ØªØ±Ø³ÛŒ</div>
                    <div class="code-block">
def generate_access_audit_report(organization, date_from, date_to):
    """ØªÙˆÙ„ÛŒØ¯ Ú¯Ø²Ø§Ø±Ø´ Ø­Ø³Ø§Ø¨Ø±Ø³ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§"""
    
    report = {
        "organization": organization.name,
        "period": f"{date_from} ØªØ§ {date_to}",
        "generated_at": timezone.now(),
        "statistics": {},
        "security_alerts": [],
        "user_activities": []
    }
    
    # Ø¢Ù…Ø§Ø± Ú©Ù„ÛŒ
    total_users = User.objects.filter(organization=organization).count()
    active_users = User.objects.filter(
        organization=organization,
        last_login__gte=date_from
    ).count()
    
    # Ø¢Ù…Ø§Ø± Ù†Ù‚Ø´â€ŒÙ‡Ø§
    total_roles = Role.objects.filter(organization=organization).count()
    active_assignments = UserRole.objects.filter(
        user__organization=organization,
        valid_from__lte=date_to,
        valid_until__gte=date_from
    ).count()
    
    report["statistics"] = {
        "total_users": total_users,
        "active_users": active_users,
        "total_roles": total_roles,
        "active_assignments": active_assignments,
        "activity_rate": f"{(active_users/total_users)*100:.1f}%"
    }
    
    # Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ
    # Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø§ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚ Ø²ÛŒØ§Ø¯
    suspicious_users = User.objects.filter(
        organization=organization,
        failed_login_attempts__gte=3
    )
    
    for user in suspicious_users:
        report["security_alerts"].append({
            "type": "multiple_failed_logins",
            "user": user.username,
            "attempts": user.failed_login_attempts,
            "last_attempt": user.last_login
        })
    
    # Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯Ù‡
    out_of_zone_access = []  # Ø¨Ø§ÛŒØ¯ Ø§Ø² Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø´ÙˆØ¯
    
    # ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†
    recent_activities = UserRole.objects.filter(
        user__organization=organization,
        created_at__gte=date_from
    ).select_related('user', 'role')
    
    for activity in recent_activities:
        zones = [zone.name for zone in activity.geographic_zones.all()]
        report["user_activities"].append({
            "user": activity.user.get_full_name(),
            "role": activity.role.name,
            "assigned_at": activity.created_at,
            "valid_until": activity.valid_until,
            "zones": zones
        })
    
    return report
                    </div>
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù… Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ:</strong>
                    <ul>
                        <li>Ù‡Ù…ÛŒØ´Ù‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ Ù‚Ø¨Ù„ Ø§Ø² Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯</li>
                        <li>Ø§Ø² Ú©Ø´ Ø¨Ø±Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬ÙˆØ²Ù‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>ØªÙ…Ø§Ù… Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø­Ø³Ø§Ø¨Ø±Ø³ÛŒ Ù„Ø§Ú¯ Ú©Ù†ÛŒØ¯</li>
                        <li>Ù…Ø§Ø³Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø±Ø§ Ø¯Ø± Ø³Ù…Øª Ø³Ø±ÙˆØ± Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯</li>
                        <li>Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„ÛŒØ§Øªâ€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³ØŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¯Ùˆ Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ Ø§Ø¹Ù…Ø§Ù„ Ú©Ù†ÛŒØ¯</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Summary -->
        <div id="summary" class="summary-section">
            <h2>ğŸ“‹ Ø®Ù„Ø§ØµÙ‡ Ùˆ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ</h2>
            <p>Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ú©Ù‡ Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ø§Ø¯ÛŒÙ…ØŒ ÛŒÚ© Ø±Ø§Ù‡â€ŒØ­Ù„ Ø¬Ø§Ù…Ø¹ Ùˆ Ù‚Ø§Ø¨Ù„ ØªØ·Ø¨ÛŒÙ‚ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø§Ø³Øª.</p>
            
            <div class="summary-grid">
                <div class="summary-item">
                    <span class="summary-number">7</span>
                    <div>Ù…Ø¯Ù„ Ø§ØµÙ„ÛŒ</div>
                </div>
                <div class="summary-item">
                    <span class="summary-number">âˆ</span>
                    <div>Ù‚Ø§Ø¨Ù„ÛŒØª ØªØ·Ø¨ÛŒÙ‚</div>
                </div>
                <div class="summary-item">
                    <span class="summary-number">ğŸ”’</span>
                    <div>Ø§Ù…Ù†ÛŒØª Ú†Ù†Ø¯Ù„Ø§ÛŒÙ‡</div>
                </div>
                <div class="summary-item">
                    <span class="summary-number">ğŸ“</span>
                    <div>Ú©Ù†ØªØ±Ù„ Ù…Ú©Ø§Ù†ÛŒ</div>
                </div>
            </div>

            <div style="margin-top: 30px; text-align: left;">
                <h3>ğŸ¯ Ù…Ø²Ø§ÛŒØ§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ø³ÛŒØ³ØªÙ…:</h3>
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸš€</div>
                        <h4>Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø§Ù„Ø§</h4>
                        <p>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² UUID Ùˆ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ´Ø¯Ù‡</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”§</div>
                        <h4>Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ…</h4>
                        <p>Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ Ø§Ù†ÙˆØ§Ø¹ Ù…Ø®ØªÙ„Ù Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ›¡ï¸</div>
                        <h4>Ø§Ù…Ù†ÛŒØª Ù¾ÛŒØ´Ø±ÙØªÙ‡</h4>
                        <p>Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ú†Ù†Ø¯Ø¨Ø¹Ø¯ÛŒ</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ“Š</div>
                        <h4>Ù‚Ø§Ø¨Ù„ Ù†Ø¸Ø§Ø±Øª</h4>
                        <p>Ø±Ø¯ÛŒØ§Ø¨ÛŒ Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ø§Ù…Ù„</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Implementation Guide -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸ› ï¸ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ</h2>
                <span class="badge">Implementation</span>
            </div>
            <div class="model-content">
                <h3>Ù…Ø±Ø§Ø­Ù„ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ:</h3>
                
                <div class="example-section">
                    <div class="example-title">ğŸ“¦ Ù†ØµØ¨ Ùˆ ØªÙ†Ø¸ÛŒÙ… Ø§ÙˆÙ„ÛŒÙ‡</div>
                    <div class="code-block">
# requirements.txt
Django==4.2.7
djangorestframework==3.14.0
django-cors-headers==4.3.1
psycopg2-binary==2.9.9
django-extensions==3.2.3
celery==5.3.4
redis==5.0.1
pillow==10.1.0

# GIS requirements
GDAL==3.7.3
GEOS==3.7.3
PROJ==6.3.2

# settings.py
DATABASES = {
    'default': {
        'ENGINE': 'django.contrib.gis.db.backends.postgis',
        'NAME': 'location_auth_system',
        'USER': 'postgres',
        'PASSWORD': 'your_password',
        'HOST': 'localhost',
        'PORT': '5432',
    }
}

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.gis',
    'rest_framework',
    'corsheaders',
    'your_app_name',
]
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ—ƒï¸ Ø§ÛŒØ¬Ø§Ø¯ Migration Ù‡Ø§</div>
                    <div class="code-block">
# Ù…Ø±Ø­Ù„Ù‡ 1: Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
python manage.py makemigrations
python manage.py migrate

# Ù…Ø±Ø­Ù„Ù‡ 2: Ø§ÛŒØ¬Ø§Ø¯ superuser
python manage.py createsuperuser

# Ù…Ø±Ø­Ù„Ù‡ 3: Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
python manage.py loaddata initial_data.json

# Ù…Ø±Ø­Ù„Ù‡ 4: ØªØ³Øª Ø³ÛŒØ³ØªÙ…
python manage.py test
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Django Admin</div>
                    <div class="code-block">
# admin.py
from django.contrib import admin
from django.contrib.gis.admin import OSMGeoAdmin
from .models import Organization, User, Role, UserRole, GeographicZone

@admin.register(Organization)
class OrganizationAdmin(OSMGeoAdmin):
    list_display = ['name', 'code', 'domain_type', 'is_active']
    list_filter = ['domain_type', 'is_active']
    search_fields = ['name', 'code']
    readonly_fields = ['id', 'created_at', 'updated_at']

@admin.register(GeographicZone)
class GeographicZoneAdmin(OSMGeoAdmin):
    list_display = ['name', 'zone_type', 'organization', 'parent_zone']
    list_filter = ['zone_type', 'organization']
    search_fields = ['name']
    raw_id_fields = ['parent_zone']

@admin.register(UserRole)
class UserRoleAdmin(admin.ModelAdmin):
    list_display = ['user', 'role', 'valid_from', 'valid_until', 'is_active']
    list_filter = ['role', 'valid_from', 'is_active']
    raw_id_fields = ['user', 'role']
    filter_horizontal = ['geographic_zones']
                    </div>
                </div>
            </div>
        </div>

        <!-- Advanced Features -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸš€ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</h2>
                <span class="badge">Advanced</span>
            </div>
            <div class="model-content">
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”„</div>
                        <h4>Cache Ø³ÛŒØ³ØªÙ…</h4>
                        <p>Ú©Ø´ Ú©Ø±Ø¯Ù† Ù…Ø¬ÙˆØ²Ù‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ù‡ØªØ±</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ“±</div>
                        <h4>API Ù…ÙˆØ¨Ø§ÛŒÙ„</h4>
                        <p>Ø±Ø§Ø¨Ø·â€ŒÙ‡Ø§ÛŒ RESTful Ø¨Ø±Ø§ÛŒ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù†â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ¨Ø§ÛŒÙ„</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ””</div>
                        <h4>Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ù„Ø§Ø¯Ø±Ù†Ú¯</h4>
                        <p>Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ùˆ ØªØºÛŒÛŒØ±Ø§Øª Ù…Ø¬ÙˆØ²Ù‡Ø§</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ“ˆ</div>
                        <h4>ØªØ­Ù„ÛŒÙ„ Ø±ÙØªØ§Ø±</h4>
                        <p>ØªØ¬Ø²ÛŒÙ‡ Ùˆ ØªØ­Ù„ÛŒÙ„ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ</p>
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">âš¡ Ø³ÛŒØ³ØªÙ… Cache</div>
                    <div class="code-block">
# utils/cache.py
from django.core.cache import cache
from django.conf import settings
import hashlib

class PermissionCache:
    @staticmethod
    def get_cache_key(user_id, resource_type, field_name):
        """ØªÙˆÙ„ÛŒØ¯ Ú©Ù„ÛŒØ¯ ÛŒÚ©ØªØ§ÛŒ Ú©Ø´"""
        key_string = f"perm_{user_id}_{resource_type}_{field_name}"
        return hashlib.md5(key_string.encode()).hexdigest()
    
    @staticmethod
    def get_user_permissions(user_id, resource_type, field_name):
        """Ø¯Ø±ÛŒØ§ÙØª Ù…Ø¬ÙˆØ²Ù‡Ø§ Ø§Ø² Ú©Ø´"""
        cache_key = PermissionCache.get_cache_key(user_id, resource_type, field_name)
        return cache.get(cache_key)
    
    @staticmethod
    def set_user_permissions(user_id, resource_type, field_name, permissions, timeout=3600):
        """Ø°Ø®ÛŒØ±Ù‡ Ù…Ø¬ÙˆØ²Ù‡Ø§ Ø¯Ø± Ú©Ø´"""
        cache_key = PermissionCache.get_cache_key(user_id, resource_type, field_name)
        cache.set(cache_key, permissions, timeout)
    
    @staticmethod
    def invalidate_user_cache(user_id):
        """Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† ØªÙ…Ø§Ù… Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø§Ø² Ú©Ø´"""
        # Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ù„Ú¯ÙˆÛŒ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ú©Ø´
        pass

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± views
def check_field_access_cached(user, resource_type, field_name):
    # Ø§Ø¨ØªØ¯Ø§ Ø§Ø² Ú©Ø´ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†
    cached_permission = PermissionCache.get_user_permissions(
        user.id, resource_type, field_name
    )
    
    if cached_permission is not None:
        return cached_permission
    
    # Ø§Ú¯Ø± Ø¯Ø± Ú©Ø´ Ù†Ø¨ÙˆØ¯ØŒ Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¨Ú¯ÛŒØ±
    permission = check_field_access(user, resource_type, field_name)
    
    # Ø¯Ø± Ú©Ø´ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†
    PermissionCache.set_user_permissions(
        user.id, resource_type, field_name, permission
    )
    
    return permission
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ”” Ø³ÛŒØ³ØªÙ… Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§</div>
                    <div class="code-block">
# notifications/models.py
class SecurityAlert(BaseModel):
    """Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ"""
    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)
    alert_type = models.CharField(max_length=50)
    severity = models.CharField(max_length=20)  # low, medium, high, critical
    user = models.ForeignKey(User, on_delete=models.CASCADE, null=True, blank=True)
    message = models.TextField()
    details = models.JSONField(default=dict)
    is_resolved = models.BooleanField(default=False)
    resolved_by = models.ForeignKey(User, on_delete=models.SET_NULL, null=True, related_name='resolved_alerts')

# notifications/services.py
from django.core.mail import send_mail
from channels.layers import get_channel_layer
from asgiref.sync import async_to_sync

class NotificationService:
    @staticmethod
    def send_security_alert(alert_type, user, details):
        """Ø§Ø±Ø³Ø§Ù„ Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ"""
        
        # Ø§ÛŒØ¬Ø§Ø¯ Ù‡Ø´Ø¯Ø§Ø± Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³
        alert = SecurityAlert.objects.create(
            organization=user.organization,
            alert_type=alert_type,
            severity='high',
            user=user,
            message=f"Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ: {alert_type}",
            details=details
        )
        
        # Ø§Ø±Ø³Ø§Ù„ Ø§ÛŒÙ…ÛŒÙ„
        send_mail(
            subject=f'Ù‡Ø´Ø¯Ø§Ø± Ø§Ù…Ù†ÛŒØªÛŒ - {alert_type}',
            message=f'Ú©Ø§Ø±Ø¨Ø± {user.get_full_name()} - {details}',
            from_email=settings.DEFAULT_FROM_EMAIL,
            recipient_list=[user.organization.security_email],
        )
        
        # Ø§Ø±Ø³Ø§Ù„ Ø§Ø¹Ù„Ø§Ù† Ø¨Ù„Ø§Ø¯Ø±Ù†Ú¯
        channel_layer = get_channel_layer()
        async_to_sync(channel_layer.group_send)(
            f"org_{user.organization.id}_security",
            {
                "type": "security_alert",
                "alert": {
                    "id": str(alert.id),
                    "type": alert_type,
                    "user": user.get_full_name(),
                    "message": alert.message,
                    "timestamp": alert.created_at.isoformat()
                }
            }
        )
        
        return alert
                    </div>
                </div>
            </div>
        </div>

        <!-- Testing -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸ§ª ØªØ³Øª Ùˆ Ú©ÛŒÙÛŒØªâ€ŒØ³Ù†Ø¬ÛŒ</h2>
                <span class="badge">Testing</span>
            </div>
            <div class="model-content">
                <div class="example-section">
                    <div class="example-title">ğŸ”¬ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Unit</div>
                    <div class="code-block">
# tests/test_models.py
from django.test import TestCase
from django.contrib.gis.geos import Point, Polygon
from django.utils import timezone
from datetime import timedelta
from ..models import Organization, User, Role, UserRole, GeographicZone

class AccessControlTestCase(TestCase):
    def setUp(self):
        """ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ÙˆÙ„ÛŒÙ‡ ØªØ³Øª"""
        self.organization = Organization.objects.create(
            name="Ø´Ù‡Ø±Ø¯Ø§Ø±ÛŒ ØªØ³Øª",
            code="TEST_MUN",
            domain_type="municipality"
        )
        
        self.user = User.objects.create_user(
            username="test_user",
            password="test_pass",
            organization=self.organization
        )
        
        self.zone = GeographicZone.objects.create(
            organization=self.organization,
            name="Ù…Ù†Ø·Ù‚Ù‡ ØªØ³Øª",
            zone_type="circle",
            center_point=Point(51.0, 35.0),
            radius=1000.0
        )
    
    def test_user_in_allowed_zone(self):
        """ØªØ³Øª Ù‚Ø±Ø§Ø±Ú¯ÛŒØ±ÛŒ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ù…Ø¬Ø§Ø²"""
        # Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡
        user_location = Point(51.001, 35.001)
        self.user.last_known_location = user_location
        
        # Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡
        distance = self.zone.center_point.distance(user_location) * 111000
        self.assertLess(distance, self.zone.radius)
    
    def test_role_hierarchy(self):
        """ØªØ³Øª Ø³Ù„Ø³Ù„Ù‡ Ù…Ø±Ø§ØªØ¨ Ù†Ù‚Ø´â€ŒÙ‡Ø§"""
        parent_role = Role.objects.create(
            organization=self.organization,
            name="Ù…Ø¯ÛŒØ± Ú©Ù„",
            hierarchy_level=1
        )
        
        child_role = Role.objects.create(
            organization=self.organization,
            name="Ù…Ø¯ÛŒØ± Ø¨Ø®Ø´",
            hierarchy_level=2,
            parent_role=parent_role
        )
        
        self.assertEqual(child_role.parent_role, parent_role)
        self.assertGreater(child_role.hierarchy_level, parent_role.hierarchy_level)
    
    def test_time_based_access(self):
        """ØªØ³Øª Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø²Ù…Ø§Ù†"""
        role = Role.objects.create(
            organization=self.organization,
            name="Ú©Ø§Ø±Ø´Ù†Ø§Ø³",
            hierarchy_level=3
        )
        
        # Ù†Ù‚Ø´ Ø¨Ø§ ØªØ§Ø±ÛŒØ® Ø§Ù†Ù‚Ø¶Ø§
        user_role = UserRole.objects.create(
            user=self.user,
            role=role,
            valid_from=timezone.now(),
            valid_until=timezone.now() + timedelta(days=30)
        )
        
        # Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø¹ØªØ¨Ø§Ø±
        self.assertTrue(user_role.valid_from <= timezone.now())
        self.assertTrue(user_role.valid_until >= timezone.now())
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ API</div>
                    <div class="code-block">
# tests/test_api.py
from rest_framework.test import APITestCase
from rest_framework import status
from django.contrib.auth import get_user_model
from django.contrib.gis.geos import Point

User = get_user_model()

class LocationAuthAPITestCase(APITestCase):
    def setUp(self):
        self.organization = Organization.objects.create(
            name="ØªØ³Øª API",
            code="API_TEST"
        )
        
        self.user = User.objects.create_user(
            username="api_user",
            password="api_pass",
            organization=self.organization
        )
    
    def test_location_based_login(self):
        """ØªØ³Øª ÙˆØ±ÙˆØ¯ Ø¨Ø§ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ"""
        data = {
            "username": "api_user",
            "password": "api_pass", 
            "location": {
                "latitude": 35.7,
                "longitude": 51.4
            }
        }
        
        response = self.client.post('/api/auth/location-login/', data)
        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertIn('access_token', response.data)
    
    def test_permission_check_api(self):
        """ØªØ³Øª API Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬ÙˆØ²Ù‡Ø§"""
        self.client.force_authenticate(user=self.user)
        
        data = {
            "resource_type": "CitizenProfile",
            "field_name": "national_id",
            "action": "read"
        }
        
        response = self.client.post('/api/permissions/check/', data)
        self.assertEqual(response.status_code, status.HTTP_200_OK)
        self.assertIn('allowed', response.data)
                    </div>
                </div>
            </div>
        </div>

        <!-- Performance -->
        <div class="model-section">
            <div class="model-header">
                <h2>âš¡ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯</h2>
                <span class="badge">Performance</span>
            </div>
            <div class="model-content">
                <div class="info-box">
                    <strong>ğŸ¯ Ù†Ú©Ø§Øª Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ:</strong>
                    <ul>
                        <li>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² <span class="highlight">select_related</span> Ùˆ <span class="highlight">prefetch_related</span> Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ ØªØ¹Ø¯Ø§Ø¯ Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§</li>
                        <li>Ø§ÛŒØ¬Ø§Ø¯ <span class="highlight">Ø§ÛŒÙ†Ø¯Ú©Ø³ Ù…Ù†Ø§Ø³Ø¨</span> Ø±ÙˆÛŒ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ù¾Ø±Ø¬Ø³ØªØ¬Ùˆ</li>
                        <li>Ú©Ø´ Ú©Ø±Ø¯Ù† <span class="highlight">Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†</span> Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù‡Ø´ Ø¨Ø§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³</li>
                        <li>Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² <span class="highlight">Database Connection Pooling</span></li>
                    </ul>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ“Š Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§</div>
                    <div class="code-block">
# models.py - Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø§ÛŒÙ†Ø¯Ú©Ø³â€ŒÙ‡Ø§
class User(AbstractUser):
    # ...
    class Meta:
        indexes = [
            models.Index(fields=['organization', 'is_active']),
            models.Index(fields=['last_known_location']),
            models.Index(fields=['employee_code']),
        ]

class UserRole(BaseModel):
    # ...
    class Meta:
        indexes = [
            models.Index(fields=['user', 'valid_from', 'valid_until']),
            models.Index(fields=['role', 'is_active']),
        ]

# services.py - Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡
def get_user_active_roles(user):
    """Ø¯Ø±ÛŒØ§ÙØª Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ú©ÙˆØ¦Ø±ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡"""
    return UserRole.objects.select_related(
        'role', 'role__group', 'role__parent_role'
    ).prefetch_related(
        'geographic_zones', 'role__fieldpermission_set'
    ).filter(
        user=user,
        valid_from__lte=timezone.now(),
        valid_until__gte=timezone.now(),
        is_active=True
    )

def check_user_permissions_bulk(user, permission_checks):
    """Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ§ÛŒ Ù…Ø¬ÙˆØ²Ù‡Ø§"""
    roles = get_user_active_roles(user)
    
    # Ø¯Ø±ÛŒØ§ÙØª ØªÙ…Ø§Ù… Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ ÙÛŒÙ„Ø¯ Ù…Ø±ØªØ¨Ø· ÛŒÚ©Ø¬Ø§
    field_permissions = FieldPermission.objects.filter(
        role__in=[ur.role for ur in roles]
    ).select_related('role')
    
    results = {}
    for check in permission_checks:
        resource_type = check['resource_type']
        field_name = check['field_name']
        action = check.get('action', 'read')
        
        # Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù…Ø¬ÙˆØ² Ù…Ù†Ø§Ø³Ø¨
        relevant_permissions = field_permissions.filter(
            resource_type=resource_type,
            field_name=field_name
        )
        
        results[f"{resource_type}.{field_name}"] = any(
            getattr(perm, f'can_{action}', False) 
            for perm in relevant_permissions
        )
    
    return results
                    </div>
                </div>
            </div>
        </div>

        <!-- Security -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸ›¡ï¸ Ø§Ù…Ù†ÛŒØª Ùˆ Ø­Ø±ÛŒÙ… Ø®ØµÙˆØµÛŒ</h2>
                <span class="badge">Security</span>
            </div>
            <div class="model-content">
                <div class="warning-box">
                    <strong>ğŸ” Ù†Ú©Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ Ø­ÛŒØ§ØªÛŒ:</strong>
                    <ul>
                        <li><strong>Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³:</strong> Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ù‡Ù… Ù…Ø§Ù†Ù†Ø¯ Ú©Ø¯ Ù…Ù„ÛŒ Ø¨Ø§ÛŒØ¯ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø´ÙˆÙ†Ø¯</li>
                        <li><strong>Audit Logging:</strong> ØªÙ…Ø§Ù… Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ Ùˆ ØªØºÛŒÛŒØ±Ø§Øª Ø¨Ø§ÛŒØ¯ Ù„Ø§Ú¯ Ø´ÙˆÙ†Ø¯</li>
                        <li><strong>Rate Limiting:</strong> Ù…Ø­Ø¯ÙˆØ¯ÛŒØª ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø­Ù…Ù„Ø§Øª</li>
                        <li><strong>Input Validation:</strong> Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø¯Ù‚ÛŒÙ‚ ØªÙ…Ø§Ù… ÙˆØ±ÙˆØ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±</li>
                    </ul>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ”’ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³</div>
                    <div class="code-block">
# utils/encryption.py
from cryptography.fernet import Fernet
from django.conf import settings
import base64

class DataEncryption:
    def __init__(self):
        key = settings.ENCRYPTION_KEY.encode()
        self.cipher_suite = Fernet(base64.urlsafe_b64encode(key[:32]))
    
    def encrypt(self, data):
        """Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø¯Ø§Ø¯Ù‡"""
        if not data:
            return None
        return self.cipher_suite.encrypt(str(data).encode()).decode()
    
    def decrypt(self, encrypted_data):
        """Ø±Ù…Ø²Ú¯Ø´Ø§ÛŒÛŒ Ø¯Ø§Ø¯Ù‡"""
        if not encrypted_data:
            return None
        return self.cipher_suite.decrypt(encrypted_data.encode()).decode()

# models.py - ÙÛŒÙ„Ø¯ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡
class EncryptedField(models.TextField):
    """ÙÛŒÙ„Ø¯ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ø³ÙØ§Ø±Ø´ÛŒ"""
    def __init__(self, *args, **kwargs):
        self.encryptor = DataEncryption()
        super().__init__(*args, **kwargs)
    
    def from_db_value(self, value, expression, connection):
        if value is None:
            return value
        return self.encryptor.decrypt(value)
    
    def to_python(self, value):
        if isinstance(value, str) and value:
            return self.encryptor.decrypt(value)
        return value
    
    def get_prep_value(self, value):
        if value is None:
            return value
        return self.encryptor.encrypt(value)

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ù…Ø¯Ù„
class CitizenProfile(BaseModel):
    name = models.CharField(max_length=100)
    national_id = EncryptedField()  # Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡
    phone = EncryptedField()  # Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ø´Ø¯Ù‡
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ“‹ Ø³ÛŒØ³ØªÙ… Audit Logging</div>
                    <div class="code-block">
# audit/models.py
class AuditLog(BaseModel):
    """Ù„Ø§Ú¯ Ø­Ø³Ø§Ø¨Ø±Ø³ÛŒ"""
    organization = models.ForeignKey(Organization, on_delete=models.CASCADE)
    user = models.ForeignKey(User, on_delete=models.CASCADE)
    action = models.CharField(max_length=50)
    resource_type = models.CharField(max_length=100)
    resource_id = models.UUIDField(null=True, blank=True)
    field_name = models.CharField(max_length=100, null=True, blank=True)
    old_value = models.TextField(null=True, blank=True)
    new_value = models.TextField(null=True, blank=True)
    ip_address = models.GenericIPAddressField()
    user_agent = models.TextField()
    location = models.PointField(null=True, blank=True)
    
    class Meta:
        indexes = [
            models.Index(fields=['user', 'created_at']),
            models.Index(fields=['resource_type', 'created_at']),
            models.Index(fields=['action', 'created_at']),
        ]

# audit/services.py
class AuditService:
    @staticmethod
    def log_access(user, action, resource_type, resource_id=None, 
                   field_name=None, request=None):
        """Ø«Ø¨Øª Ù„Ø§Ú¯ Ø¯Ø³ØªØ±Ø³ÛŒ"""
        
        ip_address = None
        user_agent = ""
        
        if request:
            ip_address = request.META.get('HTTP_X_FORWARDED_FOR') or \
                        request.META.get('REMOTE_ADDR')
            user_agent = request.META.get('HTTP_USER_AGENT', '')
        
        AuditLog.objects.create(
            organization=user.organization,
            user=user,
            action=action,
            resource_type=resource_type,
            resource_id=resource_id,
            field_name=field_name,
            ip_address=ip_address,
            user_agent=user_agent,
            location=user.last_known_location
        )
    
    @staticmethod
    def log_field_access(user, resource_type, field_name, 
                        old_value=None, new_value=None, request=None):
        """Ø«Ø¨Øª Ù„Ø§Ú¯ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ ÙÛŒÙ„Ø¯"""
        AuditService.log_access(
            user=user,
            action='field_access',
            resource_type=resource_type,
            field_name=field_name,
            request=request
        )
        
        # Ø«Ø¨Øª ØªØºÛŒÛŒØ±Ø§Øª
        if old_value is not None or new_value is not None:
            AuditLog.objects.create(
                organization=user.organization,
                user=user,
                action='field_update',
                resource_type=resource_type,
                field_name=field_name,
                old_value=str(old_value) if old_value else None,
                new_value=str(new_value) if new_value else None,
                ip_address=request.META.get('REMOTE_ADDR') if request else None,
                user_agent=request.META.get('HTTP_USER_AGENT', '') if request else "",
                location=user.last_known_location
            )

# Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± views
def get_citizen_profile(request, citizen_id):
    # Ø«Ø¨Øª Ù„Ø§Ú¯ Ø¯Ø³ØªØ±Ø³ÛŒ
    AuditService.log_access(
        user=request.user,
        action='view',
        resource_type='CitizenProfile',
        resource_id=citizen_id,
        request=request
    )
    
    # Ø§Ø¯Ø§Ù…Ù‡ Ù¾Ø±Ø¯Ø§Ø²Ø´...
                    </div>
                </div>
            </div>
        </div>

        <!-- Future Enhancements -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸ”® ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡</h2>
                <span class="badge">Roadmap</span>
            </div>
            <div class="model-content">
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ¤–</div>
                        <h4>Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</h4>
                        <p>ØªØ´Ø®ÛŒØµ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ù…Ø´Ú©ÙˆÚ© Ùˆ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ ØªÙ‡Ø¯ÛŒØ¯Ø§Øª</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ“±</div>
                        <h4>Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…ÙˆØ¨Ø§ÛŒÙ„</h4>
                        <p>Ø§Ù¾ Ù…ÙˆØ¨Ø§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">ğŸ”—</div>
                        <h4>Blockchain</h4>
                        <p>Ø«Ø¨Øª ØªØºÛŒÛŒØ±Ø§Øª Ø¯Ø± Ø¨Ù„Ø§Ú©â€ŒÚ†ÛŒÙ† Ø¨Ø±Ø§ÛŒ Ø§Ù…Ù†ÛŒØª Ø¨Ø§Ù„Ø§ØªØ±</p>
                    </div>
                    <div class="feature-card">
                        <div class="feature-icon">â˜ï¸</div>
                        <h4>Cloud Native</h4>
                        <p>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² Ù…Ø¹Ù…Ø§Ø±ÛŒ Ú©Ù„ÙˆØ¯</p>
                    </div>
                </div>

                <div class="success-box">
                    <strong>âœ¨ Ù†Ø³Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢ÛŒÙ†Ø¯Ù‡ Ø´Ø§Ù…Ù„:</strong>
                    <ul>
                        <li>ØªØ­Ù„ÛŒÙ„ Ø±ÙØªØ§Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø§ Machine Learning</li>
                        <li>Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ø¨ÛŒÙˆÙ…ØªØ±ÛŒÚ©</li>
                        <li>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² IoT Ùˆ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</li>
                        <li>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² IoT Ùˆ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</li>
                        <li>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ØªØ­Ù„ÛŒÙ„ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ</li>
                        <li>Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆÛŒØª Ø®Ø§Ø±Ø¬ÛŒ (LDAP, Active Directory)</li>
                        <li>Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Workflow Ùˆ ØªØ§ÛŒÛŒØ¯ Ú†Ù†Ø¯Ù…Ø±Ø­Ù„Ù‡â€ŒØ§ÛŒ</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Deployment Guide -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸš€ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Production</h2>
                <span class="badge">Deployment</span>
            </div>
            <div class="model-content">
                <div class="example-section">
                    <div class="example-title">ğŸ³ Docker Configuration</div>
                    <div class="code-block">
# Dockerfile
FROM python:3.11-slim

# Install system dependencies
RUN apt-get update && apt-get install -y \
    gdal-bin \
    libgdal-dev \
    libgeos-dev \
    libproj-dev \
    postgresql-client \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Install Python dependencies
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# Copy application code
COPY . .

# Create non-root user
RUN useradd --create-home --shell /bin/bash app \
    && chown -R app:app /app
USER app

EXPOSE 8000

CMD ["gunicorn", "--bind", "0.0.0.0:8000", "project.wsgi:application"]
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ”§ docker-compose.yml</div>
                    <div class="code-block">
version: '3.8'

services:
  db:
    image: postgis/postgis:15-3.3
    environment:
      POSTGRES_DB: location_auth_system
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  web:
    build: .
    ports:
      - "8000:8000"
    environment:
      - DEBUG=False
      - DATABASE_URL=postgres://postgres:${DB_PASSWORD}@db:5432/location_auth_system
      - REDIS_URL=redis://redis:6379/0
      - SECRET_KEY=${SECRET_KEY}
      - ENCRYPTION_KEY=${ENCRYPTION_KEY}
    depends_on:
      - db
      - redis
    volumes:
      - ./media:/app/media
      - ./static:/app/static

  celery:
    build: .
    command: celery -A project worker -l info
    environment:
      - DATABASE_URL=postgres://postgres:${DB_PASSWORD}@db:5432/location_auth_system
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - db
      - redis

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - ./ssl:/etc/nginx/ssl
      - ./static:/var/www/static
    depends_on:
      - web

volumes:
  postgres_data:
  redis_data:
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Production</div>
                    <div class="code-block">
# settings/production.py
import os
from .base import *

DEBUG = False
ALLOWED_HOSTS = os.getenv('ALLOWED_HOSTS', '').split(',')

# Database
DATABASES = {
    'default': {
        'ENGINE': 'django.contrib.gis.db.backends.postgis',
        'NAME': os.getenv('DB_NAME'),
        'USER': os.getenv('DB_USER'),
        'PASSWORD': os.getenv('DB_PASSWORD'),
        'HOST': os.getenv('DB_HOST'),
        'PORT': os.getenv('DB_PORT', '5432'),
        'OPTIONS': {
            'sslmode': 'require',
        },
    }
}

# Cache
CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': os.getenv('REDIS_URL'),
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
        }
    }
}

# Security
SECURE_SSL_REDIRECT = True
SECURE_PROXY_SSL_HEADER = ('HTTP_X_FORWARDED_PROTO', 'https')
SESSION_COOKIE_SECURE = True
CSRF_COOKIE_SECURE = True
SECURE_BROWSER_XSS_FILTER = True
SECURE_CONTENT_TYPE_NOSNIFF = True

# Logging
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'verbose': {
            'format': '{levelname} {asctime} {module} {process:d} {thread:d} {message}',
            'style': '{',
        },
    },
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.FileHandler',
            'filename': '/var/log/django/app.log',
            'formatter': 'verbose',
        },
        'security_file': {
            'level': 'WARNING',
            'class': 'logging.FileHandler',
            'filename': '/var/log/django/security.log',
            'formatter': 'verbose',
        },
    },
    'loggers': {
        'django': {
            'handlers': ['file'],
            'level': 'INFO',
            'propagate': True,
        },
        'django.security': {
            'handlers': ['security_file'],
            'level': 'WARNING',
            'propagate': False,
        },
        'audit': {
            'handlers': ['file'],
            'level': 'INFO',
            'propagate': False,
        },
    },
}
                    </div>
                </div>
            </div>
        </div>

        <!-- Monitoring -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸ“Š Ù†Ø¸Ø§Ø±Øª Ùˆ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯</h2>
                <span class="badge">Monitoring</span>
            </div>
            <div class="model-content">
                <div class="example-section">
                    <div class="example-title">ğŸ“ˆ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ</div>
                    <div class="code-block">
# monitoring/metrics.py
from django.core.management.base import BaseCommand
from django.utils import timezone
from datetime import timedelta
import json

class SystemMetrics:
    @staticmethod
    def get_daily_stats():
        """Ø¢Ù…Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡ Ø³ÛŒØ³ØªÙ…"""
        today = timezone.now().date()
        yesterday = today - timedelta(days=1)
        
        stats = {
            "date": str(today),
            "users": {
                "total_active": User.objects.filter(is_active=True).count(),
                "logged_in_today": User.objects.filter(
                    last_login__date=today
                ).count(),
                "failed_logins": User.objects.filter(
                    failed_login_attempts__gt=0
                ).count()
            },
            "access_control": {
                "total_roles": Role.objects.count(),
                "active_assignments": UserRole.objects.filter(
                    valid_from__lte=timezone.now(),
                    valid_until__gte=timezone.now(),
                    is_active=True
                ).count(),
                "expired_assignments": UserRole.objects.filter(
                    valid_until__lt=timezone.now()
                ).count()
            },
            "security": {
                "security_alerts": SecurityAlert.objects.filter(
                    created_at__date=today,
                    is_resolved=False
                ).count(),
                "audit_logs": AuditLog.objects.filter(
                    created_at__date=today
                ).count()
            },
            "geographic": {
                "total_zones": GeographicZone.objects.count(),
                "users_with_location": User.objects.filter(
                    last_known_location__isnull=False
                ).count()
            }
        }
        
        return stats
    
    @staticmethod
    def get_performance_metrics():
        """Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯"""
        from django.db import connection
        
        with connection.cursor() as cursor:
            # Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§
            cursor.execute("""
                SELECT 
                    AVG(query_time) as avg_query_time,
                    MAX(query_time) as max_query_time,
                    COUNT(*) as total_queries
                FROM django_slow_queries 
                WHERE created_at >= NOW() - INTERVAL '1 hour'
            """)
            
            query_stats = cursor.fetchone()
        
        return {
            "database": {
                "avg_query_time": query_stats[0] if query_stats[0] else 0,
                "max_query_time": query_stats[1] if query_stats[1] else 0,
                "total_queries": query_stats[2] if query_stats[2] else 0
            },
            "cache": {
                "hit_rate": get_cache_hit_rate(),
                "memory_usage": get_cache_memory_usage()
            }
        }

def get_cache_hit_rate():
    """Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ø±Ø® hit Ú©Ø´"""
    # Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Redis INFO
    import redis
    r = redis.Redis()
    info = r.info()
    
    hits = info.get('keyspace_hits', 0)
    misses = info.get('keyspace_misses', 0)
    
    if hits + misses == 0:
        return 0
    
    return (hits / (hits + misses)) * 100

# management/commands/generate_metrics.py
class Command(BaseCommand):
    help = 'Generate system metrics'
    
    def handle(self, *args, **options):
        metrics = SystemMetrics.get_daily_stats()
        performance = SystemMetrics.get_performance_metrics()
        
        report = {
            "timestamp": timezone.now().isoformat(),
            "system_stats": metrics,
            "performance": performance
        }
        
        # Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± ÙØ§ÛŒÙ„
        with open(f'/var/log/metrics/metrics_{timezone.now().date()}.json', 'w') as f:
            json.dump(report, f, indent=2, ensure_ascii=False)
        
        self.stdout.write(
            self.style.SUCCESS('Metrics generated successfully')
        )
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸš¨ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±</div>
                    <div class="code-block">
# monitoring/alerts.py
class AlertManager:
    THRESHOLDS = {
        'failed_logins': 10,
        'response_time': 2000,  # milliseconds
        'disk_usage': 85,  # percentage
        'memory_usage': 90,  # percentage
    }
    
    @staticmethod
    def check_security_alerts():
        """Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ"""
        alerts = []
        
        # Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¨Ø§ ØªÙ„Ø§Ø´â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ù…ÙˆÙÙ‚ Ø²ÛŒØ§Ø¯
        suspicious_users = User.objects.filter(
            failed_login_attempts__gte=AlertManager.THRESHOLDS['failed_logins']
        )
        
        for user in suspicious_users:
            alerts.append({
                'type': 'security',
                'severity': 'high',
                'message': f'Ú©Ø§Ø±Ø¨Ø± {user.username} Ø¯Ø§Ø±Ø§ÛŒ {user.failed_login_attempts} ØªÙ„Ø§Ø´ Ù†Ø§Ù…ÙˆÙÙ‚',
                'user_id': str(user.id),
                'timestamp': timezone.now()
            })
        
        # Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯Ù‡
        recent_access = AuditLog.objects.filter(
            created_at__gte=timezone.now() - timedelta(hours=1),
            action='location_violation'
        )
        
        for log in recent_access:
            alerts.append({
                'type': 'location_violation',
                'severity': 'medium',
                'message': f'Ø¯Ø³ØªØ±Ø³ÛŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯Ù‡ ØªÙˆØ³Ø· {log.user.username}',
                'user_id': str(log.user.id),
                'location': f"{log.location.x}, {log.location.y}" if log.location else None,
                'timestamp': log.created_at
            })
        
        return alerts
    
    @staticmethod
    def send_alert_notifications(alerts):
        """Ø§Ø±Ø³Ø§Ù„ Ø§Ø¹Ù„Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù‡Ø´Ø¯Ø§Ø±"""
        for alert in alerts:
            if alert['severity'] == 'high':
                # Ø§Ø±Ø³Ø§Ù„ SMS Ùˆ Ø§ÛŒÙ…ÛŒÙ„ ÙÙˆØ±ÛŒ
                send_emergency_notification(alert)
            elif alert['severity'] == 'medium':
                # Ø§Ø±Ø³Ø§Ù„ Ø§ÛŒÙ…ÛŒÙ„
                send_email_notification(alert)
            
            # Ø«Ø¨Øª Ø¯Ø± Ø³ÛŒØ³ØªÙ…
            SecurityAlert.objects.create(
                alert_type=alert['type'],
                severity=alert['severity'],
                message=alert['message'],
                details=alert
            )

# Celery task Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ
@shared_task
def check_system_alerts():
    """ØªØ³Ú© Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§"""
    alerts = AlertManager.check_security_alerts()
    
    if alerts:
        AlertManager.send_alert_notifications(alerts)
        
        # Ù„Ø§Ú¯ Ú©Ø±Ø¯Ù†
        logger.warning(f"Generated {len(alerts)} alerts", extra={
            'alerts': alerts
        })
    
    return f"Processed {len(alerts)} alerts"
                    </div>
                </div>
            </div>
        </div>

        <!-- API Documentation -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸ“š Ù…Ø³ØªÙ†Ø¯Ø§Øª API</h2>
                <span class="badge">API Docs</span>
            </div>
            <div class="model-content">
                <div class="example-section">
                    <div class="example-title">ğŸ” Authentication Endpoints</div>
                    <div class="code-block">
# POST /api/auth/location-login/
{
    "username": "john_doe",
    "password": "secure_password",
    "location": {
        "latitude": 35.7219,
        "longitude": 51.3347
    },
    "device_info": {
        "device_id": "unique_device_id",
        "platform": "web",
        "user_agent": "Mozilla/5.0..."
    }
}

# Response
{
    "success": true,
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9...",
    "user": {
        "id": "uuid-here",
        "username": "john_doe",
        "full_name": "John Doe",
        "organization": "Tehran Municipality",
        "current_zone": "Region 1"
    },
    "permissions": {
        "roles": ["GIS Expert", "Data Analyst"],
        "can_access": ["maps", "reports", "citizen_data"],
        "restrictions": {
            "working_hours": "08:00-16:00",
            "allowed_zones": ["region_1", "central_office"]
        }
    },
    "expires_in": 3600
}

# POST /api/auth/refresh/
{
    "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}

# POST /api/auth/logout/
{
    "refresh_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9..."
}
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ” Permission Check Endpoints</div>
                    <div class="code-block">
# POST /api/permissions/check/
{
    "resource_type": "CitizenProfile",
    "field_name": "national_id",
    "action": "read",
    "context": {
        "citizen_id": "uuid-here",
        "purpose": "verification"
    }
}

# Response
{
    "allowed": true,
    "masking": {
        "rule": "partial",
        "pattern": "***-***-{last_3}"
    },
    "conditions": {
        "audit_required": true,
        "purpose_required": true,
        "time_limit": 300
    },
    "role": "Data Analyst",
    "expires_at": "2024-01-15T16:00:00Z"
}

# POST /api/permissions/bulk-check/
{
    "checks": [
        {
            "resource_type": "CitizenProfile",
            "field_name": "national_id",
            "action": "read"
        },
        {
            "resource_type": "CitizenProfile", 
            "field_name": "phone",
            "action": "update"
        }
    ]
}

# Response
{
    "results": {
        "CitizenProfile.national_id": {
            "allowed": true,
            "masking": {"rule": "partial"}
        },
        "CitizenProfile.phone": {
            "allowed": false,
            "reason": "insufficient_privileges"
        }
    }
}
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ—ºï¸ Geographic Endpoints</div>
                    <div class="code-block">
# GET /api/zones/
# Response
{
    "zones": [
        {
            "id": "uuid-here",
            "name": "Region 1 Tehran",
            "type": "polygon",
            "bounds": {
                "north": 35.8,
                "south": 35.7,
                "east": 51.5,
                "west": 51.4
            },
            "properties": {
                "population": 280000,
                "area_km2": 47.8
            }
        }
    ]
}

# POST /api/location/update/
{
    "latitude": 35.7219,
    "longitude": 51.3347,
    "accuracy": 10,
    "timestamp": "2024-01-15T14:30:00Z"
}

# GET /api/location/validate/
# Query params: lat=35.7219&lng=51.3347
# Response
{
    "valid": true,
    "zone": {
        "id": "uuid-here",
        "name": "Central Office",
        "type": "circle"
    },
    "distance_to_center": 25.5,
    "allowed_actions": ["read", "update"]
}
                    </div>
                </div>
            </div>
        </div>

        <!-- Best Practices -->
        <div class="model-section">
            <div class="model-header">
                <h2>âœ¨ Ø¨Ù‡ØªØ±ÛŒÙ† Ø´ÛŒÙˆÙ‡â€ŒÙ‡Ø§</h2>
                <span class="badge">Best Practices</span>
            </div>
            <div class="model-content">
                <div class="success-box">
                    <strong>ğŸ¯ Ø§ØµÙˆÙ„ Ø·Ø±Ø§Ø­ÛŒ:</strong>
                    <ul>
                        <li><strong>Principle of Least Privilege:</strong> Ú©Ù…ØªØ±ÛŒÙ† Ø¯Ø³ØªØ±Ø³ÛŒ Ù„Ø§Ø²Ù…</li>
                        <li><strong>Defense in Depth:</strong> Ú†Ù†Ø¯ÛŒÙ† Ù„Ø§ÛŒÙ‡ Ø§Ù…Ù†ÛŒØªÛŒ</li>
                        <li><strong>Zero Trust:</strong> Ù‡ÛŒÚ†â€ŒÚ†ÛŒØ² Ø±Ø§ Ø¨Ø¯ÙˆÙ† ØªØ§ÛŒÛŒØ¯ Ø¨Ø§ÙˆØ± Ù†Ú©Ù†</li>
                        <li><strong>Fail Secure:</strong> Ø¯Ø± ØµÙˆØ±Øª Ø®Ø±Ø§Ø¨ÛŒØŒ Ø§Ù…Ù† Ø¨Ø§Ø´</li>
                    </ul>
                </div>

                <div class="warning-box">
                    <strong>âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù…:</strong>
                    <ul>
                        <li>Ù‡Ù…ÛŒØ´Ù‡ input validation Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯</li>
                        <li>Ø§Ø² SQL injection Ù…Ø­Ø§ÙØ¸Øª Ú©Ù†ÛŒØ¯</li>
                        <li>Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³ Ø±Ø§ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯</li>
                        <li>ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÛŒØ§Øª Ø±Ø§ Ù„Ø§Ú¯ Ú©Ù†ÛŒØ¯</li>
                        <li>Ø§Ø² HTTPS Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li>Ø±Ù…Ø²Ù‡Ø§ÛŒ Ø¹Ø¨ÙˆØ± Ù‚ÙˆÛŒ Ø§Ø¬Ø¨Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯</li>
                    </ul>
                </div>

                <div class="info-box">
                    <strong>ğŸ“‹ Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ:</strong>
                    <ul>
                        <li>âœ… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡</li>
                        <li>âœ… Ù…Ø³ØªÙ†Ø¯Ø§Øª Ú©Ø§Ù…Ù„ Ù†ÙˆØ´ØªÙ‡ Ø´Ø¯Ù‡</li>
                        <li>âœ… Ø³ÛŒØ³ØªÙ… Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯Ù‡</li>
                        <li>âœ… Ø¨Ú©â€ŒØ¢Ù¾ Ø®ÙˆØ¯Ú©Ø§Ø± ØªÙ†Ø¸ÛŒÙ… Ø´Ø¯Ù‡</li>
                        <li>âœ… SSL/TLS Ù¾ÛŒÚ©Ø±Ø¨Ù†Ø¯ÛŒ Ø´Ø¯Ù‡</li>
                        <li>âœ… Rate limiting ÙØ¹Ø§Ù„ Ø´Ø¯Ù‡</li>
                        <li>âœ… Audit logging Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯Ù‡</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Conclusion -->
        <div class="conclusion-section">
            <h2>ğŸ‰ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ù†Ù‡Ø§ÛŒÛŒ</h2>
            <p>
                Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ø§ÛŒÙ† Ù…Ø³ØªÙ†Ø¯ Ø§Ø±Ø§Ø¦Ù‡ Ø´Ø¯ØŒ ÛŒÚ© Ø±Ø§Ù‡â€ŒØ­Ù„ 
                <span class="highlight">Ø¬Ø§Ù…Ø¹ØŒ Ø§Ù…Ù† Ùˆ Ù‚Ø§Ø¨Ù„ ØªØ·Ø¨ÛŒÙ‚</span> Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø§Ø³Øª.
            </p>
            
            <div class="final-stats">
                <div class="stat-item">
                    <div class="stat-number">7</div>
                    <div class="stat-label">Ù…Ø¯Ù„ Ú©Ù„ÛŒØ¯ÛŒ</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">50+</div>
                    <div class="stat-label">ÙÛŒÙ„Ø¯ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">âˆ</div>
                    <div class="stat-label">Ù‚Ø§Ø¨Ù„ÛŒØª ØªØ·Ø¨ÛŒÙ‚</div>
                </div>
                <div class="stat-item">
                    <div class="stat-number">100%</div>
                    <div class="stat-label">Ø§Ù…Ù†ÛŒØª</div>
                </div>
            </div>

            <div class="final-message">
                <p>
                    Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ… Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø¯Ø±Ù† Ù…Ø§Ù†Ù†Ø¯ DjangoØŒ PostGISØŒ Ùˆ Redis Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ 
                    Ùˆ Ù‚Ø§Ø¨Ù„ÛŒØª Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ù‡Ø²Ø§Ø±Ø§Ù† Ú©Ø§Ø±Ø¨Ø± Ù‡Ù…Ø²Ù…Ø§Ù† Ø±Ø§ Ø¯Ø§Ø±Ø¯. Ø¨Ø§ Ù¾ÛŒØ±ÙˆÛŒ Ø§Ø² Ø§ØµÙˆÙ„ Ø§Ù…Ù†ÛŒØªÛŒ Ùˆ 
                    Ø¨Ù‡ØªØ±ÛŒÙ† Ø´ÛŒÙˆÙ‡â€ŒÙ‡Ø§ÛŒ ØµÙ†Ø¹ØªØŒ Ø§ÛŒÙ† Ø±Ø§Ù‡â€ŒØ­Ù„ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ø±Ø§ Ø¨Ø±Ø¢ÙˆØ±Ø¯Ù‡ Ú©Ù†Ø¯.
                </p>
                
                <div class="contact-info">
                    <h3>ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ùˆ Ù…Ø´Ø§ÙˆØ±Ù‡</h3>
                    <p>Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨ÛŒØ´ØªØ± Ùˆ Ù…Ø´Ø§ÙˆØ±Ù‡ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒØŒ Ø¨Ø§ ØªÛŒÙ… ØªÙˆØ³Ø¹Ù‡ Ø¯Ø± ØªÙ…Ø§Ø³ Ø¨Ø§Ø´ÛŒØ¯.</p>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>ğŸ”— Ù„ÛŒÙ†Ú©â€ŒÙ‡Ø§ÛŒ Ù…ÙÛŒØ¯</h4>
                    <ul>
                        <li><a href="#organization">Ù…Ø¯Ù„ Organization</a></li>
                        <li><a href="#user">Ù…Ø¯Ù„ User</a></li>
                        <li><a href="#role">Ù…Ø¯Ù„ Role</a></li>
                        <li><a href="#scenarios">Ø³Ù†Ø§Ø±ÛŒÙˆÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>ğŸ“š Ù…Ù†Ø§Ø¨Ø¹</h4>
                    <ul>
                        <li><a href="https://docs.djangoproject.com/" target="_blank">Django Documentation</a></li>
                        <li><a href="https://postgis.net/" target="_blank">PostGIS</a></li>
                        <li><a href="https://redis.io/" target="_blank">Redis</a></li>
                        <li><a href="https://www.django-rest-framework.org/" target="_blank">Django REST Framework</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§</h4>
                    <ul>
                        <li>Django 4.2+</li>
                        <li>PostgreSQL + PostGIS</li>
                        <li>Redis Cache</li>
                        <li>Celery</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ - Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ Ø¨Ø±Ø§ÛŒ Django</p>
            </div>
        </footer>
    </div>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top" onclick="scrollToTop()">â†‘</button>

    <!-- JavaScript -->
    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Back to top button functionality
        window.onscroll = function() {
            const backToTopButton = document.getElementById('backToTop');
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                backToTopButton.style.display = 'block';
            } else {
                backToTopButton.style.display = 'none';
            }
        };

        function scrollToTop() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }

        // Code block copy functionality
        document.querySelectorAll('.code-block').forEach(block => {
            const copyButton = document.createElement('button');
            copyButton.className = 'copy-button';
            copyButton.innerHTML = 'ğŸ“‹ Ú©Ù¾ÛŒ';
            copyButton.onclick = function() {
                navigator.clipboard.writeText(block.textContent).then(() => {
                    copyButton.innerHTML = 'âœ… Ú©Ù¾ÛŒ Ø´Ø¯';
                    setTimeout(() => {
                        copyButton.innerHTML = 'ğŸ“‹ Ú©Ù¾ÛŒ';
                    }, 2000);
                });
            };
            block.style.position = 'relative';
            block.appendChild(copyButton);
        });

        // Progress bar
        window.addEventListener('scroll', function() {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            
            let progressBar = document.getElementById('progressBar');
            if (!progressBar) {
                progressBar = document.createElement('div');
                progressBar.id = 'progressBar';
                progressBar.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: ${progress}%;
                    height: 4px;
                    background: linear-gradient(90deg, #4CAF50, #2196F3);
                    z-index: 9999;
                    transition: width 0.3s ease;
                `;
                document.body.appendChild(progressBar);
            } else {
                progressBar.style.width = progress + '%';
            }
        });

        // Print functionality
        function printDocument() {
            window.print();
        }

        // Add print button
        const printButton = document.createElement('button');
        printButton.innerHTML = 'ğŸ–¨ï¸ Ú†Ø§Ù¾';
        printButton.style.cssText = `
            position: fixed;
            top: 20px;
            left: 20px;
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            z-index: 1000;
            font-family: 'Vazir', sans-serif;
        `;
        printButton.onclick = printDocument;
        document.body.appendChild(printButton);
    </script>

    <!-- Print Styles -->
    <style media="print">
        .navigation, .back-to-top, .copy-button, #progressBar, button {
            display: none !important;
        }
        
        .container {
            max-width: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .model-section {
            break-inside: avoid;
            page-break-inside: avoid;
        }
        
        .code-block {
            Hello! I'm Claude 4 Sonnet by Anthropic. I see you'd like me to continue completing the HTML code for the location-based authentication system documentation. Let me continue from where it left off:

```html
                        <li>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² IoT Ùˆ Ø¯Ø³ØªÚ¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯</li>
                        <li>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ØªØ­Ù„ÛŒÙ„ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ</li>
                        <li>ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ù‡ÙˆÛŒØª Ø®Ø§Ø±Ø¬ÛŒ (LDAP, Active Directory)</li>
                        <li>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯Ù‡Ø§ÛŒ Ø¨ÛŒÙ†â€ŒØ§Ù„Ù…Ù„Ù„ÛŒ Ø§Ù…Ù†ÛŒØª (OAuth 2.0, SAML)</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Best Practices -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸ’¡ Ø¨Ù‡ØªØ±ÛŒÙ† Ø´ÛŒÙˆÙ‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ</h2>
                <span class="badge">Best Practices</span>
            </div>
            <div class="model-content">
                <div class="example-section">
                    <div class="example-title">ğŸ—ï¸ Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</div>
                    <div class="code-block">
# Ù¾Ø±ÙˆÚ˜Ù‡ Ø³Ø§Ø®ØªØ§Ø±
location_auth_system/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ settings/
â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”œâ”€â”€ development.py
â”‚   â”‚   â”œâ”€â”€ production.py
â”‚   â”‚   â””â”€â”€ testing.py
â”‚   â”œâ”€â”€ urls.py
â”‚   â””â”€â”€ wsgi.py
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ models.py      # Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
â”‚   â”‚   â”œâ”€â”€ managers.py    # Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ
â”‚   â”‚   â”œâ”€â”€ permissions.py # Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù…Ø¬ÙˆØ²
â”‚   â”‚   â””â”€â”€ validators.py  # Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒâ€ŒÙ‡Ø§
â”‚   â”œâ”€â”€ authentication/
â”‚   â”‚   â”œâ”€â”€ views.py       # API Ù‡Ø§ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
â”‚   â”‚   â”œâ”€â”€ serializers.py # Ø³Ø±ÛŒØ§Ù„Ø§ÛŒØ²Ø±Ù‡Ø§
â”‚   â”‚   â””â”€â”€ services.py    # Ù…Ù†Ø·Ù‚ Ú©Ø³Ø¨ Ùˆ Ú©Ø§Ø±
â”‚   â”œâ”€â”€ audit/
â”‚   â”‚   â”œâ”€â”€ models.py      # Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø¨Ø±Ø³ÛŒ
â”‚   â”‚   â”œâ”€â”€ services.py    # Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ú¯
â”‚   â”‚   â””â”€â”€ reports.py     # Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ
â”‚   â””â”€â”€ notifications/
â”‚       â”œâ”€â”€ models.py      # Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø§Ø¹Ù„Ø§Ù†
â”‚       â”œâ”€â”€ services.py    # Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ø§Ø¹Ù„Ø§Ù†
â”‚       â””â”€â”€ consumers.py   # WebSocket consumers
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ cache.py          # Ù…Ø¯ÛŒØ±ÛŒØª Ú©Ø´
â”‚   â”œâ”€â”€ encryption.py     # Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ
â”‚   â”œâ”€â”€ gis_utils.py      # Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ GIS
â”‚   â””â”€â”€ permissions.py    # Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø¬ÙˆØ²
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_models.py
â”‚   â”œâ”€â”€ test_api.py
â”‚   â”œâ”€â”€ test_permissions.py
â”‚   â””â”€â”€ test_security.py
â””â”€â”€ requirements/
    â”œâ”€â”€ base.txt
    â”œâ”€â”€ development.txt
    â””â”€â”€ production.txt
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ¯Ø§Ú©Ø´Ù†</div>
                    <div class="code-block">
# settings/production.py
import os
from .base import *

# Ø§Ù…Ù†ÛŒØª
DEBUG = False
ALLOWED_HOSTS = ['your-domain.com', 'api.your-domain.com']

# Ø¯ÛŒØªØ§Ø¨ÛŒØ³
DATABASES = {
    'default': {
        'ENGINE': 'django.contrib.gis.db.backends.postgis',
        'NAME': os.environ.get('DB_NAME'),
        'USER': os.environ.get('DB_USER'),
        'PASSWORD': os.environ.get('DB_PASSWORD'),
        'HOST': os.environ.get('DB_HOST', 'localhost'),
        'PORT': os.environ.get('DB_PORT', '5432'),
        'CONN_MAX_AGE': 60,
        'OPTIONS': {
            'MAX_CONNS': 20,
            'sslmode': 'require',
        }
    }
}

# Ú©Ø´
CACHES = {
    'default': {
        'BACKEND': 'django_redis.cache.RedisCache',
        'LOCATION': os.environ.get('REDIS_URL', 'redis://localhost:6379/1'),
        'OPTIONS': {
            'CLIENT_CLASS': 'django_redis.client.DefaultClient',
            'CONNECTION_POOL_KWARGS': {
                'max_connections': 50,
                'retry_on_timeout': True,
            }
        }
    }
}

# Ù„Ø§Ú¯â€ŒÙ‡Ø§
LOGGING = {
    'version': 1,
    'disable_existing_loggers': False,
    'formatters': {
        'verbose': {
            'format': '{levelname} {asctime} {module} {process:d} {thread:d} {message}',
            'style': '{',
        },
    },
    'handlers': {
        'file': {
            'level': 'INFO',
            'class': 'logging.handlers.RotatingFileHandler',
            'filename': '/var/log/django/location_auth.log',
            'maxBytes': 1024*1024*15,  # 15MB
            'backupCount': 10,
            'formatter': 'verbose',
        },
        'security': {
            'level': 'WARNING',
            'class': 'logging.handlers.RotatingFileHandler',
            'filename': '/var/log/django/security.log',
            'maxBytes': 1024*1024*15,
            'backupCount': 10,
            'formatter': 'verbose',
        },
    },
    'loggers': {
        'django.security': {
            'handlers': ['security'],
            'level': 'WARNING',
            'propagate': False,
        },
        'location_auth': {
            'handlers': ['file'],
            'level': 'INFO',
            'propagate': True,
        },
    },
}

# Ø§Ù…Ù†ÛŒØª Ø§Ø¶Ø§ÙÛŒ
SECURE_BROWSER_XSS_FILTER = True
SECURE_CONTENT_TYPE_NOSNIFF = True
SECURE_HSTS_SECONDS = 31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS = True
SECURE_HSTS_PRELOAD = True
X_FRAME_OPTIONS = 'DENY'
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ³ Docker Configuration</div>
                    <div class="code-block">
# Dockerfile
FROM python:3.11-slim

# Ù†ØµØ¨ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…
RUN apt-get update && apt-get install -y \
    gdal-bin \
    libgdal-dev \
    libgeos-dev \
    libproj-dev \
    postgresql-client \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Ù†ØµØ¨ ÙˆØ§Ø¨Ø³ØªÚ¯ÛŒâ€ŒÙ‡Ø§ÛŒ Python
COPY requirements/production.txt .
RUN pip install --no-cache-dir -r production.txt

# Ú©Ù¾ÛŒ Ú©Ø¯
COPY . .

# ØªÙ†Ø¸ÛŒÙ…Ø§Øª
ENV DJANGO_SETTINGS_MODULE=config.settings.production
ENV PYTHONPATH=/app

# Ù¾ÙˆØ±Øª
EXPOSE 8000

# Ø§Ø¬Ø±Ø§
CMD ["gunicorn", "--bind", "0.0.0.0:8000", "config.wsgi:application"]

# docker-compose.yml
version: '3.8'

services:
  db:
    image: postgis/postgis:14-3.2
    environment:
      POSTGRES_DB: location_auth_db
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: ${DB_PASSWORD}
    volumes:
      - postgres_data:/var/lib/postgresql/data
    ports:
      - "5432:5432"

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"

  web:
    build: .
    command: gunicorn config.wsgi:application --bind 0.0.0.0:8000
    volumes:
      - .:/app
      - static_volume:/app/staticfiles
      - media_volume:/app/media
    ports:
      - "8000:8000"
    depends_on:
      - db
      - redis
    environment:
      - DB_HOST=db
      - REDIS_URL=redis://redis:6379/1

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx.conf:/etc/nginx/nginx.conf
      - static_volume:/app/staticfiles
      - media_volume:/app/media
    depends_on:
      - web

volumes:
  postgres_data:
  static_volume:
  media_volume:
                    </div>
                </div>
            </div>
        </div>

        <!-- Monitoring -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸ“Š Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ùˆ Ù†Ø¸Ø§Ø±Øª</h2>
                <span class="badge">Monitoring</span>
            </div>
            <div class="model-content">
                <div class="example-section">
                    <div class="example-title">ğŸ“ˆ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ</div>
                    <div class="code-block">
# monitoring/metrics.py
from django.db import models
from django.utils import timezone
from datetime import timedelta

class SystemMetrics:
    """Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø³ÛŒØ³ØªÙ…"""
    
    @staticmethod
    def get_daily_stats(date=None):
        """Ø¢Ù…Ø§Ø± Ø±ÙˆØ²Ø§Ù†Ù‡"""
        if not date:
            date = timezone.now().date()
        
        start_date = timezone.datetime.combine(date, timezone.datetime.min.time())
        end_date = start_date + timedelta(days=1)
        
        stats = {
            'total_logins': User.objects.filter(
                last_login__gte=start_date,
                last_login__lt=end_date
            ).count(),
            
            'failed_attempts': User.objects.filter(
                failed_login_attempts__gt=0
            ).count(),
            
            'active_sessions': UserRole.objects.filter(
                valid_from__lte=timezone.now(),
                valid_until__gte=timezone.now(),
                is_active=True
            ).count(),
            
            'security_alerts': SecurityAlert.objects.filter(
                created_at__gte=start_date,
                created_at__lt=end_date
            ).count(),
            
            'permission_checks': AuditLog.objects.filter(
                action='permission_check',
                created_at__gte=start_date,
                created_at__lt=end_date
            ).count()
        }
        
        return stats
    
    @staticmethod
    def get_performance_metrics():
        """Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯"""
        from django.db import connection
        
        with connection.cursor() as cursor:
            # Ù…ØªÙˆØ³Ø· Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§
            cursor.execute("""
                SELECT 
                    AVG(query_time) as avg_query_time,
                    MAX(query_time) as max_query_time,
                    COUNT(*) as total_queries
                FROM django_slow_query_log 
                WHERE created_at >= NOW() - INTERVAL '1 hour'
            """)
            
            query_stats = cursor.fetchone()
        
        return {
            'avg_query_time': query_stats[0] or 0,
            'max_query_time': query_stats[1] or 0,
            'total_queries': query_stats[2] or 0,
            'cache_hit_rate': cache.get('cache_hit_rate', 0),
            'memory_usage': get_memory_usage(),
        }

# monitoring/views.py
from rest_framework.decorators import api_view, permission_classes
from rest_framework.permissions import IsAdminUser
from rest_framework.response import Response

@api_view(['GET'])
@permission_classes([IsAdminUser])
def system_health(request):
    """ÙˆØ¶Ø¹ÛŒØª Ø³Ù„Ø§Ù…Øª Ø³ÛŒØ³ØªÙ…"""
    
    health_status = {
        'database': check_database_health(),
        'cache': check_cache_health(),
        'storage': check_storage_health(),
        'external_services': check_external_services(),
        'overall': 'healthy'
    }
    
    # ØªØ¹ÛŒÛŒÙ† ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ
    if any(status != 'healthy' for status in health_status.values() if status != 'overall'):
        health_status['overall'] = 'degraded'
    
    return Response(health_status)

def check_database_health():
    """Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù„Ø§Ù…Øª Ø¯ÛŒØªØ§Ø¨ÛŒØ³"""
    try:
        from django.db import connection
        with connection.cursor() as cursor:
            cursor.execute("SELECT 1")
        return 'healthy'
    except Exception:
        return 'unhealthy'

def check_cache_health():
    """Ø¨Ø±Ø±Ø³ÛŒ Ø³Ù„Ø§Ù…Øª Ú©Ø´"""
    try:
        from django.core.cache import cache
        cache.set('health_check', 'ok', 10)
        if cache.get('health_check') == 'ok':
            return 'healthy'
        return 'unhealthy'
    except Exception:
        return 'unhealthy'
                    </div>
                </div>

                <div class="info-box">
                    <strong>ğŸ“Š Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§ÛŒ Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Ù†Ø¸Ø§Ø±Øª:</strong>
                    <ul>
                        <li><span class="highlight">ØªØ¹Ø¯Ø§Ø¯ ÙˆØ±ÙˆØ¯Ù‡Ø§ÛŒ Ù…ÙˆÙÙ‚/Ù†Ø§Ù…ÙˆÙÙ‚</span> Ø¯Ø± Ø¨Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ù…Ø®ØªÙ„Ù</li>
                        <li><span class="highlight">Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø®â€ŒØ¯Ù‡ÛŒ</span> API Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù</li>
                        <li><span class="highlight">ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬ÙˆØ²Ù‡Ø§</span> Ùˆ Ù†Ø±Ø® Ù…ÙˆÙÙ‚ÛŒØª</li>
                        <li><span class="highlight">Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…Ù†Ø§Ø¨Ø¹</span> (CPU, Memory, Database)</li>
                        <li><span class="highlight">Ù‡Ø´Ø¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ</span> Ùˆ ØªØ¹Ø¯Ø§Ø¯ ØªÙ‡Ø¯ÛŒØ¯Ø§Øª Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Troubleshooting -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸ”§ Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ Ùˆ Ø­Ù„ Ù…Ø´Ú©Ù„Ø§Øª</h2>
                <span class="badge">Troubleshooting</span>
            </div>
            <div class="model-content">
                <div class="example-section">
                    <div class="example-title">ğŸš¨ Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬ Ùˆ Ø±Ø§Ù‡â€ŒØ­Ù„â€ŒÙ‡Ø§</div>
                    <div class="code-block">
# Ù…Ø´Ú©Ù„ 1: Ú©Ù†Ø¯ÛŒ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬ÙˆØ²Ù‡Ø§
# Ø¹Ù„Øª: Ø¹Ø¯Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ø´ Ùˆ Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ù†Ø§Ú©Ø§Ø±Ø¢Ù…Ø¯
# Ø±Ø§Ù‡â€ŒØ­Ù„:
def optimize_permission_check():
    # 1. ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ú©Ø´
    CACHES = {
        'default': {
            'BACKEND': 'django_redis.cache.RedisCache',
            'LOCATION': 'redis://127.0.0.1:6379/1',
            'TIMEOUT': 300,  # 5 Ø¯Ù‚ÛŒÙ‚Ù‡
        }
    }
    
    # 2. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§
    def get_user_permissions_optimized(user):
        cache_key = f"user_permissions_{user.id}"
        permissions = cache.get(cache_key)
        
        if permissions is None:
            permissions = UserRole.objects.select_related(
                'role', 'role__group'
            ).prefetch_related(
                'geographic_zones', 'role__fieldpermission_set'
            ).filter(user=user, is_active=True)
            
            cache.set(cache_key, permissions, timeout=300)
        
        return permissions

# Ù…Ø´Ú©Ù„ 2: Ø®Ø·Ø§ÛŒ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ
# Ø¹Ù„Øª: Ù…Ø´Ú©Ù„ Ø¯Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ ÛŒØ§ ØªÙ†Ø¸ÛŒÙ…Ø§Øª GIS
# Ø±Ø§Ù‡â€ŒØ­Ù„:
def debug_location_issue(user_location, allowed_zones):
    """Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ Ù…Ø´Ú©Ù„Ø§Øª Ù…ÙˆÙ‚Ø¹ÛŒØª"""
    
    print(f"Ù…ÙˆÙ‚Ø¹ÛŒØª Ú©Ø§Ø±Ø¨Ø±: {user_location}")
    print(f"ØªØ¹Ø¯Ø§Ø¯ Ù…Ø­Ø¯ÙˆØ¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø²: {len(allowed_zones)}")
    
    for zone in allowed_zones:
        if zone.zone_type == 'circle':
            distance = zone.center_point.distance(user_location) * 111000  # ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ù…ØªØ±
            print(f"Ù…Ø­Ø¯ÙˆØ¯Ù‡ {zone.name}: ÙØ§ØµÙ„Ù‡ = {distance:.2f}m, Ø´Ø¹Ø§Ø¹ = {zone.radius}m")
            
            if distance <= zone.radius:
                print(f"âœ… Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ù…Ø­Ø¯ÙˆØ¯Ù‡ {zone.name} Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯")
                return True
            else:
                print(f"âŒ Ú©Ø§Ø±Ø¨Ø± Ø®Ø§Ø±Ø¬ Ø§Ø² Ù…Ø­Ø¯ÙˆØ¯Ù‡ {zone.name} Ø§Ø³Øª")
        
        elif zone.zone_type == 'polygon' and zone.polygon:
            contains = zone.polygon.contains(user_location)
            print(f"Ù…Ø­Ø¯ÙˆØ¯Ù‡ {zone.name} (Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒ): {contains}")
            
            if contains:
                return True
    
    return False

# Ù…Ø´Ú©Ù„ 3: Ù…Ø´Ú©Ù„Ø§Øª Ø§Ù…Ù†ÛŒØªÛŒ
# Ø¹Ù„Øª: ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù†Ø§Ú©Ø§ÙÛŒ Ø§Ù…Ù†ÛŒØª
# Ø±Ø§Ù‡â€ŒØ­Ù„:
def security_hardening_checklist():
    """Ú†Ú©â€ŒÙ„ÛŒØ³Øª ØªÙ‚ÙˆÛŒØª Ø§Ù…Ù†ÛŒØª"""
    
    checks = {
        'https_enabled': settings.SECURE_SSL_REDIRECT,
        'debug_disabled': not settings.DEBUG,
        'secret_key_secure': len(settings.SECRET_KEY) >= 50,
        'database_password_set': bool(settings.DATABASES['default']['PASSWORD']),
        'allowed_hosts_configured': len(settings.ALLOWED_HOSTS) > 0,
        'csrf_protection': 'django.middleware.csrf.CsrfViewMiddleware' in settings.MIDDLEWARE,
        'session_security': settings.SESSION_COOKIE_SECURE,
        'xframe_protection': settings.X_FRAME_OPTIONS == 'DENY',
    }
    
    failed_checks = [check for check, passed in checks.items() if not passed]
    
    if failed_checks:
        print("âš ï¸ Ù…ÙˆØ§Ø±Ø¯ Ø§Ù…Ù†ÛŒØªÛŒ Ú©Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ø§Ø±Ù†Ø¯:")
        for check in failed_checks:
            print(f"  - {check}")
    else:
        print("âœ… ØªÙ…Ø§Ù… Ø¨Ø±Ø±Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ù…ÙˆÙÙ‚ Ø¨ÙˆØ¯")
    
    return len(failed_checks) == 0

# Ù…Ø´Ú©Ù„ 4: Ù…Ø´Ú©Ù„Ø§Øª Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
# Ø¹Ù„Øª: Ø¹Ø¯Ù… ÙˆØ¬ÙˆØ¯ Ø§ÛŒÙ†Ø¯Ú©Ø³ Ù…Ù†Ø§Ø³Ø¨
# Ø±Ø§Ù‡â€ŒØ­Ù„:
def analyze_slow_queries():
    """ØªØ¬Ø²ÛŒÙ‡ Ùˆ ØªØ­Ù„ÛŒÙ„ Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù†Ø¯"""
    
    from django.db import connection
    
    with connection.cursor() as cursor:
        # ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù„Ø§Ú¯ Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù†Ø¯ Ø¯Ø± PostgreSQL
        cursor.execute("SET log_min_duration_statement = 1000;")  # Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ù„Ø§ÛŒ 1 Ø«Ø§Ù†ÛŒÙ‡
        
        # Ø¨Ø±Ø±Ø³ÛŒ Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø±Ø§ Ø´Ø¯Ù‡
        cursor.execute("""
            SELECT query, mean_time, calls, total_time
            FROM pg_stat_statements 
            WHERE mean_time > 100 
            ORDER BY mean_time DESC 
            LIMIT 10;
        """)
        
        slow_queries = cursor.fetchall()
        
        print("ğŸŒ Ú©ÙˆØ¦Ø±ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù†Ø¯:")
        for query, mean_time, calls, total_time in slow_queries:
            print(f"Ù…ØªÙˆØ³Ø· Ø²Ù…Ø§Ù†: {mean_time:.2f}ms | ØªØ¹Ø¯Ø§Ø¯ Ø§Ø¬Ø±Ø§: {calls}")
            print(f"Ú©ÙˆØ¦Ø±ÛŒ: {query[:100]}...")
            print("-" * 50)
                    </div>
                </div>

                <div class="warning-box">
                    <strong>ğŸ” Ù†Ú©Ø§Øª Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ:</strong>
                    <ul>
                        <li><strong>Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯:</strong> Ø§ÙˆÙ„ÛŒÙ† Ù‚Ø¯Ù… Ù‡Ù…ÛŒØ´Ù‡ Ø¨Ø±Ø±Ø³ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù„Ø§Ú¯ Ø§Ø³Øª</li>
                        <li><strong>Ù…Ø­ÛŒØ· ØªØ³Øª:</strong> Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ Ø§Ø¨ØªØ¯Ø§ Ø¯Ø± Ù…Ø­ÛŒØ· ØªØ³Øª Ø¨Ø§Ø²ØªÙˆÙ„ÛŒØ¯ Ú©Ù†ÛŒØ¯</li>
                        <li><strong>Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯:</strong> Ø§Ø² Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ø¨Ø±Ø§ÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù…Ø´Ú©Ù„Ø§Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                        <li><strong>Ø¨Ú©Ø§Ù¾:</strong> Ù‚Ø¨Ù„ Ø§Ø² Ù‡Ø± ØªØºÛŒÛŒØ±ØŒ Ø­ØªÙ…Ø§Ù‹ Ø¨Ú©Ø§Ù¾ ØªÙ‡ÛŒÙ‡ Ú©Ù†ÛŒØ¯</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Deployment Guide -->
        <div class="model-section">
            <div class="model-header">
                <h2>ğŸš€ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø³ØªÙ‚Ø±Ø§Ø±</h2>
                <span class="badge">Deployment</span>
            </div>
            <div class="model-content">
                <div class="example-section">
                    <div class="example-title">â˜ï¸ Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ø± Ú©Ù„ÙˆØ¯</div>
                    <div class="code-block">
# Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ø¯Ø± AWS
# 1. ØªÙ†Ø¸ÛŒÙ…Ø§Øª RDS (PostgreSQL Ø¨Ø§ PostGIS)
resource "aws_db_instance" "location_auth_db" {
  identifier = "location-auth-db"
  engine     = "postgres"
  engine_version = "14.9"
  instance_class = "db.t3.medium"
  
  allocated_storage     = 100
  max_allocated_storage = 1000
  storage_type         = "gp2"
  storage_encrypted    = true
  
  db_name  = "location_auth"
  username = "postgres"
  password = var.db_password
  
  vpc_security_group_ids = [aws_security_group.rds.id]
  db_subnet_group_name   = aws_db_subnet_group.main.name
  
  backup_retention_period = 7
  backup_window          = "03:00-04:00"
  maintenance_window     = "sun:04:00-sun:05:00"
  
  skip_final_snapshot = false
  final_snapshot_identifier = "location-auth-final-snapshot"
  
  tags = {
    Name = "LocationAuth Database"
  }
}

# 2. ØªÙ†Ø¸ÛŒÙ…Ø§Øª ElastiCache (Redis)
resource "aws_elasticache_subnet_group" "main" {
  name       = "location-auth-cache-subnet"
  subnet_ids = var.private_subnet_ids
}

resource "aws_elasticache_cluster" "redis" {
  cluster_id           = "location-auth-redis"
  engine               = "redis"
  node_type            = "cache.t3.micro"
  num_cache_nodes      = 1
  parameter_group_name = "default.redis7"
  port                 = 6379
  subnet_group_name    = aws_elasticache_subnet_group.main.name
  security_group_ids   = [aws_security_group.redis.id]
}

# 3. ECS Service
resource "aws_ecs_service" "location_auth" {
  name            = "location-auth-service"
  cluster         = aws_ecs_cluster.main.id
  task_definition = aws_ecs_task_definition.location_auth.arn
  desired_count   = 2
  
  load_balancer {
    target_group_arn = aws_lb_target_group.location_auth.arn
    container_name   = "location-auth"
    container_port   = 8000
  }
  
  network_configuration {
    subnets         = var.private_subnet_ids
    security_groups = [aws_security_group.ecs_tasks.id]
  }
}
                    </div>
                </div>

                <div class="example-section">
                    <div class="example-title">ğŸ”„ CI/CD Pipeline</div>
                    <div class="code-block">
# .github/workflows/deploy.yml
name: Deploy Location Auth System

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest
    
    services:
      postgres:
        image: postgis/postgis:14-3.2
        env:
          POSTGRES_PASSWORD: postgres
          POSTGRES_DB: test_db
        options: >-
          --health-cmd pg_isready
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 5432:5432
      
      redis:
        image: redis:7-alpine
        options: >-
          --health-cmd "redis-cli ping"
          --health-interval 10s
          --health-timeout 5s
          --health-retries 5
        ports:
          - 6379:6379

    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install system dependencies
      run: |
        sudo apt-get update
        sudo apt-get install -y gdal-bin libgdal-dev libgeos-dev libproj-dev
    
    - name: Install Python dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements/testing.txt
    
    - name: Run tests
      env:
        DATABASE_URL: postgis://postgres:postgres@localhost:5432/test_db
        REDIS_URL: redis://localhost:6379/0
      run: |
        python manage.py migrate
        python manage.py test
    
    - name: Run security checks
      run: |
        bandit -r . -f json -o bandit-report.json
        safety check --json --output safety-report.json
    
    - name: Code quality check
      run: |
        flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
        black --check .
        isort --check-only .

  build:
    needs: test
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Configure AWS credentials
      uses: aws-actions/configure-aws-credentials@v2
      with:
        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
        aws-region: us-west-2
    
    - name: Login to Amazon ECR
      id: login-ecr
      uses: aws-actions/amazon-ecr-login@v1
    
    - name: Build and push Docker image
      env:
        ECR_REGISTRY: ${{ steps.login-ecr.outputs.registry }}
        ECR_REPOSITORY: location-auth-system
        IMAGE_TAG: ${{ github.sha }}
      run: |
        docker build -t $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG .
        docker push $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG
        docker tag $ECR_REGISTRY/$ECR_REPOSITORY:$IMAGE_TAG $ECR_REGISTRY/$ECR_REPOSITORY:latest
        docker push $ECR_REGISTRY/$ECR_REPOSITORY:latest

  deploy:
    needs: build
    runs-on: ubuntu-latest
    if: github.ref == 'refs/heads/main'
    
    steps:
    - name: Deploy to ECS
      run: |
        aws ecs update-service \
          --cluster location-auth-cluster \
          --service location-auth-service \
          --force-new-deployment
                    </div>
                </div>
            </div>
        </div>

        <!-- Final Summary -->
        <div class="final-summary">
            <h2>ğŸ¯ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ù†Ù‡Ø§ÛŒÛŒ</h2>
            <p>Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ú©Ù‡ Ø¯Ø± Ø§ÛŒÙ† Ù…Ø³ØªÙ†Ø¯ Ø§Ø±Ø§Ø¦Ù‡ Ø´Ø¯ØŒ ÛŒÚ© Ø±Ø§Ù‡â€ŒØ­Ù„ Ú©Ø§Ù…Ù„ Ùˆ Ù‚Ø§Ø¨Ù„ Ø§Ø¹ØªÙ…Ø§Ø¯ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ù…Ù†ÛŒØª Ùˆ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø± Ø³Ø§Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø§Ø³Øª.</p>
            
            <div class="final-features">
                <div class="final-feature">
                    <div class="final-icon">ğŸ—ï¸</div>
                    <h3>Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±</h3>
                    <p>Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø±Ø´Ø¯ Ùˆ ØªÙˆØ³Ø¹Ù‡ Ø¢ÛŒÙ†Ø¯Ù‡</p>
                </div>
                <div class="final-feature">
                    <div class="final-icon">ğŸ”</div>
                    <h3>Ø§Ù…Ù†ÛŒØª Ú†Ù†Ø¯Ù„Ø§ÛŒÙ‡</h3>
                    <p>Ø­ÙØ§Ø¸Øª Ø¬Ø§Ù…Ø¹ Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ùˆ Ø¯Ø³ØªØ±Ø³ÛŒâ€ŒÙ‡Ø§</p>
                </div>
                <div class="final-feature">
                    <div class="final-icon">ğŸŒ</div>
                    <h3>Ú©Ù†ØªØ±Ù„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</h3>
                    <p>Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ù‚ÛŒÙ‚ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…ÙˆÙ‚Ø¹ÛŒØª</p>
                </div>
                <div class="final-feature">
                    <div class="final-icon">ğŸ“Š</div>
                    <h3>Ù†Ø¸Ø§Ø±Øª Ù‡ÙˆØ´Ù…Ù†Ø¯</h3>
        <p>Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯ Ùˆ Ú¯Ø²Ø§Ø±Ø´â€ŒÚ¯ÛŒØ±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡</p>
                </div>
            </div>

            <div class="success-box">
                <h3>âœ¨ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ Ø³ÛŒØ³ØªÙ…:</h3>
                <div class="features-summary">
                    <div class="feature-summary-item">
                        <span class="feature-number">7</span>
                        <span class="feature-desc">Ù…Ø¯Ù„ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø§ØµÙ„ÛŒ</span>
                    </div>
                    <div class="feature-summary-item">
                        <span class="feature-number">50+</span>
                        <span class="feature-desc">ÙÛŒÙ„Ø¯ Ùˆ ÙˆÛŒÚ˜Ú¯ÛŒ</span>
                    </div>
                    <div class="feature-summary-item">
                        <span class="feature-number">âˆ</span>
                        <span class="feature-desc">Ù‚Ø§Ø¨Ù„ÛŒØª ØªØ·Ø¨ÛŒÙ‚</span>
                    </div>
                    <div class="feature-summary-item">
                        <span class="feature-number">100%</span>
                        <span class="feature-desc">Ù¾ÙˆØ´Ø´ Ø§Ù…Ù†ÛŒØªÛŒ</span>
                    </div>
                </div>
            </div>

            <div class="implementation-roadmap">
                <h3>ğŸ—ºï¸ Ù†Ù‚Ø´Ù‡ Ø±Ø§Ù‡ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ:</h3>
                <div class="roadmap-steps">
                    <div class="roadmap-step completed">
                        <div class="step-number">1</div>
                        <div class="step-content">
                            <h4>Ø·Ø±Ø§Ø­ÛŒ Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ø¯Ø§Ø¯Ù‡</h4>
                            <p>ØªØ¹Ø±ÛŒÙ Ø³Ø§Ø®ØªØ§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ùˆ Ø±ÙˆØ§Ø¨Ø·</p>
                        </div>
                    </div>
                    <div class="roadmap-step completed">
                        <div class="step-number">2</div>
                        <div class="step-content">
                            <h4>Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª</h4>
                            <p>Ø³ÛŒØ³ØªÙ… ÙˆØ±ÙˆØ¯ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø¬Ù„Ø³Ø§Øª</p>
                        </div>
                    </div>
                    <div class="roadmap-step completed">
                        <div class="step-number">3</div>
                        <div class="step-content">
                            <h4>Ù…ÙˆØªÙˆØ± Ù…Ø¬ÙˆØ²Ù‡Ø§</h4>
                            <p>Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ùˆ Ø¨Ø±Ø±Ø³ÛŒ Ù…Ø¬ÙˆØ²Ù‡Ø§</p>
                        </div>
                    </div>
                    <div class="roadmap-step">
                        <div class="step-number">4</div>
                        <div class="step-content">
                            <h4>ØªØ³Øª Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ</h4>
                            <p>Ø¢Ø²Ù…ÙˆÙ† Ø¹Ù…Ù„Ú©Ø±Ø¯ Ùˆ Ø§Ù…Ù†ÛŒØª</p>
                        </div>
                    </div>
                    <div class="roadmap-step">
                        <div class="step-number">5</div>
                        <div class="step-content">
                            <h4>Ø§Ø³ØªÙ‚Ø±Ø§Ø± Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ</h4>
                            <p>Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ Ù…Ø­ÛŒØ· ØªÙˆÙ„ÛŒØ¯</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="contact-section">
                <h3>ğŸ“ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ùˆ Ù…Ø´Ø§ÙˆØ±Ù‡</h3>
                <p>Ø¨Ø±Ø§ÛŒ Ø¯Ø±ÛŒØ§ÙØª Ù…Ø´Ø§ÙˆØ±Ù‡ ØªØ®ØµØµÛŒØŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ ÛŒØ§ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ÙÙ†ÛŒØŒ Ø¨Ø§ ØªÛŒÙ… ØªÙˆØ³Ø¹Ù‡ Ø¯Ø± Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§Ø´ÛŒØ¯.</p>
                
                <div class="contact-grid">
                    <div class="contact-item">
                        <div class="contact-icon">ğŸ’¬</div>
                        <h4>Ù…Ø´Ø§ÙˆØ±Ù‡ ÙÙ†ÛŒ</h4>
                        <p>Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ø¯Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ø¨Ù‡ØªØ±ÛŒÙ† Ø±Ø§Ù‡â€ŒØ­Ù„</p>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">ğŸ› ï¸</div>
                        <h4>Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³ÙØ§Ø±Ø´ÛŒ</h4>
                        <p>ØªÙˆØ³Ø¹Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ø®Ø§Øµ</p>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">ğŸ”§</div>
                        <h4>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ ÙÙ†ÛŒ</h4>
                        <p>Ø­Ù„ Ù…Ø´Ú©Ù„Ø§Øª Ùˆ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒâ€ŒÙ‡Ø§</p>
                    </div>
                    <div class="contact-item">
                        <div class="contact-icon">ğŸ“š</div>
                        <h4>Ø¢Ù…ÙˆØ²Ø´</h4>
                        <p>Ø¯ÙˆØ±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ ØªØ®ØµØµÛŒ</p>
                    </div>
                </div>
            </div>

            <div class="thanks-section">
                <h3>ğŸ™ ØªØ´Ú©Ø± Ùˆ Ù‚Ø¯Ø±Ø¯Ø§Ù†ÛŒ</h3>
                <p>
                    Ø§Ø² Ø´Ù…Ø§ Ú©Ù‡ ÙˆÙ‚Øª Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø§ÛŒÙ† Ù…Ø³ØªÙ†Ø¯ Ø§Ø®ØªØµØ§Øµ Ø¯Ø§Ø¯ÛŒØ¯ØŒ ØµÙ…ÛŒÙ…Ø§Ù†Ù‡ ØªØ´Ú©Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. 
                    Ø§Ù…ÛŒØ¯ÙˆØ§Ø±ÛŒÙ… Ø§ÛŒÙ† Ø±Ø§Ù‡â€ŒØ­Ù„ Ø¨ØªÙˆØ§Ù†Ø¯ Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ø§Ù…Ù†ÛŒØªÛŒ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØªÛŒ Ø³Ø§Ø²Ù…Ø§Ù† Ø´Ù…Ø§ Ø±Ø§ Ø¨Ù‡ Ø¨Ù‡ØªØ±ÛŒÙ† Ø´Ú©Ù„ Ù¾Ø§Ø³Ø® Ø¯Ù‡Ø¯.
                </p>
                
                <div class="final-quote">
                    <blockquote>
                        "Ø§Ù…Ù†ÛŒØª ÙˆØ§Ù‚Ø¹ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ø­Ø§ØµÙ„ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒØŒ ÙØ±Ø¢ÛŒÙ†Ø¯ Ùˆ Ø§Ù†Ø³Ø§Ù† Ø¯Ø± Ù‡Ù…Ø§Ù‡Ù†Ú¯ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø§ ÛŒÚ©Ø¯ÛŒÚ¯Ø± Ø¹Ù…Ù„ Ú©Ù†Ù†Ø¯."
                    </blockquote>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>ğŸ”— Ù…Ù†Ø§Ø¨Ø¹ Ù…ÙÛŒØ¯</h4>
                    <ul>
                        <li><a href="https://docs.djangoproject.com/" target="_blank">Django Documentation</a></li>
                        <li><a href="https://www.django-rest-framework.org/" target="_blank">Django REST Framework</a></li>
                        <li><a href="https://postgis.net/" target="_blank">PostGIS</a></li>
                        <li><a href="https://redis.io/documentation" target="_blank">Redis Documentation</a></li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>ğŸ› ï¸ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§</h4>
                    <ul>
                        <li>Django 4.2+</li>
                        <li>PostgreSQL + PostGIS</li>
                        <li>Redis Cache</li>
                        <li>Celery</li>
                        <li>Docker</li>
                        <li>AWS/Cloud Services</li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>ğŸ“Š Ø¢Ù…Ø§Ø± Ù…Ø³ØªÙ†Ø¯</h4>
                    <ul>
                        <li>7 Ù…Ø¯Ù„ Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒ Ø§ØµÙ„ÛŒ</li>
                        <li>15+ Ø³Ù†Ø§Ø±ÛŒÙˆ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ</li>
                        <li>50+ Ú©Ø¯ Ù†Ù…ÙˆÙ†Ù‡</li>
                        <li>100+ Ù†Ú©ØªÙ‡ ØªØ®ØµØµÛŒ</li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4>ğŸŒŸ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒØ¯ÛŒ</h4>
                    <ul>
                        <li>Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª</li>
                        <li>Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù‚Ø´â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡</li>
                        <li>Ø§Ù…Ù†ÛŒØª Ú†Ù†Ø¯Ù„Ø§ÛŒÙ‡</li>
                        <li>Ù…Ù‚ÛŒØ§Ø³â€ŒÙ¾Ø°ÛŒØ±ÛŒ Ø¨Ø§Ù„Ø§</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-divider"></div>
            
            <div class="footer-bottom">
                <div class="footer-logo">
                    <span class="logo-icon">ğŸŒ</span>
                    <span class="logo-text">Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª</span>
                </div>
                
                <div class="footer-meta">
                    <p>
                        Â© 2024 - Ø·Ø±Ø§Ø­ÛŒ Ùˆ ØªÙˆØ³Ø¹Ù‡ Ø¨Ø§ â¤ï¸ Ø¨Ø±Ø§ÛŒ Ø¬Ø§Ù…Ø¹Ù‡ Django Ø§ÛŒØ±Ø§Ù†
                        <br>
                        Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: <span id="lastUpdate">29 Ø³Ù¾ØªØ§Ù…Ø¨Ø± 2025</span>
                    </p>
                </div>
                
                <div class="footer-badges">
                    <span class="badge-item">Django 4.2+</span>
                    <span class="badge-item">PostGIS</span>
                    <span class="badge-item">Redis</span>
                    <span class="badge-item">Docker Ready</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- Back to Top Button -->
    <button id="backToTop" class="back-to-top" onclick="scrollToTop()" title="Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ø¨Ø§Ù„Ø§">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 19V5M5 12L12 5L19 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </button>

    <!-- Floating Action Menu -->
    <div class="floating-menu">
        <button class="fab-main" onclick="toggleFabMenu()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="1" fill="currentColor"/>
                <circle cx="19" cy="12" r="1" fill="currentColor"/>
                <circle cx="5" cy="12" r="1" fill="currentColor"/>
            </svg>
        </button>
        
        <div class="fab-menu" id="fabMenu">
            <button class="fab-item" onclick="printDocument()" title="Ú†Ø§Ù¾ Ù…Ø³ØªÙ†Ø¯">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <polyline points="6,9 6,2 18,2 18,9" stroke="currentColor" stroke-width="2" fill="none"/>
                    <path d="M6,18H4a2,2 0,0 1,-2-2V11a2,2 0,0 1,2-2H20a2,2 0,0 1,2,2v5a2,2 0,0 1,-2,2H18" stroke="currentColor" stroke-width="2" fill="none"/>
                    <rect x="6" y="14" width="12" height="8" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>
            </button>
            
            <button class="fab-item" onclick="shareDocument()" title="Ø§Ø´ØªØ±Ø§Ú©â€ŒÚ¯Ø°Ø§Ø±ÛŒ">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="18" cy="5" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                    <circle cx="6" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                    <circle cx="18" cy="19" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
                    <line x1="8.59" y1="13.51" x2="15.42" y2="17.49" stroke="currentColor" stroke-width="2"/>
                    <line x1="15.41" y1="6.51" x2="8.59" y2="10.49" stroke="currentColor" stroke-width="2"/>
                </svg>
            </button>
            
            <button class="fab-item" onclick="downloadPDF()" title="Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            
            <button class="fab-item" onclick="toggleDarkMode()" title="Ø­Ø§Ù„Øª ØªØ§Ø±ÛŒÚ©/Ø±ÙˆØ´Ù†">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
    </div>

    <!-- JavaScript -->
    <script>
        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Back to top button functionality
        window.onscroll = function() {
            const backToTopButton = document.getElementById('backToTop');
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                backToTopButton.style.display = 'flex';
            } else {
                backToTopButton.style.display = 'none';
            }
        };

        function scrollToTop() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }

        // Progress bar
        window.addEventListener('scroll', function() {
            const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const progress = (scrollTop / scrollHeight) * 100;
            
            let progressBar = document.getElementById('progressBar');
            if (!progressBar) {
                progressBar = document.createElement('div');
                progressBar.id = 'progressBar';
                progressBar.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: ${progress}%;
                    height: 4px;
                    background: linear-gradient(90deg, #4CAF50, #2196F3);
                    z-index: 9999;
                    transition: width 0.3s ease;
                `;
                document.body.appendChild(progressBar);
            } else {
                progressBar.style.width = progress + '%';
            }
        });

        // Code block copy functionality
        document.querySelectorAll('.code-block').forEach(block => {
            const copyButton = document.createElement('button');
            copyButton.className = 'copy-button';
            copyButton.innerHTML = 'ğŸ“‹';
            copyButton.title = 'Ú©Ù¾ÛŒ Ú©Ø¯';
            copyButton.onclick = function() {
                navigator.clipboard.writeText(block.textContent).then(() => {
                    copyButton.innerHTML = 'âœ…';
                    copyButton.style.background = '#4CAF50';
                    setTimeout(() => {
                        copyButton.innerHTML = 'ğŸ“‹';
                        copyButton.style.background = '#2196F3';
                    }, 2000);
                });
            };
            block.style.position = 'relative';
            block.appendChild(copyButton);
        });

        // Floating Action Button Menu
        function toggleFabMenu() {
            const fabMenu = document.getElementById('fabMenu');
            fabMenu.classList.toggle('active');
        }

        // Close FAB menu when clicking outside
        document.addEventListener('click', function(event) {
            const fabMenu = document.getElementById('fabMenu');
            const fabMain = document.querySelector('.fab-main');
            
            if (!fabMenu.contains(event.target) && !fabMain.contains(event.target)) {
                fabMenu.classList.remove('active');
            }
        });

        // Print functionality
        function printDocument() {
            window.print();
        }

        // Share functionality
        function shareDocument() {
            if (navigator.share) {
                navigator.share({
                    title: 'Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ',
                    text: 'Ù…Ø³ØªÙ†Ø¯ Ú©Ø§Ù…Ù„ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ø§ Django',
                    url: window.location.href
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                navigator.clipboard.writeText(window.location.href).then(() => {
                    alert('Ù„ÛŒÙ†Ú© Ø¯Ø± Ú©Ù„ÛŒÙ¾â€ŒØ¨ÙˆØ±Ø¯ Ú©Ù¾ÛŒ Ø´Ø¯!');
                });
            }
        }

        // Download PDF functionality
        function downloadPDF() {
            // This would typically integrate with a PDF generation service
            alert('Ù‚Ø§Ø¨Ù„ÛŒØª Ø¯Ø§Ù†Ù„ÙˆØ¯ PDF Ø¨Ù‡ Ø²ÙˆØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø®ÙˆØ§Ù‡Ø¯ Ø´Ø¯!');
        }

        // Dark mode toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }

        // Load dark mode preference
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
        }

        // Search functionality
        function initializeSearch() {
            const searchInput = document.createElement('input');
            searchInput.type = 'text';
            searchInput.placeholder = 'Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ù…Ø³ØªÙ†Ø¯...';
            searchInput.className = 'search-input';
            searchInput.style.cssText = `
                position: fixed;
                top: 70px;
                right: 20px;
                width: 250px;
                padding: 10px;
                border: 2px solid #4CAF50;
                border-radius: 25px;
                font-family: 'Vazir', sans-serif;
                z-index: 1000;
                display: none;
            `;

            document.body.appendChild(searchInput);

            // Add search button to FAB menu
            const searchButton = document.createElement('button');
            searchButton.className = 'fab-item';
            searchButton.title = 'Ø¬Ø³ØªØ¬Ùˆ';
            searchButton.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2"/><path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2"/></svg>';
            searchButton.onclick = function() {
                searchInput.style.display = searchInput.style.display === 'none' ? 'block' : 'none';
                if (searchInput.style.display === 'block') {
                    searchInput.focus();
                }
            };

            document.getElementById('fabMenu').appendChild(searchButton);

            // Search functionality
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const sections = document.querySelectorAll('.model-section, .example-section');
                
                sections.forEach(section => {
                    const text = section.textContent.toLowerCase();
                    if (text.includes(searchTerm) || searchTerm === '') {
                        section.style.display = 'block';
                        section.style.opacity = '1';
                    } else {
                        section.style.opacity = '0.3';
                    }
                });
            });
        }

        // Initialize search when page loads
        document.addEventListener('DOMContentLoaded', initializeSearch);

        // Table of Contents generator
        function generateTOC() {
            const toc = document.createElement('div');
            toc.className = 'table-of-contents';
            toc.innerHTML = '<h3>ÙÙ‡Ø±Ø³Øª Ù…Ø·Ø§Ù„Ø¨</h3>';
            
            const headers = document.querySelectorAll('h2, h3');
            const tocList = document.createElement('ul');
            
            headers.forEach((header, index) => {
                const li = document.createElement('li');
                const a = document.createElement('a');
                
                // Create unique ID if doesn't exist
                if (!header.id) {
                    header.id = `section-${index}`;
                }
                
                a.href = `#${header.id}`;
                a.textContent = header.textContent;
                a.className = header.tagName.toLowerCase();
                
                li.appendChild(a);
                tocList.appendChild(li);
            });
            
            toc.appendChild(tocList);
            
            // Insert TOC after header
            const header = document.querySelector('.header');
            header.insertAdjacentElement('afterend', toc);
        }

        // Initialize TOC
        document.addEventListener('DOMContentLoaded', generateTOC);

        // Lazy loading for code blocks
        function initializeLazyLoading() {
            const codeBlocks = document.querySelectorAll('.code-block');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('loaded');
                    }
                });
            });
            
            codeBlocks.forEach(block => {
                observer.observe(block);
            });
        }

        // Initialize lazy loading
        document.addEventListener('DOMContentLoaded', initializeLazyLoading);

        // Analytics (placeholder)
        function trackEvent(action, category, label) {
            // Integration with analytics service would go here
            console.log(`Event: ${action}, Category: ${category}, Label: ${label}`);
        }

        // Track user interactions
        document.addEventListener('click', function(e) {
            if (e.target.matches('a[href^="#"]')) {
                trackEvent('navigation', 'internal_link', e.target.getAttribute('href'));
            }
            
            if (e.target.matches('.copy-button')) {
                trackEvent('interaction', 'code_copy', 'code_block');
            }
        });

        // Performance monitoring
        window.addEventListener('load', function() {
            const loadTime = performance.timing.loadEventEnd - performance.timing.navigationStart;
            console.log(`Page load time: ${loadTime}ms`);
            
            // Report performance metrics
            trackEvent('performance', 'page_load_time', Math.round(loadTime / 1000));
        });

        // Update last modified date
        document.getElementById('lastUpdate').textContent = new Date().toLocaleDateString('fa-IR');

        console.log('ğŸŒ Ø³ÛŒØ³ØªÙ… Ú©Ù†ØªØ±Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø¨ØªÙ†ÛŒ Ø¨Ø± Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ - Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ù‡ Ú©Ø§Ø±!');
        console.log('ğŸ“š Ù…Ø³ØªÙ†Ø¯ Ú©Ø§Ù…Ù„ Ø¨Ø§ ' + document.querySelectorAll('.model-section').length + ' Ø¨Ø®Ø´ Ø§ØµÙ„ÛŒ');
        console.log('ğŸ”§ ' + document.querySelectorAll('.code-block').length + ' Ù†Ù…ÙˆÙ†Ù‡ Ú©Ø¯ Ø§Ø±Ø§Ø¦Ù‡ Ø´Ø¯Ù‡');
    </script>

    <!-- Additional CSS for new features -->
    <style>
        /* Dark mode styles */
        .dark-mode {
            --bg-color: #1a1a1a;
            --text-color: #e0e0e0;
            --card-bg: #2d2d2d;
            --border-color: #404040;
            --accent-color: #4CAF50;
        }

        .dark-mode body {
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        .dark-mode .model-section {
            background: var(--card-bg);
            border-color: var(--border-color);
        }

        .dark-mode .code-block {
            background: #1e1e1e;
            border-color: var(--border-color);
        }

        /* Floating Action Button styles */
        .floating-menu {
            position: fixed;
            bottom: 30px;
            left: 30px;
            z-index: 1000;
        }

        .fab-main {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fab-main:hover {
            background: #45a049;
            transform: scale(1.1);
        }

        .fab-menu {
            position: absolute;
            bottom: 70px;
            left: 0;
            display: flex;
            flex-direction: column;
            gap: 10px;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            transition: all 0.3s ease;
        }

        .fab-menu.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .fab-item {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: #2196F3;
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fab-item:hover {
            background: #1976D2;
            transform: scale(1.1);
        }

        /* Table of Contents styles */
        .table-of-contents {
            background: #f8f9fa;
            border: 2px solid #4CAF50;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            max-width: 300px;
            position: sticky;
            top: 20px;
            float: right;
            margin-left: 20px;
        }

        .table-of-contents h3 {
            margin-top: 0;
            color: #4CAF50;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 10px;
        }

        .table-of-contents ul {
            list-style: none;
            padding: 0;
        }

        .table-of-contents li {
            margin: 8px 0;
        }

        .table-of-contents a {
            text-decoration: none;
            color: #333;
            padding: 5px 0;
            display: block;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .table-of-contents a:hover {
            background: #e8f5e8;
            padding-right: 10px;
        }

        .table-of-contents a.h3 {
            padding-right: 15px;
            font-size: 0.9em;
            color: #666;
        }

        /* Search input styles */
        .search-input {
            font-family: 'Vazir', sans-serif !important;
            direction: rtl;
        }

        .search-input:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(76, 175, 80, 0.3);
        }

        /* Lazy loading animation */
        .code-block {
            opacity: 0.7;
            transform: translateY(20px);
            transition: all 0.6s ease;
        }

        .code-block.loaded {
            opacity: 1;
            transform: translateY(0);
        }

        /* Print styles */
        @media print {
            .floating-menu,
            .back-to-top,
            .copy-button,
            #progressBar,
            .search-input,
            .table-of-contents {
                display: none !important;
            }
            
            .container {
                max-width: none !important;
                margin: 0 !important;
                padding: 0 !important;
            }
            
            .model-section {
                break-inside: avoid;
                page-break-inside: avoid;
                margin-bottom: 20px;
            }
            
            .code-block {
                background: #f5f5f5 !important;
                border: 1px solid #ddd !important;
                font-size: 10px !important;
                line-height: 1.2 !important;
            }
            
            .header {
                background: #4CAF50 !important;
                color: white !important;
                -webkit-print-color-adjust: exact !important;
                color-adjust: exact !important;
            }
        }

        /* Responsive design improvements */
        @media (max-width: 768px) {
            .table-of-contents {
                position: static;
                float: none;
                max-width: 100%;
                margin: 20px 0;
            }
            
            .floating-menu {
                bottom: 20px;
                left: 20px;
            }
            
            .fab-main {
                width: 48px;
                height: 48px;
            }
            
            .fab-item {
                width: 40px;
                height: 40px;
            }
            
            .search-input {
                width: calc(100% - 40px);
                right: 20px;
            }
        }
    </style>
</body>
</html>
