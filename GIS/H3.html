<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/vs2015.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/yaml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/dockerfile.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/shell.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/sql.min.js"></script>

    <title>Ù¾Ø±ÙˆÚ˜Ù‡ Ø¹Ù…Ù„ÛŒ: Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ ØªØ§Ú©Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† Ø¨Ø§ H3</title>
    <style>
        @import url('https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn-font@v33.003/dist/font-face.css');

        :root {
            --primary-green: #2e7d32;
            --secondary-green: #4caf50;
            --light-green: #81c784;
            --bg-color: #f1f8e9;
            --text-color: #1b5e20;
            --code-bg: #1e1e1e;
            --white: #ffffff;
            --warning: #ff9800;
            --error: #f44336;
            --info: #2196f3;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.8;
        }

        header {
            background: linear-gradient(135deg, var(--primary-green), var(--secondary-green));
            color: white;
            padding: 60px 20px;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.3em;
            opacity: 0.95;
            margin: 10px 0;
        }

        .container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px;
        }

        .section {
            background: var(--white);
            border-radius: 15px;
            padding: 40px;
            margin-bottom: 40px;
            box-shadow: 0 5px 25px rgba(0,0,0,0.08);
            border-right: 6px solid var(--secondary-green);
        }

        .section-number {
            display: inline-block;
            background: var(--light-green);
            color: white;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            text-align: center;
            line-height: 45px;
            font-weight: bold;
            font-size: 1.3em;
            margin-left: 15px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        h2 {
            color: var(--primary-green);
            border-bottom: 3px solid var(--light-green);
            padding-bottom: 15px;
            margin-bottom: 25px;
            font-size: 2.2em;
            display: flex;
            align-items: center;
        }

        h3 {
            color: var(--secondary-green);
            margin-top: 35px;
            margin-bottom: 20px;
            font-size: 1.6em;
            padding-right: 15px;
            border-right: 4px solid var(--light-green);
        }

        h4 {
            color: var(--primary-green);
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        p {
            margin: 15px 0;
            font-size: 1.1em;
            line-height: 2;
        }

        .info-box {
            background: #e8f5e9;
            border: 2px solid var(--light-green);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            border-right: 6px solid var(--secondary-green);
        }

        .warning-box {
            background: #fff3e0;
            border: 2px solid var(--warning);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            border-right: 6px solid var(--warning);
        }

        .tip-box {
            background: #e3f2fd;
            border: 2px solid var(--info);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            border-right: 6px solid var(--info);
        }

        .code-header {
            direction: ltr;
            background: var(--secondary-green);
            color: white;
            padding: 12px 20px;
            border-radius: 10px 10px 0 0;
            font-weight: bold;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .code-block {
            direction: ltr;
            text-align: left;
            background-color: var(--code-bg);
            color: #d4d4d4;
            padding: 25px;
            border-radius: 0 0 10px 10px;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.95em;
            overflow-x: auto;
            margin: 0 0 25px 0;
            border-left: 5px solid var(--secondary-green);
            line-height: 1.8;
            white-space: pre;
            tab-size: 4;
        }

        .keyword { color: #569cd6; font-weight: bold; }
        .string { color: #ce9178; }
        .function { color: #dcdcaa; }
        .comment { color: #6a9955; font-style: italic; }
        .number { color: #b5cea8; }
        .operator { color: #d4d4d4; }
        .class-name { color: #4ec9b0; }
        .decorator { color: #c586c0; }

        .file-structure {
            direction: ltr;
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid var(--secondary-green);
            font-family: 'Consolas', monospace;
            margin: 20px 0;
        }

        .file-structure pre {
            margin: 0;
            line-height: 1.8;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 15px rgba(0,0,0,0.05);
        }

        th, td {
            padding: 18px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }

        th {
            background-color: var(--secondary-green);
            color: white;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        tr:hover {
            background-color: #f1f8e9;
        }

        ul, ol {
            margin: 20px 0;
            padding-right: 30px;
        }

        ul li, ol li {
            margin: 12px 0;
            line-height: 1.9;
            font-size: 1.05em;
        }

        .step-number {
            display: inline-block;
            background: var(--secondary-green);
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            font-weight: bold;
            margin-left: 10px;
        }

        .output-box {
            direction: ltr;
            background: #263238;
            color: #aed581;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Consolas', monospace;
            margin: 20px 0;
            border-left: 5px solid var(--light-green);
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            background: var(--primary-green);
            color: white;
            margin-top: 60px;
            font-size: 1.1em;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }
            
            .section {
                padding: 25px;
            }

            h2 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>

    <header>
        <h1>ğŸš• Ù¾Ø±ÙˆÚ˜Ù‡ Ø¹Ù…Ù„ÛŒ: Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ ØªØ§Ú©Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ†</h1>
        <p>ÛŒÚ© Ø³ÛŒØ³ØªÙ… Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ ØªØ±Ø§Ú©Ù…ØŒ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§ Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ H3</p>
        <p style="font-size: 1em; margin-top: 15px; opacity: 0.9;">
            ğŸ“ ØªØ­Ù„ÛŒÙ„ Real-Time | ğŸ—ºï¸ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ | ğŸ“Š Dashboard ØªØ­Ù„ÛŒÙ„ÛŒ
        </p>
    </header>

    <div class="container">

        <!-- Ù…Ù‚Ø¯Ù…Ù‡ Ù¾Ø±ÙˆÚ˜Ù‡ -->
        <div class="section">
            <h2>
                <span class="section-number">1</span>
                Ù…Ø¹Ø±ÙÛŒ Ù¾Ø±ÙˆÚ˜Ù‡
            </h2>
            
            <div class="info-box">
                <h4>ğŸ¯ Ù‡Ø¯Ù Ù¾Ø±ÙˆÚ˜Ù‡</h4>
                <p>
                    Ø³Ø§Ø®Øª ÛŒÚ© Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ Ø¬Ø§Ù…Ø¹ Ø¨Ø±Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³ ØªØ§Ú©Ø³ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† Ú©Ù‡ Ø¨ØªÙˆØ§Ù†Ø¯:
                </p>
                <ul>
                    <li>ØªØ±Ø§Ú©Ù… Ø³ÙØ±Ù‡Ø§ Ø±Ø§ Ø¯Ø± Ù…Ù†Ø§Ø·Ù‚ Ù…Ø®ØªÙ„Ù Ø´Ù‡Ø± ØªØ­Ù„ÛŒÙ„ Ú©Ù†Ø¯</li>
                    <li>Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§ (Dynamic Pricing) Ø¨Ø± Ø§Ø³Ø§Ø³ ØªÙ‚Ø§Ø¶Ø§ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡Ø¯</li>
                    <li>Ù…Ù†Ø§Ø·Ù‚ Ù¾Ø±ØªÙ‚Ø§Ø¶Ø§ (Hotspots) Ø±Ø§ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ú©Ù†Ø¯</li>
                    <li>Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø±Ø§Ø±ØªÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ ØªÙˆÙ„ÛŒØ¯ Ú©Ù†Ø¯</li>
                    <li>Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ ØªØ­Ù„ÛŒÙ„ÛŒ Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª Ø§Ø±Ø§Ø¦Ù‡ Ø¯Ù‡Ø¯</li>
                </ul>
            </div>

            <h3>ğŸ› ï¸ ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡</h3>
            <ul>
                <li><strong>Python 3.9+</strong> - Ø²Ø¨Ø§Ù† Ø§ØµÙ„ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ</li>
                <li><strong>H3</strong> - Ø´Ø§Ø®Øµâ€ŒØ¨Ù†Ø¯ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ</li>
                <li><strong>PostgreSQL + PostGIS</strong> - Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ Ù…Ú©Ø§Ù†ÛŒ</li>
                <li><strong>FastAPI</strong> - Ø³Ø§Ø®Øª REST API</li>
                <li><strong>Pandas</strong> - ØªØ­Ù„ÛŒÙ„ Ø¯Ø§Ø¯Ù‡</li>
                <li><strong>Folium</strong> - Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ</li>
                <li><strong>Redis</strong> - Cache Ùˆ Real-time Processing</li>
            </ul>

            <h3>ğŸ“‚ Ø³Ø§Ø®ØªØ§Ø± Ù¾Ø±ÙˆÚ˜Ù‡</h3>
            <div class="file-structure">
                <pre>
taxi_analytics/
â”‚
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main.py              # FastAPI application
â”‚   â”œâ”€â”€ config.py            # ØªÙ†Ø¸ÛŒÙ…Ø§Øª
â”‚   â”œâ”€â”€ database.py          # Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³
â”‚   â”‚
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ ride.py          # Ù…Ø¯Ù„ Ø³ÙØ±
â”‚   â”‚   â””â”€â”€ driver.py        # Ù…Ø¯Ù„ Ø±Ø§Ù†Ù†Ø¯Ù‡
â”‚   â”‚
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ h3_service.py    # Ø³Ø±ÙˆÛŒØ³ H3
â”‚   â”‚   â”œâ”€â”€ pricing.py       # Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§
â”‚   â”‚   â””â”€â”€ analytics.py     # ØªØ­Ù„ÛŒÙ„ Ø¯Ø§Ø¯Ù‡
â”‚   â”‚
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ rides.py         # API Ø³ÙØ±Ù‡Ø§
â”‚   â”‚   â””â”€â”€ analytics.py     # API ØªØ­Ù„ÛŒÙ„
â”‚   â”‚
â”‚   â””â”€â”€ utils/
â”‚       â”œâ”€â”€ __init__.py
â”‚       â””â”€â”€ helpers.py
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                 # Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø®Ø§Ù…
â”‚   â””â”€â”€ processed/           # Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø´Ø¯Ù‡
â”‚
â”œâ”€â”€ notebooks/
â”‚   â””â”€â”€ analysis.ipynb       # ØªØ­Ù„ÛŒÙ„ Ø§Ú©ØªØ´Ø§ÙÛŒ
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ test_h3_service.py
â”‚   â””â”€â”€ test_pricing.py
â”‚
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env.example
â””â”€â”€ README.md
                </pre>
            </div>
        </div>

        <!-- Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ -->
        <div class="section">
            <h2>
                <span class="section-number">2</span>
                Ù†ØµØ¨ Ùˆ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ
            </h2>

            <h3>ğŸ“¦ Ù†ØµØ¨ Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§</h3>
            
            <div class="code-header">ğŸ“„ requirements.txt</div>
            <div class="code-block">
<span class="comment"># Core</span>
fastapi==<span class="number">0.104.1</span>
uvicorn[standard]==<span class="number">0.24.0</span>
pydantic==<span class="number">2.5.0</span>
python-dotenv==<span class="number">1.0.0</span>

<span class="comment"># Database</span>
psycopg2-binary==<span class="number">2.9.9</span>
sqlalchemy==<span class="number">2.0.23</span>
geoalchemy2==<span class="number">0.14.2</span>

<span class="comment"># H3 and Geo</span>
h3==<span class="number">3.7.6</span>
shapely==<span class="number">2.0.2</span>
geopandas==<span class="number">0.14.1</span>

<span class="comment"># Data Analysis</span>
pandas==<span class="number">2.1.3</span>
numpy==<span class="number">1.26.2</span>

<span class="comment"># Visualization</span>
folium==<span class="number">0.15.0</span>
matplotlib==<span class="number">3.8.2</span>

<span class="comment"># Cache</span>
redis==<span class="number">5.0.1</span>

<span class="comment"># Testing</span>
pytest==<span class="number">7.4.3</span>
pytest-asyncio==<span class="number">0.21.1</span>
            </div>

            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø­ÛŒØ· Ù…Ø¬Ø§Ø²ÛŒ</span>
python -m venv venv

<span class="comment"># ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ù…Ø­ÛŒØ· Ù…Ø¬Ø§Ø²ÛŒ</span>
<span class="comment"># Ø¯Ø± Windows:</span>
venv\Scripts\activate

<span class="comment"># Ø¯Ø± Linux/Mac:</span>
source venv/bin/activate

<span class="comment"># Ù†ØµØ¨ Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§</span>
pip install -r requirements.txt
            </div>

            <h3>ğŸ˜ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PostgreSQL Ø¨Ø§ Docker</h3>
            
            <div class="code-header">ğŸ³ docker-compose.yml</div>
            <div class="code-block">
<span class="keyword">version</span>: <span class="string">'3.8'</span>

<span class="keyword">services</span>:
  <span class="keyword">postgres</span>:
    <span class="keyword">image</span>: postgis/postgis:<span class="number">15</span>-<span class="number">3.3</span>
    <span class="keyword">environment</span>:
      POSTGRES_USER: taxi_user
      POSTGRES_PASSWORD: taxi_pass
      POSTGRES_DB: taxi_db
    <span class="keyword">ports</span>:
      - <span class="string">"5432:5432"</span>
    <span class="keyword">volumes</span>:
      - postgres_data:/var/lib/postgresql/data

  <span class="keyword">redis</span>:
    <span class="keyword">image</span>: redis:<span class="number">7</span>-alpine
    <span class="keyword">ports</span>:
      - <span class="string">"6379:6379"</span>
    <span class="keyword">volumes</span>:
      - redis_data:/data

<span class="keyword">volumes</span>:
  postgres_data:
  redis_data:
            </div>

            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§</span>
docker-compose up -d

<span class="comment"># Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¶Ø¹ÛŒØª</span>
docker-compose ps
            </div>

            <h3>âš™ï¸ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø­ÛŒØ·ÛŒ</h3>
            
            <div class="code-header">ğŸ“„ .env</div>
            <div class="code-block">
<span class="comment"># Database</span>
DATABASE_URL=postgresql://taxi_user:taxi_pass@localhost:<span class="number">5432</span>/taxi_db

<span class="comment"># Redis</span>
REDIS_URL=redis://localhost:<span class="number">6379</span>/<span class="number">0</span>

<span class="comment"># H3 Configuration</span>
H3_RESOLUTION=<span class="number">9</span>

<span class="comment"># API</span>
API_HOST=<span class="number">0.0.0.0</span>
API_PORT=<span class="number">8000</span>
DEBUG=<span class="keyword">True</span>
            </div>
        </div>

        <!-- Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡ -->
        <div class="section">
            <h2>
                <span class="section-number">3</span>
                Ù…Ø¯Ù„â€ŒÙ‡Ø§ÛŒ Ù¾Ø§ÛŒÚ¯Ø§Ù‡ Ø¯Ø§Ø¯Ù‡
            </h2>

            <h3>ğŸ—„ï¸ Ø³Ø§Ø®ØªØ§Ø± Ø¬Ø¯Ø§ÙˆÙ„</h3>

            <div class="code-header">ğŸ app/models/ride.py</div>
            <div class="code-block">
<span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> Column, Integer, Float, String, DateTime, Boolean
<span class="keyword">from</span> sqlalchemy.ext.declarative <span class="keyword">import</span> declarative_base
<span class="keyword">from</span> geoalchemy2 <span class="keyword">import</span> Geometry
<span class="keyword">from</span> datetime <span class="keyword">import</span> datetime

Base = <span class="function">declarative_base</span>()

<span class="keyword">class</span> <span class="class-name">Ride</span>(Base):
    <span class="string">"""Ù…Ø¯Ù„ Ø³ÙØ± ØªØ§Ú©Ø³ÛŒ"""</span>
    __tablename__ = <span class="string">'rides'</span>

    <span class="comment"># Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§</span>
    id = <span class="function">Column</span>(Integer, primary_key=<span class="keyword">True</span>, index=<span class="keyword">True</span>)
    driver_id = <span class="function">Column</span>(Integer, index=<span class="keyword">True</span>)
    passenger_id = <span class="function">Column</span>(Integer, index=<span class="keyword">True</span>)
    
    <span class="comment"># Ù…ÙˆÙ‚Ø¹ÛŒØª Ù…Ú©Ø§Ù†ÛŒ</span>
    pickup_location = <span class="function">Column</span>(<span class="function">Geometry</span>(<span class="string">'POINT'</span>, srid=<span class="number">4326</span>))
    dropoff_location = <span class="function">Column</span>(<span class="function">Geometry</span>(<span class="string">'POINT'</span>, srid=<span class="number">4326</span>))
    
    <span class="comment"># H3 Indices</span>
    pickup_h3 = <span class="function">Column</span>(<span class="function">String</span>(<span class="number">20</span>), index=<span class="keyword">True</span>)
    dropoff_h3 = <span class="function">Column</span>(<span class="function">String</span>(<span class="number">20</span>), index=<span class="keyword">True</span>)
    
    <span class="comment"># Ø²Ù…Ø§Ù†</span>
    request_time = <span class="function">Column</span>(DateTime, default=datetime.utcnow)
    pickup_time = <span class="function">Column</span>(DateTime, nullable=<span class="keyword">True</span>)
    dropoff_time = <span class="function">Column</span>(DateTime, nullable=<span class="keyword">True</span>)
    
    <span class="comment"># Ù‚ÛŒÙ…Øª</span>
    base_price = <span class="function">Column</span>(Float)
    surge_multiplier = <span class="function">Column</span>(Float, default=<span class="number">1.0</span>)
    final_price = <span class="function">Column</span>(Float)
    
    <span class="comment"># ÙˆØ¶Ø¹ÛŒØª</span>
    status = <span class="function">Column</span>(<span class="function">String</span>(<span class="number">20</span>))  <span class="comment"># requested, accepted, completed, cancelled</span>
    distance_km = <span class="function">Column</span>(Float)
    duration_minutes = <span class="function">Column</span>(Integer)
    
    <span class="keyword">def</span> <span class="function">__repr__</span>(<span class="keyword">self</span>):
        <span class="keyword">return</span> <span class="string">f"&lt;Ride {self.id}: {self.status}&gt;"</span>


<span class="keyword">class</span> <span class="class-name">HexagonStats</span>(Base):
    <span class="string">"""Ø¢Ù…Ø§Ø± ØªØ¬Ù…ÛŒØ¹ÛŒ Ù‡Ø± Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ"""</span>
    __tablename__ = <span class="string">'hexagon_stats'</span>

    id = <span class="function">Column</span>(Integer, primary_key=<span class="keyword">True</span>)
    h3_index = <span class="function">Column</span>(<span class="function">String</span>(<span class="number">20</span>), unique=<span class="keyword">True</span>, index=<span class="keyword">True</span>)
    
    <span class="comment"># Ø¢Ù…Ø§Ø± Ø³ÙØ±Ù‡Ø§</span>
    total_pickups = <span class="function">Column</span>(Integer, default=<span class="number">0</span>)
    total_dropoffs = <span class="function">Column</span>(Integer, default=<span class="number">0</span>)
    avg_wait_time = <span class="function">Column</span>(Float)
    
    <span class="comment"># Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ</span>
    current_surge = <span class="function">Column</span>(Float, default=<span class="number">1.0</span>)
    avg_price = <span class="function">Column</span>(Float)
    
    <span class="comment"># Ø²Ù…Ø§Ù† Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ</span>
    last_updated = <span class="function">Column</span>(DateTime, default=datetime.utcnow, onupdate=datetime.utcnow)
    
    <span class="keyword">def</span> <span class="function">__repr__</span>(<span class="keyword">self</span>):
        <span class="keyword">return</span> <span class="string">f"&lt;HexagonStats {self.h3_index}: surge={self.current_surge}&gt;"</span>
            </div>

            <h3>ğŸ”§ Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„</h3>

            <div class="code-header">ğŸ app/database.py</div>
            <div class="code-block">
<span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> create_engine
<span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> sessionmaker
<span class="keyword">from</span> sqlalchemy.pool <span class="keyword">import</span> NullPool
<span class="keyword">import</span> os
<span class="keyword">from</span> dotenv <span class="keyword">import</span> load_dotenv

<span class="function">load_dotenv</span>()

<span class="comment"># Ø§ØªØµØ§Ù„ Ø¨Ù‡ Ø¯ÛŒØªØ§Ø¨ÛŒØ³</span>
DATABASE_URL = os.<span class="function">getenv</span>(<span class="string">"DATABASE_URL"</span>)

engine = <span class="function">create_engine</span>(
    DATABASE_URL,
    poolclass=NullPool,
    echo=<span class="keyword">True</span>
)

SessionLocal = <span class="function">sessionmaker</span>(
    autocommit=<span class="keyword">False</span>,
    autoflush=<span class="keyword">False</span>,
    bind=engine
)

<span class="keyword">def</span> <span class="function">get_db</span>():
    <span class="string">"""Ø¯Ø±ÛŒØ§ÙØª session Ø¯ÛŒØªØ§Ø¨ÛŒØ³"""</span>
    db = <span class="function">SessionLocal</span>()
    <span class="keyword">try</span>:
        <span class="keyword">yield</span> db
    <span class="keyword">finally</span>:
        db.<span class="function">close</span>()


<span class="keyword">def</span> <span class="function">init_db</span>():
    <span class="string">"""Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„"""</span>
    <span class="keyword">from</span> app.models.ride <span class="keyword">import</span> Base
    
    <span class="comment"># Ø§ÛŒØ¬Ø§Ø¯ Ø§ÙØ²ÙˆÙ†Ù‡ PostGIS</span>
    <span class="keyword">with</span> engine.<span class="function">connect</span>() <span class="keyword">as</span> conn:
        conn.<span class="function">execute</span>(<span class="string">"CREATE EXTENSION IF NOT EXISTS postgis"</span>)
        conn.<span class="function">execute</span>(<span class="string">"CREATE EXTENSION IF NOT EXISTS h3"</span>)
        conn.<span class="function">commit</span>()
    
    <span class="comment"># Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„</span>
    Base.metadata.<span class="function">create_all</span>(bind=engine)
    <span class="keyword">print</span>(<span class="string">"âœ… Database tables created successfully!"</span>)


<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    <span class="function">init_db</span>()
            </div>

            <div class="code-header">ğŸ’» Terminal - Ø§Ø¬Ø±Ø§ÛŒ Ø³Ø§Ø®Øª Ø¬Ø¯Ø§ÙˆÙ„</div>
            <div class="code-block">
python -m app.database
            </div>

            <div class="output-box">
âœ… Database tables created successfully!
            </div>

    <script>
        // Initialize highlight.js with advanced options
        document.addEventListener('DOMContentLoaded', (event) => {
            // Configure highlight.js
            hljs.configure({
                languages: ['python', 'yaml', 'dockerfile', 'shell', 'sql', 'bash'],
                ignoreUnescapedHTML: true,
                throwUnmatched: false
            });

            // Highlight all code blocks
            document.querySelectorAll('pre code').forEach((el) => {
                try {
                    hljs.highlightElement(el);
                } catch (e) {
                    console.warn('Highlight.js error for code block:', e);
                }
            });

            // Add copy button to code blocks
            document.querySelectorAll('.code-block').forEach((block) => {
                const copyButton = document.createElement('button');
                copyButton.className = 'copy-button';
                copyButton.textContent = 'ğŸ“‹ Ú©Ù¾ÛŒ';
                copyButton.style.cssText = `
                    position: absolute;
                    top: 10px;
                    right: 10px;
                    background: rgba(0,0,0,0.6);
                    color: white;
                    border: none;
                    border-radius: 4px;
                    padding: 5px 10px;
                    font-size: 0.8em;
                    cursor: pointer;
                    opacity: 0;
                    transition: opacity 0.3s;
                `;

                copyButton.addEventListener('click', async () => {
                    try {
                        await navigator.clipboard.writeText(block.textContent);
                        copyButton.textContent = 'âœ… Ú©Ù¾ÛŒ Ø´Ø¯';
                        setTimeout(() => copyButton.textContent = 'ğŸ“‹ Ú©Ù¾ÛŒ', 2000);
                    } catch (err) {
                        copyButton.textContent = 'âŒ Ø®Ø·Ø§';
                        setTimeout(() => copyButton.textContent = 'ğŸ“‹ Ú©Ù¾ÛŒ', 2000);
                    }
                });

                // Show/hide copy button on hover
                block.parentElement.addEventListener('mouseenter', () => {
                    copyButton.style.opacity = '1';
                });
                block.parentElement.addEventListener('mouseleave', () => {
                    copyButton.style.opacity = '0';
                });

                block.parentElement.style.position = 'relative';
                block.parentElement.appendChild(copyButton);
            });
        });
    </script>
        </div>

        <!-- Ø³Ø±ÙˆÛŒØ³ H3 -->
        <div class="section">
            <h2>
                <span class="section-number">4</span>
                Ø³Ø±ÙˆÛŒØ³ H3 - Ù‡Ø³ØªÙ‡ Ø§ØµÙ„ÛŒ Ø³ÛŒØ³ØªÙ…
            </h2>

            <div class="code-header">ğŸ app/services/h3_service.py</div>
            <div class="code-block">
<span class="keyword">import</span> h3
<span class="keyword">from</span> typing <span class="keyword">import</span> List, Set, Tuple, Dict
<span class="keyword">from</span> shapely.geometry <span class="keyword">import</span> Point, Polygon
<span class="keyword">import</span> redis
<span class="keyword">import</span> json
<span class="keyword">import</span> os


<span class="keyword">class</span> <span class="class-name">H3Service</span>:
    <span class="string">"""Ø³Ø±ÙˆÛŒØ³ Ù…Ø¯ÛŒØ±ÛŒØª Ø¹Ù…Ù„ÛŒØ§Øª H3"""</span>
    
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="keyword">self</span>, resolution: <span class="class-name">int</span> = <span class="number">9</span>):
        <span class="keyword">self</span>.resolution = resolution
        <span class="keyword">self</span>.redis_client = redis.<span class="function">from_url</span>(os.<span class="function">getenv</span>(<span class="string">"REDIS_URL"</span>))
        
    <span class="keyword">def</span> <span class="function">lat_lng_to_h3</span>(<span class="keyword">self</span>, lat: <span class="class-name">float</span>, lng: <span class="class-name">float</span>) -> <span class="class-name">str</span>:
        <span class="string">"""
        ØªØ¨Ø¯ÛŒÙ„ Ù…Ø®ØªØµØ§Øª Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø¨Ù‡ H3 Index
        
        Args:
            lat: Ø¹Ø±Ø¶ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ
            lng: Ø·ÙˆÙ„ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ
            
        Returns:
            H3 Index Ø¨Ù‡ ØµÙˆØ±Øª string
        """</span>
        <span class="keyword">try</span>:
            h3_index = h3.<span class="function">geo_to_h3</span>(lat, lng, <span class="keyword">self</span>.resolution)
            <span class="keyword">return</span>h3_index
        <span class="keyword">except</span> <span class="class-name">Exception</span> <span class="keyword">as</span> e:
            <span class="keyword">raise</span> <span class="class-name">ValueError</span>(<span class="string">f"Invalid coordinates: {e}"</span>)
    
    <span class="keyword">def</span> <span class="function">h3_to_lat_lng</span>(<span class="keyword">self</span>, h3_index: <span class="class-name">str</span>) -> <span class="class-name">Tuple</span>[<span class="class-name">float</span>, <span class="class-name">float</span>]:
        <span class="string">"""
        ØªØ¨Ø¯ÛŒÙ„ H3 Index Ø¨Ù‡ Ù…Ø®ØªØµØ§Øª Ù…Ø±Ú©Ø² Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ
        
        Returns:
            (latitude, longitude)
        """</span>
        <span class="keyword">return</span> h3.<span class="function">h3_to_geo</span>(h3_index)
    
    <span class="keyword">def</span> <span class="function">get_neighbors</span>(<span class="keyword">self</span>, h3_index: <span class="class-name">str</span>, k: <span class="class-name">int</span> = <span class="number">1</span>) -> <span class="class-name">Set</span>[<span class="class-name">str</span>]:
        <span class="string">"""
        Ø¯Ø±ÛŒØ§ÙØª Ù‡Ù…Ø³Ø§ÛŒÚ¯Ø§Ù† ÛŒÚ© Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ
        
        Args:
            h3_index: Ø´Ù†Ø§Ø³Ù‡ H3
            k: Ø´Ø¹Ø§Ø¹ Ø¬Ø³ØªØ¬Ùˆ (ØªØ¹Ø¯Ø§Ø¯ Ø­Ù„Ù‚Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡Ù…Ø³Ø§ÛŒÙ‡)
            
        Returns:
            Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ø´Ù†Ø§Ø³Ù‡â€ŒÙ‡Ø§ÛŒ H3 Ù‡Ù…Ø³Ø§ÛŒÙ‡
        """</span>
        <span class="keyword">return</span> h3.<span class="function">k_ring</span>(h3_index, k)
    
    <span class="keyword">def</span> <span class="function">get_hexagon_boundary</span>(<span class="keyword">self</span>, h3_index: <span class="class-name">str</span>) -> <span class="class-name">List</span>[<span class="class-name">Tuple</span>[<span class="class-name">float</span>, <span class="class-name">float</span>]]:
        <span class="string">"""Ø¯Ø±ÛŒØ§ÙØª Ù…Ø±Ø²Ù‡Ø§ÛŒ Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ"""</span>
        <span class="keyword">return</span> h3.<span class="function">h3_to_geo_boundary</span>(h3_index)
    
    <span class="keyword">def</span> <span class="function">calculate_distance</span>(<span class="keyword">self</span>, h3_1: <span class="class-name">str</span>, h3_2: <span class="class-name">str</span>) -> <span class="class-name">int</span>:
        <span class="string">"""Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡ Ø¨ÛŒÙ† Ø¯Ùˆ Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ (Ø¨Ù‡ ØªØ¹Ø¯Ø§Ø¯ Ø³Ù„ÙˆÙ„)"""</span>
        <span class="keyword">return</span> h3.<span class="function">h3_distance</span>(h3_1, h3_2)
    
    <span class="keyword">def</span> <span class="function">polyfill_area</span>(<span class="keyword">self</span>, polygon_coords: <span class="class-name">List</span>[<span class="class-name">Tuple</span>[<span class="class-name">float</span>, <span class="class-name">float</span>]]) -> <span class="class-name">Set</span>[<span class="class-name">str</span>]:
        <span class="string">"""
        Ù¾ÙˆØ´Ø´ ÛŒÚ© Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒ Ø¨Ø§ Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§ÛŒ H3
        
        Args:
            polygon_coords: Ù„ÛŒØ³Øª Ù…Ø®ØªØµØ§Øª Ú¯ÙˆØ´Ù‡â€ŒÙ‡Ø§ÛŒ Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒ [(lng, lat), ...]
            
        Returns:
            Ù…Ø¬Ù…ÙˆØ¹Ù‡ H3 indices Ú©Ù‡ Ú†Ù†Ø¯Ø¶Ù„Ø¹ÛŒ Ø±Ø§ Ù…ÛŒâ€ŒÙ¾ÙˆØ´Ø§Ù†Ù†Ø¯
        """</span>
        <span class="keyword">return</span> h3.<span class="function">polyfill</span>(
            polygon_coords, 
            <span class="keyword">self</span>.resolution, 
            geo_json_conformant=<span class="keyword">True</span>
        )
    
    <span class="keyword">def</span> <span class="function">cache_hexagon_data</span>(<span class="keyword">self</span>, h3_index: <span class="class-name">str</span>, data: <span class="class-name">Dict</span>) -> <span class="class-name">None</span>:
        <span class="string">"""Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø§Ø¯Ù‡ Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ Ø¯Ø± Redis"""</span>
        cache_key = <span class="string">f"hex:{h3_index}"</span>
        <span class="keyword">self</span>.redis_client.<span class="function">setex</span>(
            cache_key,
            <span class="number">300</span>,  <span class="comment"># 5 Ø¯Ù‚ÛŒÙ‚Ù‡</span>
            json.<span class="function">dumps</span>(data)
        )
    
    <span class="keyword">def</span> <span class="function">get_cached_hexagon_data</span>(<span class="keyword">self</span>, h3_index: <span class="class-name">str</span>) -> <span class="class-name">Dict</span> | <span class="class-name">None</span>:
        <span class="string">"""Ø¯Ø±ÛŒØ§ÙØª Ø¯Ø§Ø¯Ù‡ Ø§Ø² Cache"""</span>
        cache_key = <span class="string">f"hex:{h3_index}"</span>
        data = <span class="keyword">self</span>.redis_client.<span class="function">get</span>(cache_key)
        <span class="keyword">if</span> data:
            <span class="keyword">return</span> json.<span class="function">loads</span>(data)
        <span class="keyword">return</span> <span class="keyword">None</span>


<span class="comment"># Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡</span>
<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    service = <span class="function">H3Service</span>(resolution=<span class="number">9</span>)
    
    <span class="comment"># ØªØ¨Ø¯ÛŒÙ„ Ù…ÛŒØ¯Ø§Ù† Ø¢Ø²Ø§Ø¯ÛŒ Ø¨Ù‡ H3</span>
    h3_index = service.<span class="function">lat_lng_to_h3</span>(<span class="number">35.6997</span>, <span class="number">51.3381</span>)
    <span class="keyword">print</span>(<span class="string">f"H3 Index: {h3_index}"</span>)
    
    <span class="comment"># Ø¯Ø±ÛŒØ§ÙØª Ù‡Ù…Ø³Ø§ÛŒÚ¯Ø§Ù†</span>
    neighbors = service.<span class="function">get_neighbors</span>(h3_index, k=<span class="number">2</span>)
    <span class="keyword">print</span>(<span class="string">f"Neighbors: {len(neighbors)}"</span>)
            </div>
        </div>

        <!-- Ø³Ø±ÙˆÛŒØ³ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ -->
        <div class="section">
            <h2>
                <span class="section-number">5</span>
                Ø³ÛŒØ³ØªÙ… Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§ (Dynamic Pricing)
            </h2>

            <div class="info-box">
                <h4>ğŸ“Š Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ</h4>
                <p>Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ÙØ±Ù…ÙˆÙ„ Ø²ÛŒØ± Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯:</p>
                <p style="text-align: center; font-size: 1.2em; margin: 20px 0; background: white; padding: 15px; border-radius: 8px;">
                    <strong>Final Price = Base Price Ã— Surge Multiplier</strong>
                </p>
                <p>Surge Multiplier Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ±Ø§Ú©Ù… ØªÙ‚Ø§Ø¶Ø§ Ø¯Ø± Ù‡Ø± Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p>
            </div>

            <div class="code-header">ğŸ app/services/pricing.py</div>
            <div class="code-block">
<span class="keyword">from</span> typing <span class="keyword">import</span> Dict
<span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta
<span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> Session
<span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> func, and_
<span class="keyword">from</span> app.models.ride <span class="keyword">import</span> Ride, HexagonStats
<span class="keyword">from</span> app.services.h3_service <span class="keyword">import</span> H3Service
<span class="keyword">import</span> math


<span class="keyword">class</span> <span class="class-name">PricingService</span>:
    <span class="string">"""Ø³Ø±ÙˆÛŒØ³ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§"""</span>
    
    <span class="comment"># ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾Ø§ÛŒÙ‡</span>
    BASE_PRICE_PER_KM = <span class="number">15000</span>  <span class="comment"># ØªÙˆÙ…Ø§Ù†</span>
    BASE_PRICE_FIXED = <span class="number">5000</span>    <span class="comment"># Ù‡Ø²ÛŒÙ†Ù‡ Ø«Ø§Ø¨Øª</span>
    MIN_PRICE = <span class="number">10000</span>
    MAX_SURGE = <span class="number">3.0</span>
    
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="keyword">self</span>, db: <span class="class-name">Session</span>):
        <span class="keyword">self</span>.db = db
        <span class="keyword">self</span>.h3_service = <span class="function">H3Service</span>()
    
    <span class="keyword">def</span> <span class="function">calculate_base_price</span>(<span class="keyword">self</span>, distance_km: <span class="class-name">float</span>) -> <span class="class-name">float</span>:
        <span class="string">"""Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ø³Ø§ÙØª"""</span>
        price = <span class="keyword">self</span>.BASE_PRICE_FIXED + (distance_km * <span class="keyword">self</span>.BASE_PRICE_PER_KM)
        <span class="keyword">return</span> <span class="function">max</span>(price, <span class="keyword">self</span>.MIN_PRICE)
    
    <span class="keyword">def</span> <span class="function">calculate_surge_multiplier</span>(<span class="keyword">self</span>, h3_index: <span class="class-name">str</span>) -> <span class="class-name">float</span>:
        <span class="string">"""
        Ù…Ø­Ø§Ø³Ø¨Ù‡ Ø¶Ø±ÛŒØ¨ Ø§ÙØ²Ø§ÛŒØ´ Ù‚ÛŒÙ…Øª Ø¨Ø± Ø§Ø³Ø§Ø³ ØªÙ‚Ø§Ø¶Ø§
        
        Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…:
        1. Ø´Ù…Ø§Ø±Ø´ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ 15 Ø¯Ù‚ÛŒÙ‚Ù‡ Ø§Ø®ÛŒØ±
        2. Ø´Ù…Ø§Ø±Ø´ Ø±Ø§Ù†Ù†Ø¯Ú¯Ø§Ù† ÙØ¹Ø§Ù„ Ø¯Ø± Ù…Ù†Ø·Ù‚Ù‡
        3. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ø³Ø¨Øª ØªÙ‚Ø§Ø¶Ø§ Ø¨Ù‡ Ø¹Ø±Ø¶Ù‡
        4. ØªØ¹ÛŒÛŒÙ† Ø¶Ø±ÛŒØ¨ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù†Ø³Ø¨Øª
        """</span>
        
        <span class="comment"># Ø¨Ø±Ø±Ø³ÛŒ Cache</span>
        cached_data = <span class="keyword">self</span>.h3_service.<span class="function">get_cached_hexagon_data</span>(h3_index)
        <span class="keyword">if</span> cached_data <span class="keyword">and</span> <span class="string">'surge'</span> <span class="keyword">in</span> cached_data:
            <span class="keyword">return</span> cached_data[<span class="string">'surge'</span>]
        
        <span class="comment"># Ø²Ù…Ø§Ù† 15 Ø¯Ù‚ÛŒÙ‚Ù‡ Ù‚Ø¨Ù„</span>
        time_threshold = datetime.<span class="function">utcnow</span>() - <span class="function">timedelta</span>(minutes=<span class="number">15</span>)
        
        <span class="comment"># Ø´Ù…Ø§Ø±Ø´ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ Ø§Ø®ÛŒØ± Ø¯Ø± Ø§ÛŒÙ† Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ Ùˆ Ù‡Ù…Ø³Ø§ÛŒÚ¯Ø§Ù†</span>
        neighbors = <span class="keyword">self</span>.h3_service.<span class="function">get_neighbors</span>(h3_index, k=<span class="number">1</span>)
        
        demand_count = <span class="keyword">self</span>.db.<span class="function">query</span>(func.<span class="function">count</span>(Ride.id)).\
            <span class="function">filter</span>(
                <span class="function">and_</span>(
                    Ride.pickup_h3.<span class="function">in_</span>(<span class="function">list</span>(neighbors)),
                    Ride.request_time >= time_threshold,
                    Ride.status.<span class="function">in_</span>([<span class="string">'requested'</span>, <span class="string">'accepted'</span>])
                )
            ).<span class="function">scalar</span>()
        
        <span class="comment"># ÙØ±Ø¶: Ù‡Ø± Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ Ø¸Ø±ÙÛŒØª 5 Ø±Ø§Ù†Ù†Ø¯Ù‡ Ø¯Ø§Ø±Ø¯</span>
        supply_capacity = <span class="number">5</span> * <span class="function">len</span>(neighbors)
        
        <span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†Ø³Ø¨Øª ØªÙ‚Ø§Ø¶Ø§ Ø¨Ù‡ Ø¹Ø±Ø¶Ù‡</span>
        <span class="keyword">if</span> supply_capacity == <span class="number">0</span>:
            ratio = <span class="number">1.0</span>
        <span class="keyword">else</span>:
            ratio = demand_count / supply_capacity
        
        <span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ surge multiplier</span>
        <span class="keyword">if</span> ratio <= <span class="number">0.5</span>:
            surge = <span class="number">1.0</span>
        <span class="keyword">elif</span> ratio <= <span class="number">1.0</span>:
            surge = <span class="number">1.0</span> + (ratio - <span class="number">0.5</span>) * <span class="number">0.8</span>
        <span class="keyword">elif</span> ratio <= <span class="number">1.5</span>:
            surge = <span class="number">1.4</span> + (ratio - <span class="number">1.0</span>) * <span class="number">1.2</span>
        <span class="keyword">else</span>:
            surge = <span class="number">2.0</span> + <span class="function">min</span>((ratio - <span class="number">1.5</span>) * <span class="number">0.5</span>, <span class="number">1.0</span>)
        
        <span class="comment"># Ù…Ø­Ø¯ÙˆØ¯ Ú©Ø±Ø¯Ù† Ø¨Ù‡ Ø­Ø¯Ø§Ú©Ø«Ø±</span>
        surge = <span class="function">min</span>(surge, <span class="keyword">self</span>.MAX_SURGE)
        
        <span class="comment"># Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Cache</span>
        <span class="keyword">self</span>.h3_service.<span class="function">cache_hexagon_data</span>(h3_index, {<span class="string">'surge'</span>: surge})
        
        <span class="comment"># Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¬Ø¯ÙˆÙ„ Ø¢Ù…Ø§Ø±</span>
        <span class="keyword">self</span>.<span class="function">update_hexagon_stats</span>(h3_index, surge)
        
        <span class="keyword">return</span> <span class="function">round</span>(surge, <span class="number">2</span>)
    
    <span class="keyword">def</span> <span class="function">update_hexagon_stats</span>(<span class="keyword">self</span>, h3_index: <span class="class-name">str</span>, surge: <span class="class-name">float</span>) -> <span class="class-name">None</span>:
        <span class="string">"""Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¢Ù…Ø§Ø± Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ"""</span>
        stats = <span class="keyword">self</span>.db.<span class="function">query</span>(HexagonStats).\
            <span class="function">filter</span>(HexagonStats.h3_index == h3_index).\
            <span class="function">first</span>()
        
        <span class="keyword">if</span> stats:
            stats.current_surge = surge
            stats.last_updated = datetime.<span class="function">utcnow</span>()
        <span class="keyword">else</span>:
            stats = <span class="function">HexagonStats</span>(
                h3_index=h3_index,
                current_surge=surge
            )
            <span class="keyword">self</span>.db.<span class="function">add</span>(stats)
        
        <span class="keyword">self</span>.db.<span class="function">commit</span>()
    
    <span class="keyword">def</span> <span class="function">calculate_ride_price</span>(
        <span class="keyword">self</span>, 
        pickup_lat: <span class="class-name">float</span>, 
        pickup_lng: <span class="class-name">float</span>,
        distance_km: <span class="class-name">float</span>
    ) -> <span class="class-name">Dict</span>:
        <span class="string">"""
        Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ú©Ø§Ù…Ù„ Ø³ÙØ±
        
        Returns:
            {
                'base_price': float,
                'surge_multiplier': float,
                'final_price': float,
                'h3_index': str
            }
        """</span>
        <span class="comment"># ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ H3</span>
        h3_index = <span class="keyword">self</span>.h3_service.<span class="function">lat_lng_to_h3</span>(pickup_lat, pickup_lng)
        
        <span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡</span>
        base_price = <span class="keyword">self</span>.<span class="function">calculate_base_price</span>(distance_km)
        
        <span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ surge</span>
        surge = <span class="keyword">self</span>.<span class="function">calculate_surge_multiplier</span>(h3_index)
        
        <span class="comment"># Ù‚ÛŒÙ…Øª Ù†Ù‡Ø§ÛŒÛŒ</span>
        final_price = base_price * surge
        
        <span class="keyword">return</span> {
            <span class="string">'base_price'</span>: <span class="function">round</span>(base_price, <span class="number">0</span>),
            <span class="string">'surge_multiplier'</span>: surge,
            <span class="string">'final_price'</span>: <span class="function">round</span>(final_price, <span class="number">0</span>),
            <span class="string">'h3_index'</span>: h3_index,
            <span class="string">'message'</span>: <span class="string">f"ØªÙ‚Ø§Ø¶Ø§ÛŒ Ø¨Ø§Ù„Ø§ - Ø¶Ø±ÛŒØ¨ {surge}x"</span> <span class="keyword">if</span> surge > <span class="number">1.0</span> <span class="keyword">else</span> <span class="string">"Ù‚ÛŒÙ…Øª Ø¹Ø§Ø¯ÛŒ"</span>
        }


<span class="comment"># Ù…Ø«Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡</span>
<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    <span class="keyword">from</span> app.database <span class="keyword">import</span> SessionLocal
    
    db = <span class="function">SessionLocal</span>()
    pricing = <span class="function">PricingService</span>(db)
    
    <span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ø¨Ø±Ø§ÛŒ Ø³ÙØ± 5 Ú©ÛŒÙ„ÙˆÙ…ØªØ±ÛŒ Ø§Ø² Ù…ÛŒØ¯Ø§Ù† Ø¢Ø²Ø§Ø¯ÛŒ</span>
    result = pricing.<span class="function">calculate_ride_price</span>(
        pickup_lat=<span class="number">35.6997</span>,
        pickup_lng=<span class="number">51.3381</span>,
        distance_km=<span class="number">5.0</span>
    )
    
    <span class="keyword">print</span>(<span class="string">f"Base Price: {result['base_price']:,} ØªÙˆÙ…Ø§Ù†"</span>)
    <span class="keyword">print</span>(<span class="string">f"Surge: {result['surge_multiplier']}x"</span>)
    <span class="keyword">print</span>(<span class="string">f"Final Price: {result['final_price']:,} ØªÙˆÙ…Ø§Ù†"</span>)
            </div>

            <div class="tip-box">
                <h4>ğŸ’¡ Ù†Ú©Ø§Øª Ù…Ù‡Ù…</h4>
                <ul>
                    <li>Ø§Ø² Redis Ø¨Ø±Ø§ÛŒ Cache Ú©Ø±Ø¯Ù† surge multiplier Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ (TTL: 5 Ø¯Ù‚ÛŒÙ‚Ù‡)</li>
                    <li>Ù‡Ù…Ø³Ø§ÛŒÚ¯Ø§Ù† Ù†ÛŒØ² Ø¯Ø± Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªÙ‚Ø§Ø¶Ø§ Ø¯Ø± Ù†Ø¸Ø± Ú¯Ø±ÙØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯</li>
                    <li>Ø­Ø¯Ø§Ú©Ø«Ø± surge Ø¨Ù‡ 3x Ù…Ø­Ø¯ÙˆØ¯ Ø´Ø¯Ù‡ Ø§Ø³Øª</li>
                    <li>Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Ø¨Ù‡ ØµÙˆØ±Øª Real-time Ø¹Ù…Ù„ Ù…ÛŒâ€ŒÚ©Ù†Ø¯</li>
                </ul>
            </div>
        </div>

        <!-- Ø³Ø±ÙˆÛŒØ³ ØªØ­Ù„ÛŒÙ„ -->
        <div class="section">
            <h2>
                <span class="section-number">6</span>
                Ø³Ø±ÙˆÛŒØ³ ØªØ­Ù„ÛŒÙ„ Ùˆ Hotspot Detection
            </h2>

            <div class="code-header">ğŸ app/services/analytics.py</div>
            <div class="code-block">
<span class="keyword">from</span> typing <span class="keyword">import</span> List, Dict, Tuple
<span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta
<span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> Session
<span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> func, and_
<span class="keyword">from</span> collections <span class="keyword">import</span> Counter
<span class="keyword">import</span> pandas <span class="keyword">as</span> pd
<span class="keyword">from</span> app.models.ride <span class="keyword">import</span> Ride
<span class="keyword">from</span> app.services.h3_service <span class="keyword">import</span> H3Service


<span class="keyword">class</span> <span class="class-name">AnalyticsService</span>:
    <span class="string">"""Ø³Ø±ÙˆÛŒØ³ ØªØ­Ù„ÛŒÙ„ Ø¯Ø§Ø¯Ù‡ Ùˆ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø§Ù„Ú¯ÙˆÙ‡Ø§"""</span>
    
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="keyword">self</span>, db: <span class="class-name">Session</span>):
        <span class="keyword">self</span>.db = db
        <span class="keyword">self</span>.h3_service = <span class="function">H3Service</span>()
    
    <span class="keyword">def</span> <span class="function">get_hotspots</span>(
        <span class="keyword">self</span>, 
        hours: <span class="class-name">int</span> = <span class="number">1</span>, 
        min_rides: <span class="class-name">int</span> = <span class="number">5</span>
    ) -> <span class="class-name">List</span>[<span class="class-name">Dict</span>]:
        <span class="string">"""
        Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù…Ù†Ø§Ø·Ù‚ Ù¾Ø±ØªÙ‚Ø§Ø¶Ø§ (Hotspots)
        
        Args:
            hours: ØªØ¹Ø¯Ø§Ø¯ Ø³Ø§Ø¹Øª Ú¯Ø°Ø´ØªÙ‡ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ
            min_rides: Ø­Ø¯Ø§Ù‚Ù„ ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ± Ø¨Ø±Ø§ÛŒ ØªØ´Ø®ÛŒØµ hotspot
            
        Returns:
            Ù„ÛŒØ³Øª hotspots Ø¨Ø§ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„
        """</span>
        time_threshold = datetime.<span class="function">utcnow</span>() - <span class="function">timedelta</span>(hours=hours)
        
        <span class="comment"># Query Ø³ÙØ±Ù‡Ø§ÛŒ Ø§Ø®ÛŒØ±</span>
        rides = <span class="keyword">self</span>.db.<span class="function">query</span>(Ride.pickup_h3).\
            <span class="function">filter</span>(
                <span class="function">and_</span>(
                    Ride.request_time >= time_threshold,
                    Ride.pickup_h3 != <span class="keyword">None</span>
                )
            ).<span class="function">all</span>()
        
        <span class="comment"># Ø´Ù…Ø§Ø±Ø´ ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ± Ø¯Ø± Ù‡Ø± Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ</span>
        h3_counts = <span class="function">Counter</span>([r[<span class="number">0</span>] <span class="keyword">for</span> r <span class="keyword">in</span> rides])
        
        <span class="comment"># ÙÛŒÙ„ØªØ± Ú©Ø±Ø¯Ù† hotspots</span>
        hotspots = []
        <span class="keyword">for</span> h3_index, count <span class="keyword">in</span> h3_counts.<span class="function">items</span>():
            <span class="keyword">if</span> count >= min_rides:
                lat, lng = <span class="keyword">self</span>.h3_service.<span class="function">h3_to_lat_lng</span>(h3_index)
                hotspots.<span class="function">append</span>({
                    <span class="string">'h3_index'</span>: h3_index,
                    <span class="string">'lat'</span>: lat,
                    <span class="string">'lng'</span>: lng,
                    <span class="string">'ride_count'</span>: count,
                    <span class="string">'intensity'</span>: <span class="string">'high'</span> <span class="keyword">if</span> count > <span class="number">10</span> <span class="keyword">else</span> <span class="string">'medium'</span>
                })
        
        <span class="comment"># Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ±</span>
        hotspots.<span class="function">sort</span>(key=<span class="keyword">lambda</span> x: x[<span class="string">'ride_count'</span>], reverse=<span class="keyword">True</span>)
        
        <span class="keyword">return</span> hotspots
    
    <span class="keyword">def</span> <span class="function">get_hexagon_density</span>(<span class="keyword">self</span>, hours: <span class="class-name">int</span> = <span class="number">24</span>) -> <span class="class-name">Dict</span>[<span class="class-name">str</span>, <span class="class-name">int</span>]:
        <span class="string">"""
        Ù…Ø­Ø§Ø³Ø¨Ù‡ ØªØ±Ø§Ú©Ù… Ø³ÙØ± Ø¯Ø± ØªÙ…Ø§Ù… Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§
        
        Returns:
            Ø¯ÛŒÚ©Ø´Ù†Ø±ÛŒ {h3_index: ride_count}
        """</span>
        time_threshold = datetime.<span class="function">utcnow</span>() - <span class="function">timedelta</span>(hours=hours)
        
        rides = <span class="keyword">self</span>.db.<span class="function">query</span>(Ride.pickup_h3).\
            <span class="function">filter</span>(
                <span class="function">and_</span>(
                    Ride.request_time >= time_threshold,
                    Ride.pickup_h3 != <span class="keyword">None</span>
                )
            ).<span class="function">all</span>()
        
        <span class="keyword">return</span> <span class="function">dict</span>(<span class="function">Counter</span>([r[<span class="number">0</span>] <span class="keyword">for</span> r <span class="keyword">in</span> rides]))
    
    <span class="keyword">def</span> <span class="function">analyze_time_patterns</span>(<span class="keyword">self</span>, days: <span class="class-name">int</span> = <span class="number">7</span>) -> <span class="class-name">pd</span>.<span class="class-name">DataFrame</span>:
        <span class="string">"""
        ØªØ­Ù„ÛŒÙ„ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ Ø³ÙØ±Ù‡Ø§
        
        Returns:
            DataFrame Ø¨Ø§ Ø³ØªÙˆÙ†â€ŒÙ‡Ø§ÛŒ: hour, day_of_week, ride_count
        """</span>
        time_threshold = datetime.<span class="function">utcnow</span>() - <span class="function">timedelta</span>(days=days)
        
        rides = <span class="keyword">self</span>.db.<span class="function">query</span>(Ride.request_time).\
            <span class="function">filter</span>(Ride.request_time >= time_threshold).\
            <span class="function">all</span>()
        
        <span class="comment"># ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ DataFrame</span>
        df = pd.<span class="function">DataFrame</span>(rides, columns=[<span class="string">'request_time'</span>])
        df[<span class="string">'hour'</span>] = df[<span class="string">'request_time'</span>].dt.hour
        df[<span class="string">'day_of_week'</span>] = df[<span class="string">'request_time'</span>].dt.dayofweek
        
        <span class="comment"># ØªØ¬Ù…ÛŒØ¹</span>
        pattern = df.<span class="function">groupby</span>([<span class="string">'hour'</span>, <span class="string">'day_of_week'</span>]).<span class="function">size</span>().\
            <span class="function">reset_index</span>(name=<span class="string">'ride_count'</span>)
        
        <span class="keyword">return</span> pattern
    
    <span class="keyword">def</span> <span class="function">get_coverage_analysis</span>(<span class="keyword">self</span>, city_polygon: <span class="class-name">List</span>[<span class="class-name">Tuple</span>]) -> <span class="class-name">Dict</span>:
        <span class="string">"""
        ØªØ­Ù„ÛŒÙ„ Ù¾ÙˆØ´Ø´ Ø³Ø±ÙˆÛŒØ³ Ø¯Ø± Ø³Ø·Ø­ Ø´Ù‡Ø±
        
        Args:
            city_polygon: Ù…Ø®ØªØµØ§Øª Ù…Ø±Ø² Ø´Ù‡Ø± [(lng, lat), ...]
            
        Returns:
            {
                'total_hexagons': int,
                'covered_hexagons': int,
                'coverage_percentage': float,
                'uncovered_areas': List[str]
            }
        """</span>
        <span class="comment"># Ø¯Ø±ÛŒØ§ÙØª ØªÙ…Ø§Ù… Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§ÛŒ Ø´Ù‡Ø±</span>
        all_hexagons = <span class="keyword">self</span>.h3_service.<span class="function">polyfill_area</span>(city_polygon)
        
        <span class="comment"># Ø¯Ø±ÛŒØ§ÙØª Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø³ÙØ± Ø¯Ø§Ø´ØªÙ‡â€ŒØ§Ù†Ø¯</span>
        covered = <span class="keyword">self</span>.db.<span class="function">query</span>(Ride.pickup_h3).<span class="function">distinct</span>().<span class="function">all</span>()
        covered_set = <span class="function">set</span>([r[<span class="number">0</span>] <span class="keyword">for</span> r <span class="keyword">in</span> covered <span class="keyword">if</span> r[<span class="number">0</span>]])
        
        <span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù¾ÙˆØ´Ø´</span>
        total = <span class="function">len</span>(all_hexagons)
        covered_count = <span class="function">len</span>(covered_set)
        uncovered = all_hexagons - covered_set
        
        <span class="keyword">return</span> {
            <span class="string">'total_hexagons'</span>: total,
            <span class="string">'covered_hexagons'</span>: covered_count,
            <span class="string">'coverage_percentage'</span>: <span class="function">round</span>((covered_count / total) * <span class="number">100</span>, <span class="number">2</span>),
            <span class="string">'uncovered_areas'</span>: <span class="function">list</span>(uncovered)[:<span class="number">10</span>]  <span class="comment"># 10 Ù†Ù…ÙˆÙ†Ù‡</span>
        }
    
    <span class="keyword">def</span> <span class="function">get_top_routes</span>(<span class="keyword">self</span>, limit: <span class="class-name">int</span> = <span class="number">10</span>) -> <span class="class-name">List</span>[<span class="class-name">Dict</span>]:
        <span class="string">"""
        Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† Ù…Ø³ÛŒØ±Ù‡Ø§ (Ù…Ø¨Ø¯Ø§-Ù…Ù‚ØµØ¯)
        
        Returns:
            Ù„ÛŒØ³Øª Ù…Ø³ÛŒØ±Ù‡Ø§ Ø¨Ø§ ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ±
        """</span>
        routes = <span class="keyword">self</span>.db.<span class="function">query</span>(
            Ride.pickup_h3,
            Ride.dropoff_h3,
            func.<span class="function">count</span>(Ride.id).label(<span class="string">'count'</span>)
        ).<span class="function">filter</span>(
            <span class="function">and_</span>(
                Ride.pickup_h3 != <span class="keyword">None</span>,
                Ride.dropoff_h3 != <span class="keyword">None</span>,
                Ride.status == <span class="string">'completed'</span>
            )
        ).<span class="function">group_by</span>(Ride.pickup_h3, Ride.dropoff_h3).\
        <span class="function">order_by</span>(func.<span class="function">count</span>(Ride.id).<span class="function">desc</span>()).\
        <span class="function">limit</span>(limit).<span class="function">all</span>()
        
        result = []
        <span class="keyword">for</span> pickup_h3, dropoff_h3, count <span class="keyword">in</span> routes:
            pickup_lat, pickup_lng = <span class="keyword">self</span>.h3_service.<span class="function">h3_to_lat_lng</span>(pickup_h3)
            dropoff_lat, dropoff_lng = <span class="keyword">self</span>.h3_service.<span class="function">h3_to_lat_lng</span>(dropoff_h3)
            
            result.<span class="function">append</span>({
                <span class="string">'pickup_h3'</span>: pickup_h3,
                <span class="string">'dropoff_h3'</span>: dropoff_h3,
                <span class="string">'pickup_coords'</span>: (pickup_lat, pickup_lng),
                <span class="string">'dropoff_coords'</span>: (dropoff_lat, dropoff_lng),
                <span class="string">'ride_count'</span>: count
            })
        
        <span class="keyword">return</span> result


<span class="comment"># Ù…Ø«Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡</span>
<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    <span class="keyword">from</span> app.database <span class="keyword">import</span> SessionLocal
    
    db = <span class="function">SessionLocal</span>()
    analytics = <span class="function">AnalyticsService</span>(db)
    
    <span class="comment"># Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ hotspots</span>
    hotspots = analytics.<span class="function">get_hotspots</span>(hours=<span class="number">1</span>, min_rides=<span class="number">3</span>)
    <span class="keyword">print</span>(<span class="string">f"Found {len(hotspots)} hotspots:"</span>)
    
    <span class="keyword">for</span> spot <span class="keyword">in</span> hotspots[:<span class="number">5</span>]:
        <span class="keyword">print</span>(<span class="string">f"  - {spot['h3_index']}: {spot['ride_count']} rides"</span>)
            </div>
        </div>

        <!-- API Endpoints -->
        <div class="section">
            <h2>
                <span class="section-number">7</span>
                API Endpoints Ø¨Ø§ FastAPI
            </h2>

            <div class="code-header">ğŸ app/main.py</div>
            <div class="code-block">
<span class="keyword">from</span> fastapi <span class="keyword">import</span> FastAPI, Depends, HTTPException
<span class="keyword">from</span> fastapi.middleware.cors <span class="keyword">import</span> CORSMiddleware
<span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> Session
<span class="keyword">from</span> typing <span class="keyword">import</span> List
<span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel
<span class="keyword">from</span> app.database <span class="keyword">import</span> get_db
<span class="keyword">from</span> app.services.pricing <span class="keyword">import</span> PricingService
<span class="keyword">from</span> app.services.analytics <span class="keyword">import</span> AnalyticsService

app = <span class="function">FastAPI</span>(
    title=<span class="string">"Taxi Analytics API"</span>,
    description=<span class="string">"Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ ØªØ§Ú©Ø³ÛŒ Ø¨Ø§ H3"</span>,
    version=<span class="string">"1.0.0"</span>
)

<span class="comment"># CORS</span>
app.<span class="function">add_middleware</span>(
    CORSMiddleware,
    allow_origins=[<span class="string">"*"</span>],
    allow_credentials=<span class="keyword">True</span>,
    allow_methods=[<span class="string">"*"</span>],
    allow_headers=[<span class="string">"*"</span>],
)


<span class="comment"># Pydantic Models</span>
<span class="keyword">class</span> <span class="class-name">PriceRequest</span>(BaseModel):
    pickup_lat: <span class="class-name">float</span>
    pickup_lng: <span class="class-name">float</span>
    distance_km: <span class="class-name">float</span>


<span class="keyword">class</span> <span class="class-name">PriceResponse</span>(BaseModel):
    base_price: <span class="class-name">float</span>
    surge_multiplier: <span class="class-name">float</span>
    final_price: <span class="class-name">float</span>
    h3_index: <span class="class-name">str</span>
    message: <span class="class-name">str</span>


<span class="keyword">class</span> <span class="class-name">HotspotResponse</span>(BaseModel):
    h3_index: <span class="class-name">str</span>
    lat: <span class="class-name">float</span>
    lng: <span class="class-name">float</span>
    ride_count: <span class="class-name">int</span>
    intensity: <span class="class-name">str</span>


<span class="comment"># Routes</span>
<span class="decorator">@app.get</span>(<span class="string">"/"</span>)
<span class="keyword">async def</span> <span class="function">root</span>():
    <span class="keyword">return</span> {
        <span class="string">"message"</span>: <span class="string">"Taxi Analytics API"</span>,
        <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,
        <span class="string">"endpoints"</span>: {
            <span class="string">"pricing"</span>: <span class="string">"/api/pricing/calculate"</span>,
            <span class="string">"hotspots"</span>: <span class="string">"/api/analytics/hotspots"</span>,
            <span class="string">"coverage"</span>: <span class="string">"/api/analytics/coverage"</span>
        }
    }


<span class="decorator">@app.post</span>(<span class="string">"/api/pricing/calculate"</span>, response_model=PriceResponse)
<span class="keyword">async def</span> <span class="function">calculate_price</span>(
    request: <span class="class-name">PriceRequest</span>,
    db: <span class="class-name">Session</span> = <span class="function">Depends</span>(get_db)
):
    <span class="string">"""
    Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ø³ÙØ± Ø¨Ø§ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§
    
    Example:
        POST /api/pricing/calculate
        {
            "pickup_lat": 35.6997,
            "pickup_lng": 51.3381,
            "distance_km": 5.0
        }
    """</span>
    <span class="keyword">try</span>:
        pricing = <span class="function">PricingService</span>(db)
        result = pricing.<span class="function">calculate_ride_price</span>(
            request.pickup_lat,
            request.pickup_lng,
            request.distance_km
        )
        <span class="keyword">return</span> result
    <span class="keyword">except</span> <span class="class-name">Exception</span> <span class="keyword">as</span> e:
        <span class="keyword">raise</span> <span class="function">HTTPException</span>(status_code=<span class="number">400</span>, detail=<span class="function">str</span>(e))


<span class="decorator">@app.get</span>(<span class="string">"/api/analytics/hotspots"</span>, response_model=<span class="class-name">List</span>[HotspotResponse])
<span class="keyword">async def</span> <span class="function">get_hotspots</span>(
    hours: <span class="class-name">int</span> = <span class="number">1</span>,
    min_rides: <span class="class-name">int</span> = <span class="number">5</span>,
    db: <span class="class-name">Session</span> = <span class="function">Depends</span>(get_db)
):
    <span class="string">"""
    Ø¯Ø±ÛŒØ§ÙØª Ù…Ù†Ø§Ø·Ù‚ Ù¾Ø±ØªÙ‚Ø§Ø¶Ø§ (Hotspots)
    
    Query Parameters:
        - hours: ØªØ¹Ø¯Ø§Ø¯ Ø³Ø§Ø¹Øª Ú¯Ø°Ø´ØªÙ‡ (default: 1)
        - min_rides: Ø­Ø¯Ø§Ù‚Ù„ ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ± (default: 5)
    """</span>
    analytics = <span class="function">AnalyticsService</span>(db)
    hotspots = analytics.<span class="function">get_hotspots</span>(hours=hours, min_rides=min_rides)
    <span class="keyword">return</span> hotspots


<span class="decorator">@app.get</span>(<span class="string">"/api/analytics/density"</span>)
<span class="keyword">async def</span> <span class="function">get_density</span>(
    hours: <span class="class-name">int</span> = <span class="number">24</span>,
    db: <span class="class-name">Session</span> = <span class="function">Depends</span>(get_db)
):
    <span class="string">"""Ø¯Ø±ÛŒØ§ÙØª ØªØ±Ø§Ú©Ù… Ø³ÙØ± Ø¯Ø± ØªÙ…Ø§Ù… Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§"""</span>
    analytics = <span class="function">AnalyticsService</span>(db)
    density = analytics.<span class="function">get_hexagon_density</span>(hours=hours)
    
    <span class="keyword">return</span> {
        <span class="string">"total_hexagons"</span>: <span class="function">len</span>(density),
        <span class="string">"data"</span>: density
    }


<span class="decorator">@app.get</span>(<span class="string">"/api/analytics/routes"</span>)
<span class="keyword">async def</span> <span class="function">get_top_routes</span>(
    limit: <span class="class-name">int</span> = <span class="number">10</span>,
    db: <span class="class-name">Session</span> = <span class="function">Depends</span>(get_db)
):
    <span class="string">"""Ù…Ø­Ø¨ÙˆØ¨â€ŒØªØ±ÛŒÙ† Ù…Ø³ÛŒØ±Ù‡Ø§"""</span>
    analytics = <span class="function">AnalyticsService</span>(db)
    routes = analytics.<span class="function">get_top_routes</span>(limit=limit)
    <span class="keyword">return</span> {<span class="string">"routes"</span>: routes}


<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    <span class="keyword">import</span> uvicorn
    uvicorn.<span class="function">run</span>(app, host=<span class="string">"0.0.0.0"</span>, port=<span class="number">8000</span>)
            </div>

            <h3>ğŸš€ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ API</h3>
            
            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Ø±ÙˆØ´ 1: Ø¨Ø§ uvicorn Ù…Ø³ØªÙ‚ÛŒÙ…</span>
uvicorn app.main:app --reload --host <span class="number">0.0.0.0</span> --port <span class="number">8000</span>

<span class="comment"># Ø±ÙˆØ´ 2: Ø§Ø¬Ø±Ø§ÛŒ ÙØ§ÛŒÙ„ main.py</span>
python -m app.main
            </div>

            <div class="output-box">
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process
INFO:     Started server process
INFO:     Waiting for application startup.
INFO:     Application startup complete.
            </div>

            <h3>ğŸ“¡ ØªØ³Øª API Ø¨Ø§ cURL</h3>

            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª</span>
curl -X POST <span class="string">"http://localhost:8000/api/pricing/calculate"</span> \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{
    "pickup_lat": 35.6997,
    "pickup_lng": 51.3381,
    "distance_km": 5.0
  }'</span>

<span class="comment"># Ø¯Ø±ÛŒØ§ÙØª hotspots</span>
curl <span class="string">"http://localhost:8000/api/analytics/hotspots?hours=1&amp;min_rides=3"</span>
            </div>

            <div class="tip-box">
                <h4>ğŸ“š Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø®ÙˆØ¯Ú©Ø§Ø±</h4>
                <p>FastAPI Ø¨Ù‡ ØµÙˆØ±Øª Ø®ÙˆØ¯Ú©Ø§Ø± Ù…Ø³ØªÙ†Ø¯Ø§Øª ØªØ¹Ø§Ù…Ù„ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ø¯:</p>
                <ul>
                    <li><strong>Swagger UI:</strong> http://localhost:8000/docs</li>
                    <li><strong>ReDoc:</strong> http://localhost:8000/redoc</li>
                </ul>
            </div>
        </div>

        <!-- ØªÙˆÙ„ÛŒØ¯ Ù†Ù‚Ø´Ù‡ -->
        <div class="section">
            <h2>
                <span class="section-number">8</span>
                ØªÙˆÙ„ÛŒØ¯ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ Ø¨Ø§ Folium
            </h2>

            <div class="code-header">ğŸ app/utils/map_generator.py</div>
            <div class="code-block">
<span class="keyword">import</span> folium
<span class="keyword">from</span> folium <span class="keyword">import</span> plugins
<span class="keyword">from</span> typing <span class="keyword">import</span> List, Dict
<span class="keyword">import</span> json
<span class="keyword">from</span> app.services.h3_service <span class="keyword">import</span> H3Service


<span class="keyword">class</span> <span class="class-name">MapGenerator</span>:
    <span class="string">"""ØªÙˆÙ„ÛŒØ¯ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ"""</span>
    
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="keyword">self</span>):
        <span class="keyword">self</span>.h3_service = <span class="function">H3Service</span>()
    
    <span class="keyword">def</span> <span class="function">create_heatmap</span>(
        <span class="keyword">self</span>,
        density_data: <span class="class-name">Dict</span>[<span class="class-name">str</span>, <span class="class-name">int</span>],
        center: <span class="class-name">tuple</span> = (<span class="number">35.6997</span>, <span class="number">51.3381</span>),
        zoom: <span class="class-name">int</span> = <span class="number">11</span>
    ) -> <span class="class-name">folium</span>.<span class="class-name">Map</span>:
        <span class="string">"""
        Ø³Ø§Ø®Øª Ù†Ù‚Ø´Ù‡ Ø­Ø±Ø§Ø±ØªÛŒ (Heatmap)
        
        Args:
            density_data: {h3_index: ride_count}
            center: Ù…Ø±Ú©Ø² Ù†Ù‚Ø´Ù‡ (lat, lng)
            zoom: Ø³Ø·Ø­ zoom
        """</span>
        <span class="comment"># Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù‚Ø´Ù‡ Ù¾Ø§ÛŒÙ‡</span>
        m = folium.<span class="function">Map</span>(
            location=center,
            zoom_start=zoom,
            tiles=<span class="string">'OpenStreetMap'</span>
        )
        
        <span class="comment"># Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ heatmap</span>
        heat_data = []
        <span class="keyword">for</span> h3_index, count <span class="keyword">in</span> density_data.<span class="function">items</span>():
            lat, lng = <span class="keyword">self</span>.h3_service.<span class="function">h3_to_lat_lng</span>(h3_index)
            <span class="comment"># ÙˆØ²Ù† Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ±</span>
            heat_data.<span class="function">append</span>([lat, lng, count])
        
        <span class="comment"># Ø§ÙØ²ÙˆØ¯Ù† Ù„Ø§ÛŒÙ‡ heatmap</span>
        plugins.<span class="function">HeatMap</span>(heat_data, radius=<span class="number">15</span>).<span class="function">add_to</span>(m)
        
        <span class="keyword">return</span> m
    
    <span class="keyword">def</span> <span class="function">create_hexagon_map</span>(
        <span class="keyword">self</span>,
        hexagons_data: <span class="class-name">List</span>[<span class="class-name">Dict</span>],
        center: <span class="class-name">tuple</span> = (<span class="number">35.6997</span>, <span class="number">51.3381</span>)
    ) -> <span class="class-name">folium</span>.<span class="class-name">Map</span>:
        <span class="string">"""
        Ù†Ù‚Ø´Ù‡ Ø¨Ø§ Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§ÛŒ Ø±Ù†Ú¯ÛŒ
        
        Args:
            hexagons_data: [
                {
                    'h3_index': str,
                    'value': int,
                    'color': str (optional)
                }
            ]
        """</span>
        m = folium.<span class="function">Map</span>(
            location=center,
            zoom_start=<span class="number">11</span>,
            tiles=<span class="string">'CartoDB positron'</span>
        )
        
        <span class="comment"># ØªØ¹ÛŒÛŒÙ† Ø±Ù†Ú¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ù…Ù‚Ø¯Ø§Ø±</span>
        <span class="keyword">def</span> <span class="function">get_color</span>(value: <span class="class-name">int</span>) -> <span class="class-name">str</span>:
            <span class="keyword">if</span> value < <span class="number">5</span>:
                <span class="keyword">return</span> <span class="string">'#90EE90'</span>  <span class="comment"># Ø³Ø¨Ø² Ø±ÙˆØ´Ù†</span>
            <span class="keyword">elif</span> value < <span class="number">10</span>:
                <span class="keyword">return</span> <span class="string">'#FFD700'</span>  <span class="comment"># Ø²Ø±Ø¯</span>
            <span class="keyword">elif</span> value < <span class="number">20</span>:
                <span class="keyword">return</span> <span class="string">'#FFA500'</span>  <span class="comment"># Ù†Ø§Ø±Ù†Ø¬ÛŒ</span>
            <span class="keyword">else</span>:
                <span class="keyword">return</span> <span class="string">'#FF0000'</span>  <span class="comment"># Ù‚Ø±Ù…Ø²</span>
        
        <span class="comment"># Ø±Ø³Ù… Ù‡Ø± Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ</span>
        <span class="keyword">for</span> hex_data <span class="keyword">in</span> hexagons_data:
            h3_index = hex_data[<span class="string">'h3_index'</span>]
            value = hex_data[<span class="string">'value'</span>]
            
            <span class="comment"># Ø¯Ø±ÛŒØ§ÙØª Ù…Ø±Ø²Ù‡Ø§</span>
            boundary = <span class="keyword">self</span>.h3_service.<span class="function">get_hexagon_boundary</span>(h3_index)
            
            <span class="comment"># ØªØ¹ÛŒÛŒÙ† Ø±Ù†Ú¯</span>
            color = hex_data.<span class="function">get</span>(<span class="string">'color'</span>, <span class="function">get_color</span>(value))
            
            <span class="comment"># Ø±Ø³Ù… Polygon</span>
            folium.<span class="function">Polygon</span>(
                locations=boundary,
                color=color,
                fill=<span class="keyword">True</span>,
                fillColor=color,
                fillOpacity=<span class="number">0.6</span>,
                weight=<span class="number">1</span>,
                popup=<span class="string">f"Rides: {value}"</span>
            ).<span class="function">add_to</span>(m)
        
        <span class="keyword">return</span> m
    
    <span class="keyword">def</span> <span class="function">create_hotspot_map</span>(
        <span class="keyword">self</span>,
        hotspots: <span class="class-name">List</span>[<span class="class-name">Dict</span>],
        center: <span class="class-name">tuple</span> = (<span class="number">35.6997</span>, <span class="number">51.3381</span>)
    ) -> <span class="class-name">folium</span>.<span class="class-name">Map</span>:
        <span class="string">"""
        Ù†Ù‚Ø´Ù‡ Ù†Ù…Ø§ÛŒØ´ hotspots Ø¨Ø§ marker
        
        Args:
            hotspots: Ù„ÛŒØ³Øª hotspots Ø§Ø² AnalyticsService
        """</span>
        m = folium.<span class="function">Map</span>(
            location=center,
            zoom_start=<span class="number">11</span>,
            tiles=<span class="string">'OpenStreetMap'</span>
        )
        
        <span class="comment"># Ø§ÙØ²ÙˆØ¯Ù† marker Ø¨Ø±Ø§ÛŒ Ù‡Ø± hotspot</span>
        <span class="keyword">for</span> spot <span class="keyword">in</span> hotspots:
            <span class="comment"># ØªØ¹ÛŒÛŒÙ† Ø±Ù†Ú¯ Ùˆ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªØ±Ø§Ú©Ù…</span>
            <span class="keyword">if</span> spot[<span class="string">'intensity'</span>] == <span class="string">'high'</span>:
                color = <span class="string">'red'</span>
                radius = <span class="number">15</span>
            <span class="keyword">else</span>:
                color = <span class="string">'orange'</span>
                radius = <span class="number">10</span>
            
            <span class="comment"># Ø§ÙØ²ÙˆØ¯Ù† CircleMarker</span>
            folium.<span class="function">CircleMarker</span>(
                location=(spot[<span class="string">'lat'</span>], spot[<span class="string">'lng'</span>]),
                radius=radius,
                popup=<span class="string">f"&lt;b&gt;{spot['ride_count']}&lt;/b&gt; rides&lt;br&gt;{spot['h3_index']}"</span>,
                color=color,
                fill=<span class="keyword">True</span>,
                fillColor=color,
                fillOpacity=<span class="number">0.7</span>
            ).<span class="function">add_to</span>(m)
        
        <span class="keyword">return</span> m
    
    <span class="keyword">def</span> <span class="function">save_map</span>(<span class="keyword">self</span>, map_obj: <span class="class-name">folium</span>.<span class="class-name">Map</span>, filename: <span class="class-name">str</span>) -> <span class="class-name">None</span>:
        <span class="string">"""Ø°Ø®ÛŒØ±Ù‡ Ù†Ù‚Ø´Ù‡ Ø¨Ù‡ ÙØ§ÛŒÙ„ HTML"""</span>
        map_obj.<span class="function">save</span>(filename)
        <span class="keyword">print</span>(<span class="string">f"âœ… Map saved to: {filename}"</span>)


<span class="comment"># Ù…Ø«Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡</span>
<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    <span class="keyword">from</span> app.database <span class="keyword">import</span> SessionLocal
    <span class="keyword">from</span> app.services.analytics <span class="keyword">import</span> AnalyticsService
    
    db = <span class="function">SessionLocal</span>()
    analytics = <span class="function">AnalyticsService</span>(db)
    generator = <span class="function">MapGenerator</span>()
    
    <span class="comment"># ØªÙˆÙ„ÛŒØ¯ Ù†Ù‚Ø´Ù‡ hotspots</span>
    hotspots = analytics.<span class="function">get_hotspots</span>(hours=<span class="number">24</span>, min_rides=<span class="number">3</span>)
    hotspot_map = generator.<span class="function">create_hotspot_map</span>(hotspots)
    generator.<span class="function">save_map</span>(hotspot_map, <span class="string">'hotspots_map.html'</span>)
    
    <span class="comment"># ØªÙˆÙ„ÛŒØ¯ heatmap</span>
    density = analytics.<span class="function">get_hexagon_density</span>(hours=<span class="number">24</span>)
    heatmap = generator.<span class="function">create_heatmap</span>(density)
    generator.<span class="function">save_map</span>(heatmap, <span class="string">'heatmap.html'</span>)
            </div>
        </div>

        <!-- ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÙˆÙ†Ù‡ -->
        <div class="section">
            <h2>
                <span class="section-number">9</span>
                ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª
            </h2>

            <div class="code-header">ğŸ scripts/generate_sample_data.py</div>
            <div class="code-block">
<span class="keyword">import</span> random
<span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta
<span class="keyword">from</span> sqlalchemy.orm <span class="keyword">import</span> Session
<span class="keyword">from</span> app.database <span class="keyword">import</span> SessionLocal, engine
<span class="keyword">from</span> app.models.ride <span class="keyword">import</span> Ride, Base
<span class="keyword">from</span> app.services.h3_service <span class="keyword">import</span> H3Service
<span class="keyword">from</span> geoalchemy2 <span class="keyword">import</span> WKTElement


<span class="keyword">def</span> <span class="function">generate_sample_rides</span(db: <span class="class-name">Session</span>, count: <span class="class-name">int</span> = <span class="number">1000</span>) -> <span class="class-name">None</span>:
    <span class="string">"""
    ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆÙ†Ù‡ Ø³ÙØ±
    
    Args:
        db: Session Ø¯ÛŒØªØ§Ø¨ÛŒØ³
        count: ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ± Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯
    """</span>
    h3_service = <span class="function">H3Service</span>()
    
    <span class="comment"># Ù…Ø®ØªØµØ§Øª ØªÙ‡Ø±Ø§Ù† (Ù…Ø­Ø¯ÙˆØ¯Ù‡ ØªÙ‚Ø±ÛŒØ¨ÛŒ)</span>
    tehran_bounds = {
        <span class="string">'lat_min'</span>: <span class="number">35.55</span>,
        <span class="string">'lat_max'</span>: <span class="number">35.85</span>,
        <span class="string">'lng_min'</span>: <span class="number">51.15</span>,
        <span class="string">'lng_max'</span>: <span class="number">51.60</span>
    }
    
    <span class="comment"># Ù…Ù†Ø§Ø·Ù‚ Ù¾Ø±ØªØ±Ø¯Ø¯ (hotspots)</span>
    hotspots = [
        (<span class="number">35.6997</span>, <span class="number">51.3381</span>),  <span class="comment"># Ù…ÛŒØ¯Ø§Ù† Ø¢Ø²Ø§Ø¯ÛŒ</span>
        (<span class="number">35.7219</span>, <span class="number">51.4056</span>),  <span class="comment"># Ù…ÛŒØ¯Ø§Ù† ÙˆÙ„ÛŒØ¹ØµØ±</span>
        (<span class="number">35.7010</span>, <span class="number">51.4080</span>),  <span class="comment"># Ù…ÛŒØ¯Ø§Ù† ØªØ¬Ø±ÛŒØ´</span>
        (<span class="number">35.6892</span>, <span class="number">51.3890</span>),  <span class="comment"># Ù…ÛŒØ¯Ø§Ù† Ø§Ù†Ù‚Ù„Ø§Ø¨</span>
    ]
    
    statuses = [<span class="string">'completed'</span>, <span class="string">'completed'</span>, <span class="string">'completed'</span>, <span class="string">'cancelled'</span>]
    
    <span class="keyword">print</span>(<span class="string">f"ğŸ”„ Generating {count} sample rides..."</span>)
    
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(count):
        <span class="comment"># 70% Ø§Ø­ØªÙ…Ø§Ù„ Ø§Ù†ØªØ®Ø§Ø¨ hotspotØŒ 30% ØªØµØ§Ø¯ÙÛŒ</span>
        <span class="keyword">if</span> random.<span class="function">random</span>() < <span class="number">0.7</span>:
            <span class="comment"># Ø§Ù†ØªØ®Ø§Ø¨ Ø§Ø² hotspots</span>
            base_lat, base_lng = random.<span class="function">choice</span>(hotspots)
            <span class="comment"># Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† noise Ú©ÙˆÚ†Ú©</span>
            pickup_lat = base_lat + random.<span class="function">uniform</span>(-<span class="number">0.01</span>, <span class="number">0.01</span>)
            pickup_lng = base_lng + random.<span class="function">uniform</span>(-<span class="number">0.01</span>, <span class="number">0.01</span>)
        <span class="keyword">else</span>:
            <span class="comment"># Ù…Ø®ØªØµØ§Øª ØªØµØ§Ø¯ÙÛŒ</span>
            pickup_lat = random.<span class="function">uniform</span>(
                tehran_bounds[<span class="string">'lat_min'</span>], 
                tehran_bounds[<span class="string">'lat_max'</span>]
            )
            pickup_lng = random.<span class="function">uniform</span>(
                tehran_bounds[<span class="string">'lng_min'</span>], 
                tehran_bounds[<span class="string">'lng_max'</span>]
            )
        
        <span class="comment"># Ù…Ù‚ØµØ¯ (Ø¯Ø± Ø´Ø¹Ø§Ø¹ 5 Ú©ÛŒÙ„ÙˆÙ…ØªØ±ÛŒ)</span>
        dropoff_lat = pickup_lat + random.<span class="function">uniform</span>(-<span class="number">0.05</span>, <span class="number">0.05</span>)
        dropoff_lng = pickup_lng + random.<span class="function">uniform</span>(-<span class="number">0.05</span>, <span class="number">0.05</span>)
        
        <span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ H3</span>
        pickup_h3 = h3_service.<span class="function">lat_lng_to_h3</span>(pickup_lat, pickup_lng)
        dropoff_h3 = h3_service.<span class="function">lat_lng_to_h3</span>(dropoff_lat, dropoff_lng)
        
        <span class="comment"># Ø²Ù…Ø§Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øª (24 Ø³Ø§Ø¹Øª Ú¯Ø°Ø´ØªÙ‡)</span>
        hours_ago = random.<span class="function">randint</span>(<span class="number">0</span>, <span class="number">24</span>)
        request_time = datetime.<span class="function">utcnow</span>() - <span class="function">timedelta</span>(hours=hours_ago)
        
        <span class="comment"># Ù…Ø³Ø§ÙØª Ùˆ Ø²Ù…Ø§Ù†</span>
        distance_km = random.<span class="function">uniform</span>(<span class="number">1.0</span>, <span class="number">15.0</span>)
        duration_minutes = <span class="function">int</span>(distance_km * random.<span class="function">uniform</span>(<span class="number">3</span>, <span class="number">8</span>))
        
        <span class="comment"># Ù‚ÛŒÙ…Øª</span>
        base_price = <span class="number">5000</span> + (distance_km * <span class="number">15000</span>)
        surge = random.<span class="function">choice</span>([<span class="number">1.0</span>, <span class="number">1.0</span>, <span class="number">1.2</span>, <span class="number">1.5</span>, <span class="number">2.0</span>])
        final_price = base_price * surge
        
        <span class="comment"># ÙˆØ¶Ø¹ÛŒØª</span>
        status = random.<span class="function">choice</span>(statuses)
        
        <span class="comment"># Ø³Ø§Ø®Øª Ø±Ú©ÙˆØ±Ø¯</span>
        ride = <span class="function">Ride</span>(
            driver_id=random.<span class="function">randint</span>(<span class="number">1</span>, <span class="number">100</span>),
            passenger_id=random.<span class="function">randint</span>(<span class="number">1000</span>, <span class="number">5000</span>),
            pickup_location=<span class="function">WKTElement</span>(<span class="string">f'POINT({pickup_lng} {pickup_lat})'</span>, srid=<span class="number">4326</span>),
            dropoff_location=<span class="function">WKTElement</span>(<span class="string">f'POINT({dropoff_lng} {dropoff_lat})'</span>, srid=<span class="number">4326</span>),
            pickup_h3=pickup_h3,
            dropoff_h3=dropoff_h3,
            request_time=request_time,
            pickup_time=request_time + <span class="function">timedelta</span>(minutes=random.<span class="function">randint</span>(<span class="number">2</span>, <span class="number">10</span>)),
            dropoff_time=request_time + <span class="function">timedelta</span>(minutes=duration_minutes + <span class="number">10</span>),
            base_price=base_price,
            surge_multiplier=surge,
            final_price=final_price,
            status=status,
            distance_km=distance_km,
            duration_minutes=duration_minutes
        )
        
        db.<span class="function">add</span>(ride)
        
        <span class="keyword">if</span> (i + <span class="number">1</span>) % <span class="number">100</span> == <span class="number">0</span>:
            db.<span class="function">commit</span>()
            <span class="keyword">print</span>(<span class="string">f"  âœ“ {i + 1}/{count} rides generated"</span>)
    
    db.<span class="function">commit</span>()
    <span class="keyword">print</span>(<span class="string">f"âœ… Successfully generated {count} rides!"</span>)


<span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:
    <span class="comment"># Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„</span>
    Base.metadata.<span class="function">create_all</span>(bind=engine)
    
    <span class="comment"># ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡</span>
    db = <span class="function">SessionLocal</span>()
    <span class="keyword">try</span>:
        <span class="function">generate_sample_rides</span>(db, count=<span class="number">1000</span>)
    <span class="keyword">finally</span>:
        db.<span class="function">close</span>()
            </div>

            <div class="code-header">ğŸ’» Terminal - Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª</div>
            <div class="code-block">
python scripts/generate_sample_data.py
            </div>

            <div class="output-box">
ğŸ”„ Generating 1000 sample rides...
  âœ“ 100/1000 rides generated
  âœ“ 200/1000 rides generated
  âœ“ 300/1000 rides generated
  ...
  âœ“ 1000/1000 rides generated
âœ… Successfully generated 1000 rides!
            </div>
        </div>

        <!-- ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø­Ø¯ -->
        <div class="section">
            <h2>
                <span class="section-number">10</span>
                ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø­Ø¯ (Unit Tests)
            </h2>

            <div class="code-header">ğŸ tests/test_h3_service.py</div>
            <div class="code-block">
<span class="keyword">import</span> pytest
<span class="keyword">from</span> app.services.h3_service <span class="keyword">import</span> H3Service


<span class="keyword">class</span> <span class="class-name">TestH3Service</span>:
    <span class="string">"""ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³ H3"""</span>
    
    <span class="keyword">def</span> <span class="function">setup_method</span>(<span class="keyword">self</span>):
        <span class="string">"""Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù‚Ø¨Ù„ Ø§Ø² Ù‡Ø± ØªØ³Øª"""</span>
        <span class="keyword">self</span>.service = <span class="function">H3Service</span>(resolution=<span class="number">9</span>)
        <span class="keyword">self</span>.tehran_lat = <span class="number">35.6997</span>
        <span class="keyword">self</span>.tehran_lng = <span class="number">51.3381</span>
    
    <span class="keyword">def</span> <span class="function">test_lat_lng_to_h3</span>(<span class="keyword">self</span>):
        <span class="string">"""ØªØ³Øª ØªØ¨Ø¯ÛŒÙ„ Ù…Ø®ØªØµØ§Øª Ø¨Ù‡ H3"""</span>
        h3_index = <span class="keyword">self</span>.service.<span class="function">lat_lng_to_h3</span>(
            <span class="keyword">self</span>.tehran_lat, 
            <span class="keyword">self</span>.tehran_lng
        )
        
        <span class="keyword">assert</span> <span class="function">isinstance</span>(h3_index, <span class="function">str</span>)
        <span class="keyword">assert</span> <span class="function">len</span>(h3_index) == <span class="number">15</span>
        <span class="keyword">assert</span> h3_index.<span class="function">startswith</span>(<span class="string">'89'</span>)  <span class="comment"># resolution 9</span>
    
    <span class="keyword">def</span> <span class="function">test_h3_to_lat_lng</span>(<span class="keyword">self</span>):
        <span class="string">"""ØªØ³Øª ØªØ¨Ø¯ÛŒÙ„ H3 Ø¨Ù‡ Ù…Ø®ØªØµØ§Øª"""</span>
        h3_index = <span class="keyword">self</span>.service.<span class="function">lat_lng_to_h3</span>(
            <span class="keyword">self</span>.tehran_lat, 
            <span class="keyword">self</span>.tehran_lng
        )
        lat, lng = <span class="keyword">self</span>.service.<span class="function">h3_to_lat_lng</span>(h3_index)
        
        <span class="comment"># Ø¨Ø±Ø±Ø³ÛŒ Ø¯Ù‚Øª (Ø¨Ø§ÛŒØ¯ Ù†Ø²Ø¯ÛŒÚ© Ø¨Ø§Ø´Ø¯)</span>
        <span class="keyword">assert</span> <span class="function">abs</span>(lat - <span class="keyword">self</span>.tehran_lat) < <span class="number">0.01</span>
        <span class="keyword">assert</span> <span class="function">abs</span>(lng - <span class="keyword">self</span>.tehran_lng) < <span class="number">0.01</span>
    
    <span class="keyword">def</span> <span class="function">test_get_neighbors</span>(<span class="keyword">self</span>):
        <span class="string">"""ØªØ³Øª Ø¯Ø±ÛŒØ§ÙØª Ù‡Ù…Ø³Ø§ÛŒÚ¯Ø§Ù†"""</span>
        h3_index = <span class="keyword">self</span>.service.<span class="function">lat_lng_to_h3</span>(
            <span class="keyword">self</span>.tehran_lat, 
            <span class="keyword">self</span>.tehran_lng
        )
        
        <span class="comment"># k=1 Ø¨Ø§ÛŒØ¯ 7 Ø³Ù„ÙˆÙ„ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†Ø¯ (Ø®ÙˆØ¯ + 6 Ù‡Ù…Ø³Ø§ÛŒÙ‡)</span>
        neighbors = <span class="keyword">self</span>.service.<span class="function">get_neighbors</span>(h3_index, k=<span class="number">1</span>)
        <span class="keyword">assert</span> <span class="function">len</span>(neighbors) == <span class="number">7</span>
        <span class="keyword">assert</span> h3_index <span class="keyword">in</span> neighbors
    
    <span class="keyword">def</span> <span class="function">test_calculate_distance</span>(<span class="keyword">self</span>):
        <span class="string">"""ØªØ³Øª Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙØ§ØµÙ„Ù‡"""</span>
        h3_1 = <span class="keyword">self</span>.service.<span class="function">lat_lng_to_h3</span>(<span class="number">35.6997</span>, <span class="number">51.3381</span>)
        h3_2 = <span class="keyword">self</span>.service.<span class="function">lat_lng_to_h3</span>(<span class="number">35.7219</span>, <span class="number">51.4056</span>)
        
        distance = <span class="keyword">self</span>.service.<span class="function">calculate_distance</span>(h3_1, h3_2)
        
        <span class="keyword">assert</span> <span class="function">isinstance</span>(distance, <span class="function">int</span>)
        <span class="keyword">assert</span> distance > <span class="number">0</span>
    
    <span class="keyword">def</span> <span class="function">test_invalid_coordinates</span>(<span class="keyword">self</span>):
        <span class="string">"""ØªØ³Øª Ù…Ø®ØªØµØ§Øª Ù†Ø§Ù…Ø¹ØªØ¨Ø±"""</span>
        <span class="keyword">with</span> pytest.<span class="function">raises</span>(ValueError):
            <span class="keyword">self</span>.service.<span class="function">lat_lng_to_h3</span>(<span class="number">999</span>, <span class="number">999</span>)
            </div>

            <div class="code-header">ğŸ tests/test_pricing.py</div>
            <div class="code-block">
<span class="keyword">import</span> pytest
<span class="keyword">from</span> app.services.pricing <span class="keyword">import</span> PricingService
<span class="keyword">from</span> app.database <span class="keyword">import</span> SessionLocal


<span class="keyword">class</span> <span class="class-name">TestPricingService</span>:
    <span class="string">"""ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆÛŒØ³ Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ"""</span>
    
    <span class="keyword">def</span> <span class="function">setup_method</span>(<span class="keyword">self</span>):
        <span class="keyword">self</span>.db = <span class="function">SessionLocal</span>()
        <span class="keyword">self</span>.pricing = <span class="function">PricingService</span>(<span class="keyword">self</span>.db)
    
    <span class="keyword">def</span> <span class="function">teardown_method</span>(<span class="keyword">self</span>):
        <span class="keyword">self</span>.db.<span class="function">close</span>()
    
    <span class="keyword">def</span> <span class="function">test_calculate_base_price</span>(<span class="keyword">self</span>):
        <span class="string">"""ØªØ³Øª Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ù¾Ø§ÛŒÙ‡"""</span>
        price = <span class="keyword">self</span>.pricing.<span class="function">calculate_base_price</span>(distance_km=<span class="number">5.0</span>)
        
        expected = <span class="number">5000</span> + (<span class="number">5.0</span> * <span class="number">15000</span>)
        <span class="keyword">assert</span> price == expected
    
    <span class="keyword">def</span> <span class="function">test_minimum_price</span>(<span class="keyword">self</span>):
        <span class="string">"""ØªØ³Øª Ø­Ø¯Ø§Ù‚Ù„ Ù‚ÛŒÙ…Øª"""</span>
        price = <span class="keyword">self</span>.pricing.<span class="function">calculate_base_price</span>(distance_km=<span class="number">0.1</span>)
        
        <span class="keyword">assert</span> price >= <span class="keyword">self</span>.pricing.MIN_PRICE
    
    <span class="keyword">def</span> <span class="function">test_surge_multiplier_range</span>(<span class="keyword">self</span>):
        <span class="string">"""ØªØ³Øª Ù…Ø­Ø¯ÙˆØ¯Ù‡ surge multiplier"""</span>
        surge = <span class="keyword">self</span>.pricing.<span class="function">calculate_surge_multiplier</span>(<span class="string">"891f1d4a9ffffff"</span>)
        
        <span class="keyword">assert</span> <span class="number">1.0</span> <= surge <= <span class="keyword">self</span>.pricing.MAX_SURGE
    
    <span class="keyword">def</span> <span class="function">test_calculate_ride_price</span>(<span class="keyword">self</span>):
        <span class="string">"""ØªØ³Øª Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª Ú©Ø§Ù…Ù„"""</span>
        result = <span class="keyword">self</span>.pricing.<span class="function">calculate_ride_price</span>(
            pickup_lat=<span class="number">35.6997</span>,
            pickup_lng=<span class="number">51.3381</span>,
            distance_km=<span class="number">5.0</span>
        )
        
        <span class="keyword">assert</span> <span class="string">'base_price'</span> <span class="keyword">in</span> result
        <span class="keyword">assert</span> <span class="string">'surge_multiplier'</span> <span class="keyword">in</span> result
        <span class="keyword">assert</span> <span class="string">'final_price'</span> <span class="keyword">in</span> result
        <span class="keyword">assert</span> <span class="string">'h3_index'</span> <span class="keyword">in</span> result
        
        <span class="keyword">assert</span> result[<span class="string">'final_price'</span>] >= result[<span class="string">'base_price'</span>]
            </div>

            <div class="code-header">ğŸ’» Terminal - Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§</div>
            <div class="code-block">
<span class="comment"># Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§</span>
pytest tests/ -v

<span class="comment"># Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ Ø®Ø§Øµ</span>
pytest tests/test_h3_service.py -v

<span class="comment"># Ø§Ø¬Ø±Ø§ÛŒ Ø¨Ø§ coverage</span>
pytest tests/ --cov=app --cov-report=html
            </div>

            <div class="output-box">
========================= test session starts =========================
collected 7 items

tests/test_h3_service.py::TestH3Service::test_lat_lng_to_h3 PASSED
tests/test_h3_service.py::TestH3Service::test_h3_to_lat_lng PASSED
tests/test_h3_service.py::TestH3Service::test_get_neighbors PASSED
tests/test_h3_service.py::TestH3Service::test_calculate_distance PASSED
tests/test_pricing.py::TestPricingService::test_calculate_base_price PASSED
tests/test_pricing.py::TestPricingService::test_minimum_price PASSED
tests/test_pricing.py::TestPricingService::test_calculate_ride_price PASSED

========================= 7 passed in 2.34s ==========================
            </div>
        </div>

        <!-- Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ -->
        <div class="section">
            <h2>
                <span class="section-number">11</span>
                Ø®Ù„Ø§ØµÙ‡ Ùˆ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ
            </h2>

            <div class="info-box">
                <h4>âœ… Ú†Ù‡ Ø³Ø§Ø®ØªÛŒÙ…ØŸ</h4>
                <p>ÛŒÚ© Ø³ÛŒØ³ØªÙ… Ú©Ø§Ù…Ù„ ØªØ­Ù„ÛŒÙ„ ØªØ§Ú©Ø³ÛŒ Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ±:</p>
                <ul>
                    <li><strong>Ø´Ø§Ø®Øµâ€ŒØ¨Ù†Ø¯ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ:</strong> Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² H3 Ø¨Ø±Ø§ÛŒ ØªÙ‚Ø³ÛŒÙ… Ø´Ù‡Ø± Ø¨Ù‡ Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§</li>
                    <li><strong>Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§:</strong> Ù…Ø­Ø§Ø³Ø¨Ù‡ surge multiplier Ø¨Ø± Ø§Ø³Ø§Ø³ ØªÙ‚Ø§Ø¶Ø§ÛŒ Real-time</li>
                    <li><strong>ØªØ­Ù„ÛŒÙ„ Hotspot:</strong> Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ù…Ù†Ø§Ø·Ù‚ Ù¾Ø±ØªÙ‚Ø§Ø¶Ø§</li>
                    <li><strong>REST API:</strong> Ø§Ø±Ø§Ø¦Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ÙˆØ¨ Ø¨Ø§ FastAPI</li>
                    <li><strong>Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ:</strong> ØªØ¬Ø³Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Folium</li>
                    <li><strong>Cache:</strong> Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Redis Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ</li>
                    <li><strong>Database:</strong> Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ú©Ø§Ù†ÛŒ Ø¨Ø§ PostGIS</li>
                </ul>
            </div>

            <h3>ğŸ“Š Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù†Ù‡Ø§ÛŒÛŒ</h3>
            <table>
                <thead>
                    <tr>
                        <th>Ù„Ø§ÛŒÙ‡</th>
                        <th>ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ</th>
                        <th>Ù†Ù‚Ø´</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Presentation</strong></td>
                        <td>FastAPI + Folium</td>
                        <td>API Ùˆ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ</td>
                    </tr>
                    <tr>
                        <td><strong>Business Logic</strong></td>
                        <td>Python Services</td>
                        <td>Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒØŒ ØªØ­Ù„ÛŒÙ„ØŒ H3</td>
                    </tr>
                    <tr>
                        <td><strong>Data Layer</strong></td>
                        <td>PostgreSQL + PostGIS</td>
                        <td>Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ú©Ø§Ù†ÛŒ</td>
                    </tr>
                    <tr>
                        <td><strong>Cache</strong></td>
                        <td>Redis</td>
                        <td>Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯</td>
                    </tr>
                </tbody>
            </table>

            <h3>ğŸš€ Ø¨Ù‡Ø¨ÙˆØ¯Ù‡Ø§ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ</h3>
            <ol>
                <li><strong>Machine Learning:</strong> Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ ØªÙ‚Ø§Ø¶Ø§ Ø¨Ø§ Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ…â€ŒÙ‡Ø§ÛŒ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ù…Ø§Ø´ÛŒÙ†</li>
                <li><strong>Real-time Streaming:</strong> Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Kafka Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¬Ø±ÛŒØ§Ù†ÛŒ</li>
                <li><strong>Dashboard:</strong> Ø³Ø§Ø®Øª Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ØªØ¹Ø§Ù…Ù„ÛŒ Ø¨Ø§ React/Vue</li>
                <li><strong>Microservices:</strong> ØªÙ‚Ø³ÛŒÙ… Ø¨Ù‡ Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ù…Ø³ØªÙ‚Ù„</li>
                <li><strong>Load Balancing:</strong> Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Nginx/HAProxy</li>
                <li><strong>Monitoring:</strong> Ø§ÙØ²ÙˆØ¯Ù† Prometheus + Grafana</li>
                <li><strong>CI/CD:</strong> Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ù¾Ø§ÛŒÙ¾Ù„Ø§ÛŒÙ† Ø®ÙˆØ¯Ú©Ø§Ø±</li>
            </ol>

            <h3>ğŸ“š Ù…Ù†Ø§Ø¨Ø¹ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø¨ÛŒØ´ØªØ±</h3>
            <div class="tip-box">
                <ul>
                    <li><strong>H3 Documentation:</strong> <a href="https://h3geo.org" target="_blank">h3geo.org</a></li>
                    <li><strong>FastAPI Docs:</strong> <a href="https://fastapi.tiangolo.com" target="_blank">fastapi.tiangolo.com</a></li>
                    <li><strong>PostGIS:</strong> <a href="https://postgis.net" target="_blank">postgis.net</a></li>
                    <li><strong>Folium:</strong> <a href="https://python-visualization.github.io/folium" target="_blank">folium docs</a></li>
                    <li><strong>GitHub Repo:</strong> Ú©Ø¯ Ú©Ø§Ù…Ù„ Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡</li>
                </ul>
            </div>

            <div class="warning-box">
                <h4>âš ï¸ Ù†Ú©Ø§Øª Ù…Ù‡Ù… Ø¨Ø±Ø§ÛŒ Production</h4>
                <ul>
                    <li>Ø§Ø² Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù…Ø­ÛŒØ·ÛŒ Ø¨Ø±Ø§ÛŒ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø­Ø³Ø§Ø³ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    <li>Connection Pool Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø±Ø§ Ø¨Ù‡ÛŒÙ†Ù‡ Ú©Ù†ÛŒØ¯</li>
                    <li>Rate Limiting Ø¨Ø±Ø§ÛŒ API Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†ÛŒØ¯</li>
                    <li>Logging Ùˆ Monitoring Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ú©Ù†ÛŒØ¯</li>
                    <li>Backup Ù…Ù†Ø¸Ù… Ø§Ø² Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¨Ú¯ÛŒØ±ÛŒØ¯</li>
                    <li>Security Headers Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯</li>
                </ul>
            </div>
        </div>

        <!-- Ø§Ø¬Ø±Ø§ÛŒ Ú©Ø§Ù…Ù„ Ù¾Ø±ÙˆÚ˜Ù‡ -->
        <div class="section">
            <h2>
                <span class="section-number">12</span>
                Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ú©Ø§Ù…Ù„ Ù¾Ø±ÙˆÚ˜Ù‡
            </h2>

            <h3><span class="step-number">1</span> Clone Ùˆ Setup</h3>
            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Clone Ù¾Ø±ÙˆÚ˜Ù‡ (ÙØ±Ø¶ÛŒ)</span>
git clone https://github.com/your-repo/taxi-analytics.git
cd taxi-analytics

<span class="comment"># Ø§ÛŒØ¬Ø§Ø¯ Ù…Ø­ÛŒØ· Ù…Ø¬Ø§Ø²ÛŒ</span>
python -m venv venv
source venv/bin/activate  <span class="comment"># Linux/Mac</span>
venv\Scripts\activate     <span class="comment"># Windows</span>

<span class="comment"># Ù†ØµØ¨ Ù¾Ú©ÛŒØ¬â€ŒÙ‡Ø§</span>
pip install -r requirements.txt
            </div>

            <h3><span class="step-number">2</span> Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³</h3>
            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ PostgreSQL Ùˆ Redis</span>
docker-compose up -d

<span class="comment"># Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯Ø§ÙˆÙ„</span>
python -m app.database

<span class="comment"># ØªÙˆÙ„ÛŒØ¯ Ø¯Ø§Ø¯Ù‡ Ù†Ù…ÙˆÙ†Ù‡</span>
python scripts/generate_sample_data.py
            </div>

            <h3><span class="step-number">3</span> Ø§Ø¬Ø±Ø§ÛŒ API</h3>
            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø³Ø±ÙˆØ±</span>
uvicorn app.main:app --reload --host <span class="number">0.0.0.0</span> --port <span class="number">8000</span>

<span class="comment"># Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø³ØªÙ†Ø¯Ø§Øª</span>
<span class="comment"># Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù…Ø±ÙˆØ±Ú¯Ø±: http://localhost:8000/docs</span>
            </div>

            <h3><span class="step-number">4</span> ØªÙˆÙ„ÛŒØ¯ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§</h3>
            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Ø§Ø¬Ø±Ø§ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªÙˆÙ„ÛŒØ¯ Ù†Ù‚Ø´Ù‡</span>
python -m app.utils.map_generator

<span class="comment"># ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø´Ø¯Ù‡:</span>
<span class="comment"># - hotspots_map.html</span>
<span class="comment"># - heatmap.html</span>
            </div>

            <h3><span class="step-number">5</span> ØªØ³Øª API</h3>
            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù‚ÛŒÙ…Øª</span>
curl -X POST <span class="string">"http://localhost:8000/api/pricing/calculate"</span> \
  -H <span class="string">"Content-Type: application/json"</span> \
  -d <span class="string">'{
    "pickup_lat": 35.6997,
    "pickup_lng": 51.3381,
    "distance_km": 5.0
  }'</span>

<span class="comment"># Ø¯Ø±ÛŒØ§ÙØª hotspots</span>
curl <span class="string">"http://localhost:8000/api/analytics/hotspots?hours=1&amp;min_rides=3"</span>

<span class="comment"># Ø¯Ø±ÛŒØ§ÙØª ØªØ±Ø§Ú©Ù…</span>
curl <span class="string">"http://localhost:8000/api/analytics/density?hours=24"</span>
            </div>

            <h3><span class="step-number">6</span> Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øªâ€ŒÙ‡Ø§</h3>
            <div class="code-header">ğŸ’» Terminal</div>
            <div class="code-block">
<span class="comment"># Ø§Ø¬Ø±Ø§ÛŒ ØªÙ…Ø§Ù… ØªØ³Øªâ€ŒÙ‡Ø§</span>
pytest tests/ -v

<span class="comment"># Ø¨Ø§ coverage report</span>
pytest tests/ --cov=app --cov-report=html

<span class="comment"># Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú¯Ø²Ø§Ø±Ø´ coverage</span>
<span class="comment"># Ø¨Ø§Ø² Ú©Ø±Ø¯Ù†: htmlcov/index.html</span>
            </div>

            <div class="info-box">
                <h4>ğŸ‰ ØªØ¨Ø±ÛŒÚ©!</h4>
                <p>
                    Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÛŒÚ© Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ ØªØ§Ú©Ø³ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø§ H3 Ø³Ø§Ø®ØªÛŒØ¯. 
                    Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯:
                </p>
                <ul>
                    <li>API Ø±Ø§ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    <li>Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ ØªÙˆÙ„ÛŒØ¯ Ú©Ù†ÛŒØ¯</li>
                    <li>ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø§Ù†Ø¬Ø§Ù… Ø¯Ù‡ÛŒØ¯</li>
                    <li>Ø³ÛŒØ³ØªÙ… Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ø®ÙˆØ¯ Ø³ÙØ§Ø±Ø´ÛŒ Ú©Ù†ÛŒØ¯</li>
                </ul>
            </div>
        </div>

        <!-- Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ø¨ÛŒØ´ØªØ± -->
        <div class="section">
            <h2>
                <span class="section-number">13</span>
                Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
            </h2>

            <h3>ğŸ”¥ Ù…Ø«Ø§Ù„ 1: ØªØ­Ù„ÛŒÙ„ Ø§Ù„Ú¯ÙˆÛŒ Ø²Ù…Ø§Ù†ÛŒ ØªÙ‚Ø§Ø¶Ø§</h3>
            <div class="code-header">ğŸ Python</div>
            <div class="code-block">
<span class="keyword">import</span> pandas <span class="keyword">as</span> pd
<span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt
<span class="keyword">from</span> app.database <span class="keyword">import</span> SessionLocal
<span class="keyword">from</span> app.services.analytics <span class="keyword">import</span> AnalyticsService

<span class="comment"># Ø¯Ø±ÛŒØ§ÙØª Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø²Ù…Ø§Ù†ÛŒ</span>
db = <span class="function">SessionLocal</span>()
analytics = <span class="function">AnalyticsService</span>(db)

pattern = analytics.<span class="function">analyze_time_patterns</span>(days=<span class="number">7</span>)

<span class="comment"># ØªØ¬Ø³Ù…â€ŒØ³Ø§Ø²ÛŒ</span>
pivot = pattern.<span class="function">pivot</span>(
    index=<span class="string">'hour'</span>, 
    columns=<span class="string">'day_of_week'</span>, 
    values=<span class="string">'ride_count'</span>
)

plt.<span class="function">figure</span>(figsize=(<span class="number">12</span>, <span class="number">6</span>))
plt.<span class="function">imshow</span>(pivot.T, cmap=<span class="string">'YlOrRd'</span>, aspect=<span class="string">'auto'</span>)
plt.<span class="function">colorbar</span>(label=<span class="string">'ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ±'</span>)
plt.<span class="function">xlabel</span>(<span class="string">'Ø³Ø§Ø¹Øª Ø±ÙˆØ²'</span>)
plt.<span class="function">ylabel</span>(<span class="string">'Ø±ÙˆØ² Ù‡ÙØªÙ‡'</span>)
plt.<span class="function">title</span>(<span class="string">'Ø§Ù„Ú¯ÙˆÛŒ ØªÙ‚Ø§Ø¶Ø§ Ø¯Ø± Ø·ÙˆÙ„ Ù‡ÙØªÙ‡'</span>)
plt.<span class="function">savefig</span>(<span class="string">'demand_pattern.png'</span>)
<span class="keyword">print</span>(<span class="string">"âœ… Ù†Ù…ÙˆØ¯Ø§Ø± Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯: demand_pattern.png"</span>)
            </div>

            <h3>ğŸ“ Ù…Ø«Ø§Ù„ 2: Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù¾ÙˆØ´Ø´ Ø³Ø±ÙˆÛŒØ³ Ø¯Ø± Ø´Ù‡Ø±</h3>
            <div class="code-header">ğŸ Python</div>
            <div class="code-block">
<span class="keyword">from</span> app.database <span class="keyword">import</span> SessionLocal
<span class="keyword">from</span> app.services.analytics <span class="keyword">import</span> AnalyticsService

<span class="comment"># ØªØ¹Ø±ÛŒÙ Ù…Ø±Ø² ØªÙ‡Ø±Ø§Ù† (Ø³Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡)</span>
tehran_polygon = [
    (<span class="number">51.15</span>, <span class="number">35.55</span>),
    (<span class="number">51.60</span>, <span class="number">35.55</span>),
    (<span class="number">51.60</span>, <span class="number">35.85</span>),
    (<span class="number">51.15</span>, <span class="number">35.85</span>),
    (<span class="number">51.15</span>, <span class="number">35.55</span>)
]

db = <span class="function">SessionLocal</span>()
analytics = <span class="function">AnalyticsService</span>(db)

coverage = analytics.<span class="function">get_coverage_analysis</span>(tehran_polygon)

<span class="keyword">print</span>(<span class="string">f"ğŸ“Š ØªØ­Ù„ÛŒÙ„ Ù¾ÙˆØ´Ø´ Ø³Ø±ÙˆÛŒØ³:"</span>)
<span class="keyword">print</span>(<span class="string">f"  Ú©Ù„ Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§: {coverage['total_hexagons']}"</span>)
<span class="keyword">print</span>(<span class="string">f"  Ù¾ÙˆØ´Ø´ Ø¯Ø§Ø¯Ù‡ Ø´Ø¯Ù‡: {coverage['covered_hexagons']}"</span>)
<span class="keyword">print</span>(<span class="string">f"  Ø¯Ø±ØµØ¯ Ù¾ÙˆØ´Ø´: {coverage['coverage_percentage']}%"</span>)
<span class="keyword">print</span>(<span class="string">f"  Ù…Ù†Ø§Ø·Ù‚ Ø¨Ø¯ÙˆÙ† Ù¾ÙˆØ´Ø´: {len(coverage['uncovered_areas'])}"</span>)
            </div>

            <h3>ğŸ—ºï¸ Ù…Ø«Ø§Ù„ 3: Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡ Ø¨ÛŒÙ† Ø¯Ùˆ Ù†Ù‚Ø·Ù‡</h3>
            <div class="code-header">ğŸ Python</div>
            <div class="code-block">
<span class="keyword">import</span> h3
<span class="keyword">from</span> typing <span class="keyword">import</span> List, Tuple
<span class="keyword">from</span> app.services.h3_service <span class="keyword">import</span> H3Service

<span class="keyword">def</span> <span class="function">find_optimal_route</span>(
    start_lat: <span class="class-name">float</span>,
    start_lng: <span class="class-name">float</span>,
    end_lat: <span class="class-name">float</span>,
    end_lng: <span class="class-name">float</span>
) -> <span class="class-name">List</span>[<span class="class-name">Tuple</span>[<span class="class-name">float</span>, <span class="class-name">float</span>]]:
    <span class="string">"""
    Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù…Ø³ÛŒØ± Ø¨Ù‡ÛŒÙ†Ù‡ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² H3
    
    Returns:
        Ù„ÛŒØ³Øª Ù…Ø®ØªØµØ§Øª Ù…Ø³ÛŒØ±
    """</span>
    service = <span class="function">H3Service</span>()
    
    <span class="comment"># ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ H3</span>
    start_h3 = service.<span class="function">lat_lng_to_h3</span>(start_lat, start_lng)
    end_h3 = service.<span class="function">lat_lng_to_h3</span>(end_lat, end_lng)
    
    <span class="comment"># Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù…Ø³ÛŒØ±</span>
    path = h3.<span class="function">h3_line</span>(start_h3, end_h3)
    
    <span class="comment"># ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ Ù…Ø®ØªØµØ§Øª</span>
    route = []
    <span class="keyword">for</span> h3_index <span class="keyword">in</span> path:
        lat, lng = service.<span class="function">h3_to_lat_lng</span>(h3_index)
        route.<span class="function">append</span>((lat, lng))
    
    <span class="keyword">return</span> route


<span class="comment"># Ø§Ø³ØªÙØ§Ø¯Ù‡</span>
route = <span class="function">find_optimal_route</span>(
    start_lat=<span class="number">35.6997</span>,
    start_lng=<span class="number">51.3381</span>,
    end_lat=<span class="number">35.7219</span>,
    end_lng=<span class="number">51.4056</span>
)

<span class="keyword">print</span>(<span class="string">f"ğŸ›£ï¸ Ù…Ø³ÛŒØ± ÛŒØ§ÙØª Ø´Ø¯Ù‡: {len(route)} Ù†Ù‚Ø·Ù‡"</span>)
<span class="keyword">for</span> i, (lat, lng) <span class="keyword">in</span> <span class="function">enumerate</span>(route):
    <span class="keyword">print</span>(<span class="string">f"  {i+1}. ({lat:.6f}, {lng:.6f})"</span>)
            </div>

            <h3>ğŸ’° Ù…Ø«Ø§Ù„ 4: Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø¯Ø±Ø¢Ù…Ø¯</h3>
            <div class="code-header">ğŸ Python</div>
            <div class="code-block">
<span class="keyword">from</span> datetime <span class="keyword">import</span> datetime, timedelta
<span class="keyword">from</span> sqlalchemy <span class="keyword">import</span> func
<span class="keyword">from</span> app.database <span class="keyword">import</span> SessionLocal
<span class="keyword">from</span> app.models.ride <span class="keyword">import</span> Ride

<span class="keyword">def</span> <span class="function">predict_revenue</span>(hours_ahead: <span class="class-name">int</span> = <span class="number">24</span>) -> <span class="class-name">dict</span>:
    <span class="string">"""
    Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ Ø¯Ø±Ø¢Ù…Ø¯ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ú¯Ø°Ø´ØªÙ‡
    
    Args:
        hours_ahead: ØªØ¹Ø¯Ø§Ø¯ Ø³Ø§Ø¹Øª Ø¢ÛŒÙ†Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ
    """</span>
    db = <span class="function">SessionLocal</span>()
    
    <span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù…ÛŒØ§Ù†Ú¯ÛŒÙ† Ø¯Ø±Ø¢Ù…Ø¯ Ø³Ø§Ø¹ØªÛŒ Ø¯Ø± 7 Ø±ÙˆØ² Ú¯Ø°Ø´ØªÙ‡</span>
    week_ago = datetime.<span class="function">utcnow</span>() - <span class="function">timedelta</span>(days=<span class="number">7</span>)
    
    avg_revenue = db.<span class="function">query</span>(
        func.<span class="function">avg</span>(Ride.final_price)
    ).<span class="function">filter</span>(
        Ride.request_time >= week_ago,
        Ride.status == <span class="string">'completed'</span>
    ).<span class="function">scalar</span>()
    
    avg_rides_per_hour = db.<span class="function">query</span>(
        func.<span class="function">count</span>(Ride.id)
    ).<span class="function">filter</span>(
        Ride.request_time >= week_ago,
        Ride.status == <span class="string">'completed'</span>
    ).<span class="function">scalar</span>() / (<span class="number">7</span> * <span class="number">24</span>)
    
    <span class="comment"># Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ</span>
    predicted_rides = avg_rides_per_hour * hours_ahead
    predicted_revenue = avg_revenue * predicted_rides
    
    <span class="keyword">return</span> {
        <span class="string">'hours_ahead'</span>: hours_ahead,
        <span class="string">'predicted_rides'</span>: <span class="function">int</span>(predicted_rides),
        <span class="string">'predicted_revenue'</span>: <span class="function">round</span>(predicted_revenue, <span class="number">0</span>),
        <span class="string">'avg_revenue_per_ride'</span>: <span class="function">round</span>(avg_revenue, <span class="number">0</span>)
    }


<span class="comment"># Ø§Ø³ØªÙØ§Ø¯Ù‡</span>
prediction = <span class="function">predict_revenue</span>(hours_ahead=<span class="number">24</span>)
<span class="keyword">print</span>(<span class="string">f"ğŸ“ˆ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ 24 Ø³Ø§Ø¹Øª Ø¢ÛŒÙ†Ø¯Ù‡:"</span>)
<span class="keyword">print</span>(<span class="string">f"  ØªØ¹Ø¯Ø§Ø¯ Ø³ÙØ±: {prediction['predicted_rides']}"</span>)
<span class="keyword">print</span>(<span class="string">f"  Ø¯Ø±Ø¢Ù…Ø¯: {prediction['predicted_revenue']:,} ØªÙˆÙ…Ø§Ù†"</span>)
            </div>

            <h3>ğŸ¯ Ù…Ø«Ø§Ù„ 5: ØªÙˆØµÛŒÙ‡ Ù…ÙˆÙ‚Ø¹ÛŒØª Ø¨Ù‡ Ø±Ø§Ù†Ù†Ø¯Ú¯Ø§Ù†</h3>
            <div class="code-header">ğŸ Python</div>
            <div class="code-block">
<span class="keyword">from</span> typing <span class="keyword">import</span> List, Dict
<span class="keyword">from</span> app.database <span class="keyword">import</span> SessionLocal
<span class="keyword">from</span> app.services.analytics <span class="keyword">import</span> AnalyticsService
<span class="keyword">from</span> app.services.h3_service <span class="keyword">import</span> H3Service

<span class="keyword">def</span> <span class="function">recommend_locations</span>(
    driver_lat: <span class="class-name">float</span>,
    driver_lng: <span class="class-name">float</span>,
    max_distance: <span class="class-name">int</span> = <span class="number">5</span>
) -> <span class="class-name">List</span>[<span class="class-name">Dict</span>]:
    <span class="string">"""
    ØªÙˆØµÛŒÙ‡ Ø¨Ù‡ØªØ±ÛŒÙ† Ù…Ú©Ø§Ù†â€ŒÙ‡Ø§ Ø¨Ù‡ Ø±Ø§Ù†Ù†Ø¯Ù‡ Ø¨Ø± Ø§Ø³Ø§Ø³ ØªÙ‚Ø§Ø¶Ø§
    
    Args:
        driver_lat: Ù…ÙˆÙ‚Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ø±Ø§Ù†Ù†Ø¯Ù‡
        driver_lng: Ù…ÙˆÙ‚Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ø±Ø§Ù†Ù†Ø¯Ù‡
        max_distance: Ø­Ø¯Ø§Ú©Ø«Ø± ÙØ§ØµÙ„Ù‡ (ØªØ¹Ø¯Ø§Ø¯ Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒ)
    """</span>
    db = <span class="function">SessionLocal</span>()
    analytics = <span class="function">AnalyticsService</span>(db)
    h3_service = <span class="function">H3Service</span>()
    
    <span class="comment"># Ù…ÙˆÙ‚Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ø±Ø§Ù†Ù†Ø¯Ù‡</span>
    driver_h3 = h3_service.<span class="function">lat_lng_to_h3</span>(driver_lat, driver_lng)
    
    <span class="comment"># Ø¯Ø±ÛŒØ§ÙØª hotspots</span>
    hotspots = analytics.<span class="function">get_hotspots</span>(hours=<span class="number">1</span>, min_rides=<span class="number">3</span>)
    
    <span class="comment"># ÙÛŒÙ„ØªØ± Ø¨Ø± Ø§Ø³Ø§Ø³ ÙØ§ØµÙ„Ù‡</span>
    recommendations = []
    <span class="keyword">for</span> spot <span class="keyword">in</span> hotspots:
        distance = h3_service.<span class="function">calculate_distance</span>(
            driver_h3, 
            spot[<span class="string">'h3_index'</span>]
        )
        
        <span class="keyword">if</span> distance <= max_distance:
            recommendations.<span class="function">append</span>({
                <span class="string">'location'</span>: (spot[<span class="string">'lat'</span>], spot[<span class="string">'lng'</span>]),
                <span class="string">'h3_index'</span>: spot[<span class="string">'h3_index'</span>],
                <span class="string">'demand'</span>: spot[<span class="string">'ride_count'</span>],
                <span class="string">'distance'</span>: distance,
                <span class="string">'score'</span>: spot[<span class="string">'ride_count'</span>] / (distance + <span class="number">1</span>)
            })
    
    <span class="comment"># Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø§Ù…ØªÛŒØ§Ø²</span>
    recommendations.<span class="function">sort</span>(key=<span class="keyword">lambda</span> x: x[<span class="string">'score'</span>], reverse=<span class="keyword">True</span>)
    
    <span class="keyword">return</span> recommendations[:<span class="number">5</span>]  <span class="comment"># 5 ØªÙˆØµÛŒÙ‡ Ø¨Ø±ØªØ±</span>


<span class="comment"># Ø§Ø³ØªÙØ§Ø¯Ù‡</span>
recommendations = <span class="function">recommend_locations</span>(
    driver_lat=<span class="number">35.6997</span>,
    driver_lng=<span class="number">51.3381</span>,
    max_distance=<span class="number">10</span>
)

<span class="keyword">print</span>(<span class="string">f"ğŸ¯ ØªÙˆØµÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ù…Ú©Ø§Ù†ÛŒ Ø¨Ø±Ø§ÛŒ Ø±Ø§Ù†Ù†Ø¯Ù‡:"</span>)
<span class="keyword">for</span> i, rec <span class="keyword">in</span> <span class="function">enumerate</span>(recommendations, <span class="number">1</span>):
    <span class="keyword">print</span>(<span class="string">f"  {i}. ØªÙ‚Ø§Ø¶Ø§: {rec['demand']} | ÙØ§ØµÙ„Ù‡: {rec['distance']} | Ø§Ù…ØªÛŒØ§Ø²: {rec['score']:.2f}"</span>)
            </div>
        </div>

        <!-- Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Performance -->
        <div class="section">
            <h2>
                <span class="section-number">14</span>
                Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ùˆ Performance Tuning
            </h2>

            <h3>âš¡ 1. Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Query Ù‡Ø§ÛŒ Ø¯ÛŒØªØ§Ø¨ÛŒØ³</h3>
            <div class="code-header">ğŸ˜ SQL - Ø§ÛŒØ¬Ø§Ø¯ Index Ù‡Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡</div>
            <div class="code-block">
<span class="comment">-- Index Ø±ÙˆÛŒ H3 Ùˆ Ø²Ù…Ø§Ù†</span>
<span class="keyword">CREATE INDEX</span> idx_rides_pickup_h3_time 
<span class="keyword">ON</span> rides(pickup_h3, request_time);

<span class="comment">-- Index Ø±ÙˆÛŒ status</span>
<span class="keyword">CREATE INDEX</span> idx_rides_status 
<span class="keyword">ON</span> rides(status) 
<span class="keyword">WHERE</span> status <span class="keyword">IN</span> (<span class="string">'requested'</span>, <span class="string">'accepted'</span>);

<span class="comment">-- Composite Index</span>
<span class="keyword">CREATE INDEX</span> idx_rides_composite 
<span class="keyword">ON</span> rides(pickup_h3, status, request_time);

<span class="comment">-- Spatial Index</span>
<span class="keyword">CREATE INDEX</span> idx_rides_pickup_location 
<span class="keyword">ON</span> rides <span class="keyword">USING</span> GIST(pickup_location);

<span class="comment">-- ØªØ­Ù„ÛŒÙ„ Ùˆ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¬Ø¯Ø§ÙˆÙ„</span>
<span class="keyword">ANALYZE</span> rides;
<span class="keyword">VACUUM ANALYZE</span> rides;
            </div>

            <h3>ğŸ’¾ 2. Ø§Ø³ØªØ±Ø§ØªÚ˜ÛŒ Cache Ù¾ÛŒØ´Ø±ÙØªÙ‡</h3>
            <div class="code-header">ğŸ Python</div>
            <div class="code-block">
<span class="keyword">import</span> redis
<span class="keyword">import</span> json
<span class="keyword">from</span> functools <span class="keyword">import</span> wraps
<span class="keyword">from</span> typing <span class="keyword">import</span> Callable

<span class="keyword">class</span> <span class="class-name">AdvancedCache</span>:
    <span class="string">"""Ø³ÛŒØ³ØªÙ… Cache Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§ Redis"""</span>
    
    <span class="keyword">def</span> <span class="function">__init__</span>(<span class="keyword">self</span>, redis_client: <span class="class-name">redis</span>.<span class="class-name">Redis</span>):
        <span class="keyword">self</span>.redis = redis_client
    
    <span class="keyword">def</span> <span class="function">cache_result</span>(<span class="keyword">self</span>, ttl: <span class="class-name">int</span> = <span class="number">300</span>, prefix: <span class="class-name">str</span> = <span class="string">""</span>):
        <span class="string">"""Decorator Ø¨Ø±Ø§ÛŒ Cache Ú©Ø±Ø¯Ù† Ù†ØªÛŒØ¬Ù‡ ØªØ§Ø¨Ø¹"""</span>
        <span class="keyword">def</span> <span class="function">decorator</span>(func: <span class="class-name">Callable</span>):
            <span class="decorator">@wraps</span>(func)
            <span class="keyword">def</span> <span class="function">wrapper</span>(*args, **kwargs):
                <span class="comment"># Ø³Ø§Ø®Øª Ú©Ù„ÛŒØ¯ ÛŒÚ©ØªØ§</span>
                key_parts = [prefix, func.__name__]
                key_parts.<span class="function">extend</span>([<span class="function">str</span>(arg) <span class="keyword">for</span> arg <span class="keyword">in</span> args])
                key_parts.<span class="function">extend</span>([<span class="string">f"{k}:{v}"</span> <span class="keyword">for</span> k, v <span class="keyword">in</span> kwargs.<span class="function">items</span>()])
                cache_key = <span class="string">":"</span>.<span class="function">join</span>(key_parts)
                
                <span class="comment"># Ø¨Ø±Ø±Ø³ÛŒ Cache</span>
                cached = <span class="keyword">self</span>.redis.<span class="function">get</span>(cache_key)
                <span class="keyword">if</span> cached:
                    <span class="keyword">return</span> json.<span class="function">loads</span>(cached)
                
                <span class="comment"># Ø§Ø¬Ø±Ø§ÛŒ ØªØ§Ø¨Ø¹</span>
                result = <span class="function">func</span>(*args, **kwargs)
                
                <span class="comment"># Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± Cache</span>
                <span class="keyword">self</span>.redis.<span class="function">setex</span>(
                    cache_key,
                    ttl,
                    json.<span class="function">dumps</span>(result)
                )
                
                <span class="keyword">return</span> result
            <span class="keyword">return</span> wrapper
        <span class="keyword">return</span> decorator


<span class="comment"># Ø§Ø³ØªÙØ§Ø¯Ù‡</span>
cache = <span class="function">AdvancedCache</span>(redis_client)

<span class="decorator">@cache.cache_result</span>(ttl=<span class="number">600</span>, prefix=<span class="string">"analytics"</span>)
<span class="keyword">def</span> <span class="function">get_expensive_analytics</span>(h3_index: <span class="class-name">str</span>) -> <span class="class-name">dict</span>:
    <span class="comment"># Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø³Ù†Ú¯ÛŒÙ†...</span>
    <span class="keyword">return</span> {<span class="string">"data"</span>: <span class="string">"..."</span>}
            </div>

            <h3>ğŸ”„ 3. Batch Processing</h3>
            <div class="code-header">ğŸ Python</div>
            <div class="code-block">
<span class="keyword">from</span> typing <span class="keyword">import</span> List
<span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp

<span class="keyword">def</span> <span class="function">process_batch</span>(coords_batch: <span class="class-name">List</span>[<span class="class-name">tuple</span>]) -> <span class="class-name">List</span>[<span class="class-name">str</span>]:
    <span class="string">"""Ù¾Ø±Ø¯Ø§Ø²Ø´ ÛŒÚ© batch Ø§Ø² Ù…Ø®ØªØµØ§Øª"""</span>
    <span class="keyword">import</span> h3
    results = []
    <span class="keyword">for</span> lat, lng <span class="keyword">in</span> coords_batch:
        h3_index = h3.<span class="function">geo_to_h3</span>(lat, lng, <span class="number">9</span>)
        results.<span class="function">append</span>(h3_index)
    <span class="keyword">return</span> results


<span class="keyword">def</span> <span class="function">bulk_convert_to_h3</span>(
    coordinates: <span class="class-name">List</span>[<span class="class-name">tuple</span>],
    batch_size: <span class="class-name">int</span> = <span class="number">10000</span>
) -> <span class="class-name">List</span>[<span class="class-name">str</span>]:
    <span class="string">"""
    ØªØ¨Ø¯ÛŒÙ„ Ø§Ù†Ø¨ÙˆÙ‡ Ù…Ø®ØªØµØ§Øª Ø¨Ù‡ H3 Ø¨Ø§ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÙˆØ§Ø²ÛŒ
    
    Args:
        coordinates: [(lat, lng), ...]
        batch_size: Ø§Ù†Ø¯Ø§Ø²Ù‡ Ù‡Ø± batch
    """</span>
    <span class="comment"># ØªÙ‚Ø³ÛŒÙ… Ø¨Ù‡ batch Ù‡Ø§</span>
    batches = [
        coordinates[i:i+batch_size]
        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">0</span>, <span class="function">len</span>(coordinates), batch_size)
    ]
    
    <span class="comment"># Ù¾Ø±Ø¯Ø§Ø²Ø´ Ù…ÙˆØ§Ø²ÛŒ</span>
    <span class="keyword">with</span> mp.<span class="function">Pool</span>() <span class="keyword">as</span> pool:
        results = pool.<span class="function">map</span>(process_batch, batches)
    
    <span class="comment"># ØªØ±Ú©ÛŒØ¨ Ù†ØªØ§ÛŒØ¬</span>
    all_h3 = [h <span class="keyword">for</span> batch <span class="keyword">in</span> results <span class="keyword">for</span> h <span class="keyword">in</span> batch]
    
    <span class="keyword">return</span> all_h3


<span class="comment"># Ù…Ø«Ø§Ù„: ØªØ¨Ø¯ÛŒÙ„ 100,000 Ù†Ù‚Ø·Ù‡</span>
coords = [(<span class="number">35.7</span> + i*<span class="number">0.0001</span>, <span class="number">51.4</span> + i*<span class="number">0.0001</span>) <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">100000</span>)]
h3_indices = <span class="function">bulk_convert_to_h3</span>(coords)
<span class="keyword">print</span>(<span class="string">f"âœ… Converted {len(h3_indices)} coordinates"</span>)
            </div>

            <div class="warning-box">
                <h4>âš ï¸ Ù†Ú©Ø§Øª Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ</h4>
                <ul>
                    <li><strong>Connection Pooling:</strong> Ø§Ø² SQLAlchemy pool Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    <li><strong>Lazy Loading:</strong> ÙÙ‚Ø· Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø±Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù†ÛŒØ¯</li>
                    <li><strong>Pagination:</strong> Ø¨Ø±Ø§ÛŒ Query Ù‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯ Ø§Ø² pagination Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    <li><strong>Async/Await:</strong> Ø¨Ø±Ø§ÛŒ I/O operations Ø§Ø² async Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    <li><strong>Monitoring:</strong> Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø±Ø§ Ø¨Ø§ Prometheus/Grafana Ù…Ø§Ù†ÛŒØªÙˆØ± Ú©Ù†ÛŒØ¯</li>
                </ul>
            </div>
        </div>

        <!-- Ø¬Ù…Ø¹â€ŒØ¨Ù†Ø¯ÛŒ Ù†Ù‡Ø§ÛŒÛŒ -->
        <div class="section" style="background: linear-gradient(135deg, var(--primary-green), var(--secondary-green)); color: white; text-align: center; padding: 60px 40px;">
            <h2 style="color: white; border: none; font-size: 2.5em; margin-bottom: 30px;">
                ğŸ‰ ØªØ¨Ø±ÛŒÚ©! Ù¾Ø±ÙˆÚ˜Ù‡ Ú©Ø§Ù…Ù„ Ø´Ø¯
            </h2>
            
            <div style="font-size: 5em; margin: 30px 0;">
                ğŸš• â¬¡ ğŸ“Š
            </div>
            
            <p style="font-size: 1.4em; line-height: 2; margin: 30px 0; opacity: 0.95;">
                Ø´Ù…Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª ÛŒÚ© Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ ØªØ§Ú©Ø³ÛŒ Ú©Ø§Ù…Ù„ Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø¨Ø§ H3 Ø³Ø§Ø®ØªÛŒØ¯ Ú©Ù‡ Ø´Ø§Ù…Ù„:
            </p>
            
            <div style="background: rgba(255,255,255,0.15); padding: 30px; border-radius: 15px; margin: 30px 0; backdrop-filter: blur(10px);">
                <ul style="list-style: none; padding: 0; font-size: 1.2em; line-height: 2.5;">
                    <li>âœ… Ø´Ø§Ø®Øµâ€ŒØ¨Ù†Ø¯ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø¨Ø§ H3</li>
                    <li>âœ… Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§ Real-time</li>
                    <li>âœ… ØªØ­Ù„ÛŒÙ„ Hotspot Ùˆ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ ØªÙ‚Ø§Ø¶Ø§</li>
                    <li>âœ… REST API Ø¨Ø§ FastAPI</li>
                    <li>âœ… Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ Ø¨Ø§ Folium</li>
                    <li>âœ… Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø§ Redis Cache</li>
                    <li>âœ… Ø°Ø®ÛŒØ±Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ú©Ø§Ù†ÛŒ Ø¨Ø§ PostGIS</li>
                    <li>âœ… ØªØ³Øªâ€ŒÙ‡Ø§ÛŒ ÙˆØ§Ø­Ø¯ Ú©Ø§Ù…Ù„</li>
                </ul>
            </div>
            
            <div style="margin: 40px 0; padding: 30px; background: rgba(255,255,255,0.1); border-radius: 15px;">
                <h3 style="color: white; font-size: 1.8em; margin-bottom: 20px;">ğŸ“ˆ Ø¢Ù…Ø§Ø± Ù¾Ø±ÙˆÚ˜Ù‡</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-top: 20px;">
                    <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2.5em; font-weight: bold;">2000+</div>
                        <div style="font-size: 1.1em; opacity: 0.9;">Ø®Ø· Ú©Ø¯</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2.5em; font-weight: bold;">14</div>
                        <div style="font-size: 1.1em; opacity: 0.9;">Ø¨Ø®Ø´ Ø¢Ù…ÙˆØ²Ø´ÛŒ</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2.5em; font-weight: bold;">7+</div>
                        <div style="font-size: 1.1em; opacity: 0.9;">ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ</div>
                    </div>
                    <div style="background: rgba(255,255,255,0.15); padding: 20px; border-radius: 10px;">
                        <div style="font-size: 2.5em; font-weight: bold;">100%</div>
                        <div style="font-size: 1.1em; opacity: 0.9;">Ø¹Ù…Ù„ÛŒ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ø¯ÛŒ</div>
                    </div>
                </div>
            </div>
            
            <div style="margin-top: 50px; font-size: 1.3em; line-height: 2;">
                <p style="margin: 20px 0;">
                    <strong>Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ù‚Ø§Ø¨Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø±:</strong>
                </p>
                <p style="opacity: 0.95;">
                    ğŸš• Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ ØªØ§Ú©Ø³ÛŒ Ø¢Ù†Ù„Ø§ÛŒÙ† | ğŸ• ØªØ­ÙˆÛŒÙ„ ØºØ°Ø§ | ğŸ“¦ Ù„Ø¬Ø³ØªÛŒÚ© | 
                    ğŸª ØªØ­Ù„ÛŒÙ„ Ù…Ú©Ø§Ù† ÙØ±ÙˆØ´Ú¯Ø§Ù‡ | ğŸ™ï¸ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒØ±ÛŒØ²ÛŒ Ø´Ù‡Ø±ÛŒ
                </p>
            </div>
            
            <div style="margin-top: 50px; padding: 30px; background: rgba(255,255,255,0.2); border-radius: 15px; border: 2px solid rgba(255,255,255,0.3);">
                <h3 style="color: white; font-size: 1.6em; margin-bottom: 20px;">ğŸ“ Ù…Ù‡Ø§Ø±Øªâ€ŒÙ‡Ø§ÛŒ Ú©Ø³Ø¨ Ø´Ø¯Ù‡</h3>
                <div style="display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; margin-top: 20px;">
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">H3 Geospatial</span>
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">FastAPI</span>
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">PostgreSQL</span>
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">PostGIS</span>
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">Redis Cache</span>
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">Dynamic Pricing</span>
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">Data Analytics</span>
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">Folium Maps</span>
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">Docker</span>
                    <span style="background: rgba(255,255,255,0.25); padding: 12px 25px; border-radius: 25px; font-size: 1.1em;">Testing</span>
                </div>
            </div>
            
            <div style="margin-top: 50px; font-size: 1.2em;">
                <p style="opacity: 0.95; margin: 20px 0;">
                    ğŸ’¡ Ø­Ø§Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§ÛŒÙ† Ù¾Ø±ÙˆÚ˜Ù‡ Ø±Ø§ Ø³ÙØ§Ø±Ø´ÛŒâ€ŒØ³Ø§Ø²ÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
                </p>
                <p style="font-size: 1.4em; margin-top: 30px; font-weight: bold;">
                    Ù…ÙˆÙÙ‚ Ø¨Ø§Ø´ÛŒØ¯! ğŸš€
                </p>
            </div>
        </div>

        <!-- Ù…Ù†Ø§Ø¨Ø¹ Ø§Ø¶Ø§ÙÛŒ -->
        <div class="section">
            <h2>
                <span class="section-number">15</span>
                Ù…Ù†Ø§Ø¨Ø¹ Ùˆ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ø¨ÛŒØ´ØªØ±
            </h2>

            <h3>ğŸ“š Ù…Ø³ØªÙ†Ø¯Ø§Øª Ø±Ø³Ù…ÛŒ</h3>
            <table>
                <thead>
                    <tr>
                        <th>ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒ</th>
                        <th>Ù„ÛŒÙ†Ú©</th>
                        <th>ØªÙˆØ¶ÛŒØ­Ø§Øª</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>H3</strong></td>
                        <td><a href="https://h3geo.org" target="_blank">h3geo.org</a></td>
                        <td>Ù…Ø³ØªÙ†Ø¯Ø§Øª Ú©Ø§Ù…Ù„ H3</td>
                    </tr>
                    <tr>
                        <td><strong>H3-Python</strong></td>
                        <td><a href="https://uber.github.io/h3-py" target="_blank">uber.github.io/h3-py</a></td>
                        <td>API Reference Ù¾Ø§ÛŒØªÙˆÙ†</td>
                    </tr>
                    <tr>
                        <td><strong>FastAPI</strong></td>
                        <td><a href="https://fastapi.tiangolo.com" target="_blank">fastapi.tiangolo.com</a></td>
                        <td>ÙØ±ÛŒÙ…ÙˆØ±Ú© REST API</td>
                    </tr>
                    <tr>
                        <td><strong>PostGIS</strong></td>
                        <td><a href="https://postgis.net" target="_blank">postgis.net</a></td>
                        <td>Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ú©Ø§Ù†ÛŒ PostgreSQL</td>
                    </tr>
                    <tr>
                        <td><strong>Folium</strong></td>
                        <td><a href="https://python-visualization.github.io/folium" target="_blank">folium docs</a></td>
                        <td>Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¹Ø§Ù…Ù„ÛŒ</td>
                    </tr>
                    <tr>
                        <td><strong>SQLAlchemy</strong></td>
                        <td><a href="https://www.sqlalchemy.org" target="_blank">sqlalchemy.org</a></td>
                        <td>ORM Ù¾Ø§ÛŒØªÙˆÙ†</td>
                    </tr>
                    <tr>
                        <td><strong>Redis</strong></td>
                        <td><a href="https://redis.io" target="_blank">redis.io</a></td>
                        <td>In-memory database</td>
                    </tr>
                </tbody>
            </table>

            <h3>ğŸ“– Ù…Ù‚Ø§Ù„Ø§Øª Ùˆ Ù…Ù†Ø§Ø¨Ø¹ Ø¢Ù…ÙˆØ²Ø´ÛŒ</h3>
            <div class="info-box">
                <h4>Ù…Ù‚Ø§Ù„Ø§Øª ØªÙˆØµÛŒÙ‡ Ø´Ø¯Ù‡:</h4>
                <ol>
                    <li><strong>"Hexagons are the Bestagons"</strong> - CGP Grey (ÙˆÛŒØ¯ÛŒÙˆ)</li>
                    <li><strong>"H3: Uber's Hexagonal Hierarchical Spatial Index"</strong> - Uber Engineering Blog</li>
                    <li><strong>"Dynamic Pricing Algorithms"</strong> - Ù…Ù‚Ø§Ù„Ø§Øª Ø¹Ù„Ù…ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ø²Ù…ÛŒÙ†Ù‡</li>
                    <li><strong>"Spatial Indexing Techniques"</strong> - Ù…Ù‚Ø§ÛŒØ³Ù‡ Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù</li>
                    <li><strong>"Real-time Geospatial Analytics"</strong> - Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§</li>
                </ol>
            </div>

            <h3>ğŸ› ï¸ Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ùˆ Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø·</h3>
            <div class="tip-box">
                <ul>
                    <li><strong>Kepler.gl:</strong> ØªØ¬Ø³Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ (Uber)</li>
                    <li><strong>Deck.gl:</strong> Ø±Ù†Ø¯Ø± WebGL Ø¨Ø±Ø§ÛŒ Ù†Ù‚Ø´Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø²Ø±Ú¯</li>
                    <li><strong>Apache Superset:</strong> Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Business Intelligence</li>
                    <li><strong>GeoPandas:</strong> Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ú©Ø§Ù†ÛŒ Ø¨Ø§ Pandas</li>
                    <li><strong>Shapely:</strong> Ú©Ø§Ø± Ø¨Ø§ Ø§Ø´Ú©Ø§Ù„ Ù‡Ù†Ø¯Ø³ÛŒ</li>
                    <li><strong>QGIS:</strong> Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± GIS Ù…ØªÙ†â€ŒØ¨Ø§Ø²</li>
                </ul>
            </div>

            <h3>ğŸ¯ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø´Ø§Ø¨Ù‡ Ø¨Ø±Ø§ÛŒ Ù…Ø·Ø§Ù„Ø¹Ù‡</h3>
            <div class="code-header">ğŸ“‚ GitHub Repositories</div>
            <div class="code-block" style="direction: ltr;">
<span class="comment"># Uber H3 Examples</span>
https://github.com/uber/h3

<span class="comment"># H3 Pandas Integration</span>
https://github.com/DahnJ/H3-Pandas

<span class="comment"># Geospatial Data Science</span>
https://github.com/giswqs/geospatial

<span class="comment"># Location Intelligence</span>
https://github.com/Esri/arcgis-python-api
            </div>

            <h3>ğŸ’¼ Ú©Ø§Ø±Ø¨Ø±Ø¯Ù‡Ø§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ H3</h3>
            <div class="info-box">
                <h4>Ø´Ø±Ú©Øªâ€ŒÙ‡Ø§ÛŒÛŒ Ú©Ù‡ Ø§Ø² H3 Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯:</h4>
                <ul>
                    <li><strong>Uber:</strong> Ù‚ÛŒÙ…Øªâ€ŒÚ¯Ø°Ø§Ø±ÛŒ Ù¾ÙˆÛŒØ§ØŒ Ù…Ø³ÛŒØ±ÛŒØ§Ø¨ÛŒØŒ ØªØ­Ù„ÛŒÙ„ ØªÙ‚Ø§Ø¶Ø§</li>
                    <li><strong>Foursquare:</strong> ØªØ­Ù„ÛŒÙ„ Ù…Ú©Ø§Ù† Ùˆ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø±ÙØªØ§Ø±ÛŒ</li>
                    <li><strong>Unfolded (Foursquare Studio):</strong> ØªØ¬Ø³Ù…â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ú©Ø§Ù†ÛŒ</li>
                    <li><strong>DoorDash:</strong> Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØ­ÙˆÛŒÙ„ Ùˆ Ù„Ø¬Ø³ØªÛŒÚ©</li>
                    <li><strong>Mapbox:</strong> Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ù†Ù‚Ø´Ù‡ Ùˆ Ù…Ú©Ø§Ù†</li>
                </ul>
            </div>

            <h3>ğŸ“ Ú†Ú©â€ŒÙ„ÛŒØ³Øª ØªÙˆØ³Ø¹Ù‡ Ø¨ÛŒØ´ØªØ±</h3>
            <div class="warning-box">
                <h4>âœ… Ù…Ø±Ø§Ø­Ù„ Ø¨Ø¹Ø¯ÛŒ Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ:</h4>
                <ol>
                    <li>Ø§ÙØ²ÙˆØ¯Ù† Authentication Ùˆ Authorization (JWT)</li>
                    <li>Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ WebSocket Ø¨Ø±Ø§ÛŒ Real-time Updates</li>
                    <li>Ø³Ø§Ø®Øª Dashboard ØªØ¹Ø§Ù…Ù„ÛŒ Ø¨Ø§ React/Vue</li>
                    <li>Ø§ÙØ²ÙˆØ¯Ù† Machine Learning Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒ ØªÙ‚Ø§Ø¶Ø§</li>
                    <li>Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Notification System</li>
                    <li>Ø§ÙØ²ÙˆØ¯Ù† Payment Gateway</li>
                    <li>Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ CI/CD Pipeline</li>
                    <li>Ù…Ø³ØªÙ†Ø¯Ø³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Ø¨Ø§ Swagger/OpenAPI</li>
                    <li>Ø§ÙØ²ÙˆØ¯Ù† Monitoring Ø¨Ø§ Prometheus/Grafana</li>
                    <li>Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Rate Limiting</li>
                    <li>Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¨Ø±Ø§ÛŒ Scale (Kubernetes)</li>
                    <li>Ø§ÙØ²ÙˆØ¯Ù† Multi-language Support</li>
                </ol>
            </div>
        </div>

        <!-- Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„ -->
        <div class="section">
            <h2>
                <span class="section-number">16</span>
                Ø³ÙˆØ§Ù„Ø§Øª Ù…ØªØ¯Ø§ÙˆÙ„ (FAQ)
            </h2>

            <h3>â“ Ú†Ø±Ø§ H3 Ø¨Ù‡ØªØ± Ø§Ø² Grid Ù…Ø±Ø¨Ø¹ÛŒ Ø§Ø³ØªØŸ</h3>
            <p>
                Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§ ÙØ§ØµÙ„Ù‡ ÛŒÚ©Ø³Ø§Ù† Ø§Ø² Ù…Ø±Ú©Ø² Ø¨Ù‡ ØªÙ…Ø§Ù… Ù‡Ù…Ø³Ø§ÛŒÚ¯Ø§Ù† Ø¯Ø§Ø±Ù†Ø¯ØŒ ØªØ­Ø±ÛŒÙ Ú©Ù…ØªØ±ÛŒ Ø¯Ø± Ø¹Ø±Ø¶â€ŒÙ‡Ø§ÛŒ 
                Ø¬ØºØ±Ø§ÙÛŒØ§ÛŒÛŒ Ø¨Ø§Ù„Ø§ Ø¯Ø§Ø±Ù†Ø¯ØŒ Ùˆ Ø¯Ø§ÛŒØ±Ù‡ Ø±Ø§ Ø¨Ù‡ØªØ± ØªÙ‚Ø±ÛŒØ¨ Ù…ÛŒâ€ŒØ²Ù†Ù†Ø¯. Ø§ÛŒÙ† Ø¨Ø§Ø¹Ø« Ù…ÛŒâ€ŒØ´ÙˆØ¯ ØªØ­Ù„ÛŒÙ„â€ŒÙ‡Ø§ÛŒ 
                Ù…Ú©Ø§Ù†ÛŒ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ø¨Ø§Ø´Ù†Ø¯.
            </p>

            <h3>â“ Ú†Ù‡ Resolution Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ø®ÙˆØ¯ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†Ù…ØŸ</h3>
            <p>
                Ø¨Ø³ØªÚ¯ÛŒ Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø¯ Ø¯Ø§Ø±Ø¯:
            </p>
            <ul>
                <li><strong>Resolution 7-8:</strong> ØªØ­Ù„ÛŒÙ„ Ø³Ø·Ø­ Ø´Ù‡Ø± (Ù…Ø­Ù„Ù‡â€ŒÙ‡Ø§)</li>
                <li><strong>Resolution 9:</strong> ØªØ­Ù„ÛŒÙ„ Ø®ÛŒØ§Ø¨Ø§Ù†â€ŒÙ‡Ø§ Ùˆ Ø¨Ù„ÙˆÚ©â€ŒÙ‡Ø§ (Ù¾ÛŒØ´Ù†Ù‡Ø§Ø¯ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ§Ú©Ø³ÛŒ)</li>
                <li><strong>Resolution 10-11:</strong> ØªØ­Ù„ÛŒÙ„ Ø³Ø§Ø®ØªÙ…Ø§Ù†â€ŒÙ‡Ø§</li>
                <li><strong>Resolution 12+:</strong> Ø¯Ù‚Øª Ø¨Ø³ÛŒØ§Ø± Ø¨Ø§Ù„Ø§ (IoTØŒ Tracking)</li>
            </ul>

            <h3>â“ H3 Ø¨Ø§ Ú†Ù†Ø¯ Ù…ÛŒÙ„ÛŒÙˆÙ† Ø±Ú©ÙˆØ±Ø¯ Ú†Ù‚Ø¯Ø± Ø³Ø±ÛŒØ¹ Ø§Ø³ØªØŸ</h3>
            <p>
                H3 Ø¨Ø³ÛŒØ§Ø± Ø³Ø±ÛŒØ¹ Ø§Ø³Øª. ØªØ¨Ø¯ÛŒÙ„ ÛŒÚ© Ù…ÛŒÙ„ÛŒÙˆÙ† Ù†Ù‚Ø·Ù‡ Ø¨Ù‡ H3 Ú©Ù…ØªØ± Ø§Ø² 1 Ø«Ø§Ù†ÛŒÙ‡ Ø·ÙˆÙ„ Ù…ÛŒâ€ŒÚ©Ø´Ø¯. 
                Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Index Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ùˆ Redis CacheØŒ Query Ù‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ø±ÙˆÛŒ Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯Ù‡Ø§ 
                Ø±Ú©ÙˆØ±Ø¯ Ù†ÛŒØ² Ø¯Ø± Ø²Ù…Ø§Ù† Ù…Ù†Ø§Ø³Ø¨ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.
            </p>

            <h3>â“ Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØªÙˆØ§Ù† H3 Ø±Ø§ Ø¨Ø§ Ø³Ø§ÛŒØ± Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ GIS ØªØ±Ú©ÛŒØ¨ Ú©Ø±Ø¯ØŸ</h3>
            <p>
                Ø¨Ù„Ù‡ØŒ H3 Ø¨Ø§ ØªÙ…Ø§Ù… Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ÛŒ GIS Ø³Ø§Ø²Ú¯Ø§Ø± Ø§Ø³Øª. Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ H3 Ø±Ø§ Ø¨Ø§ PostGISØŒ 
                QGISØŒ ArcGISØŒ Ùˆ Ø³Ø§ÛŒØ± Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯. Ù‡Ù…Ú†Ù†ÛŒÙ† ØªØ¨Ø¯ÛŒÙ„ Ø¨ÛŒÙ† H3 Ùˆ 
                ÙØ±Ù…Øªâ€ŒÙ‡Ø§ÛŒ GeoJSONØŒ WKTØŒ Shapefile Ø¢Ø³Ø§Ù† Ø§Ø³Øª.
            </p>

            <h3>â“ Ú†Ú¯ÙˆÙ†Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø§Ø² H3 Ø¯Ø± Frontend Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯ØŸ</h3>
            <p>
                Ú©ØªØ§Ø¨Ø®Ø§Ù†Ù‡ h3-js Ø¨Ø±Ø§ÛŒ JavaScript ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯Ø± ReactØŒ VueØŒ 
                ÛŒØ§ Angular Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯. Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² Deck.gl Ø¨Ø±Ø§ÛŒ Ø±Ù†Ø¯Ø± 
                Ø´Ø´â€ŒØ¶Ù„Ø¹ÛŒâ€ŒÙ‡Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
            </p>

            <h3>â“ Ø¢ÛŒØ§ H3 Ø±Ø§ÛŒÚ¯Ø§Ù† Ø§Ø³ØªØŸ</h3>
            <p>
                Ø¨Ù„Ù‡ØŒ H3 Ú©Ø§Ù…Ù„Ø§Ù‹ Ù…ØªÙ†â€ŒØ¨Ø§Ø² Ùˆ Ø±Ø§ÛŒÚ¯Ø§Ù† Ø§Ø³Øª (Apache License 2.0). Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ 
                Ø¢Ù† Ø±Ø§ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ ØªØ¬Ø§Ø±ÛŒ Ø¨Ø¯ÙˆÙ† Ù‡ÛŒÚ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØªÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.
            </p>

            <h3>â“ Ú†Ú¯ÙˆÙ†Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø±Ø§ Ø¨Ù‡ÛŒÙ†Ù‡ Ú©Ø±Ø¯ØŸ</h3>
            <div class="tip-box">
                <ul>
                    <li>H3 Index Ø±Ø§ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒØ¯ (Ù†Ù‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Real-time)</li>
                    <li>Ø§Ø² Redis Ø¨Ø±Ø§ÛŒ Cache Ú©Ø±Ø¯Ù† Ù†ØªØ§ÛŒØ¬ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    <li>Index Ù‡Ø§ÛŒ Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø¨Ø³Ø§Ø²ÛŒØ¯</li>
                    <li>Ø¨Ø±Ø§ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø§Ù†Ø¨ÙˆÙ‡ Ø§Ø² Batch Processing Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯</li>
                    <li>Connection Pool Ø¯ÛŒØªØ§Ø¨ÛŒØ³ Ø±Ø§ Ø¨Ù‡ÛŒÙ†Ù‡ Ú©Ù†ÛŒØ¯</li>
                </ul>
            </div>
        </div>

    </main>

    <footer>
        <div style="max-width: 1100px; margin: 0 auto;">
            <h3 style="font-size: 2em; margin-bottom: 20px;">
                ğŸš• Ù¾Ø±ÙˆÚ˜Ù‡ Ø¹Ù…Ù„ÛŒ: Ø³ÛŒØ³ØªÙ… ØªØ­Ù„ÛŒÙ„ ØªØ§Ú©Ø³ÛŒ Ø¨Ø§ H3
            </h3>
            <p style="font-size: 1.2em; margin: 15px 0; opacity: 0.95;">
                ÛŒÚ© Ù¾Ø±ÙˆÚ˜Ù‡ Ú©Ø§Ù…Ù„ Ùˆ Ø¹Ù…Ù„ÛŒ Ø¯Ø± Ø¯Ù†ÛŒØ§ÛŒ ÙˆØ§Ù‚Ø¹ÛŒ
            </p>
            <div style="margin: 30px 0; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px;">
                <p style="font-size: 1.1em; line-height: 2;">
                    Ø§ÛŒÙ† Ø¢Ù…ÙˆØ²Ø´ Ø´Ø§Ù…Ù„ ØªÙ…Ø§Ù… Ú©Ø¯Ù‡Ø§ÛŒ Ø¹Ù…Ù„ÛŒØŒ ØªØ³Øªâ€ŒÙ‡Ø§ØŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒâ€ŒÙ‡Ø§ Ùˆ 
                    Ø¨Ù‡ØªØ±ÛŒÙ† Ø±ÙˆØ´â€ŒÙ‡Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± Ø§Ø³Øª.
                </p>
            </div>
            <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.3);">
                <p style="font-size: 1em; opacity: 0.8;">
                    ØªÚ©Ù†ÙˆÙ„ÙˆÚ˜ÛŒâ€ŒÙ‡Ø§: Python â€¢ H3 â€¢ FastAPI â€¢ PostgreSQL â€¢ PostGIS â€¢ Redis â€¢ Docker â€¢ Folium
                </p>
                <p style="margin-top: 15px; font-size: 0.95em; opacity: 0.7;">
                    Ø³Ø§Ø®ØªÙ‡ Ø´Ø¯Ù‡ Ø¨Ø§ â¤ï¸ Ø¨Ø±Ø§ÛŒ ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø¹Ù…Ù„ÛŒ
                </p>
            </div>
            <div style="margin-top: 30px; font-size: 1.1em;">
                <p>Â© 2024 - Ø¢Ù…ÙˆØ²Ø´ Ú©Ø§Ù…Ù„ H3 | ØªÙ…Ø§Ù…ÛŒ Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸ Ø§Ø³Øª</p>
            </div>
        </div>
    </footer>

</body>
</html>
